{"version":3,"sources":["static/images/icon.png","static/images/logo-d.png","static/payment/PayPalBtn.jpg","static/payment/MadaBtn.jpg","static/payment/BankBtn.jpg","components/layouts/Navbar.js","components/layouts/Footer.js","SyncApp.js","SyncData.js","components/Home/Home.js","components/Home/Terms.js","components/CouponsGroup/Group.js","components/CouponsGroup/Groups.js","components/CouponsOffer/Offers.js","components/User/Profile.js","components/User/Notifications.js","components/User/PayPalBtn.js","components/User/Balance.js","components/User/MyCoupons.js","components/User/Activation.js","components/User/Settings.js","components/User/Ticket.js","components/User/MyTickets.js","components/Admins/Provider/NewGroup.js","components/Admins/Provider/Redeem.js","components/Admins/Provider/Panel.js","components/CouponsGroup/AdminGroup.js","components/Admins/Panels/ToProviderTable.js","components/Admins/Panels/DisabledUsers.js","components/Admins/Panels/InActiveUsers.js","components/Admins/Panels/ElementsTable.js","components/Admins/Panels/FilesTable.js","components/Admins/Panels/Groups.js","components/Admins/Panels/Sells.js","components/Admins/Panels/AddGroupTable.js","components/Admins/Panels/AddSellsTable.js","components/Admins/Panels/Tickets.js","components/Admins/Admin/Panel.js","components/Admins/Panels/Histories.js","components/Admins/Panels/AdminsTable.js","components/Admins/Panels/ProvidersTable.js","components/Admins/Panels/AssociatesTable.js","components/Admins/Panels/UsersTable.js","components/Admins/Panels/BalanceRequests.js","components/Admins/SuperAdmin/Panel.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","withRouter","userData","localStorage","maidan_user","User","JSON","parse","useState","basic","setBasicData","email","username","password","pre_phone","country","regState","setRegState","registerModal","setRegister","regErrors","setRegErrors","successReg","setSuccessReg","logState","setLogState","loginModal","setLogin","logErrors","setLogErrors","logoutModal","setLogout","logoutErrors","setLogoutErrors","resetPasswModal","setResetPassw","submitted","token","confirm_password","resetPasswState","setResetPasswState","resetPasswErrors","setResetPasswErrors","useEffect","basicData","maidan_elements","resetLogin","handleLogChange","e","preventDefault","target","id","value","resetRegister","handleRegChange","name","title","document","getElementById","innerText","resetPasswReset","handleResetPasswChange","handleErrorEvent","SendActivationLink","a","fetch","method","headers","body","stringify","hostname","window","location","origin","then","resp","ok","ActivationLink","error","type","DateDisplay","date","Date","getDay","getDate","getMonth","getFullYear","LoggedOutLinksDesktop","className","data-toggle","data-target","to","onClick","LoggedInLinksDesktop","role","aria-haspopup","aria-expanded","src","profile_img","PH","alt","width","height","aria-labelledby","is_provider","is_associate","is_admin","is_super","LoggedInLinksSideNav","href","parseInt","notifs","LoggedOutLinksSideNav","LogoD","maidan_jwt_$m3","Object","keys","length","constructor","Modal","show","onHide","Header","Title","Body","onSubmit","Register","logged","json","data","code","serverError","requestError","phone","entries","map","key","loadRegErrors","htmlFor","onChange","dir","required","placeholder","toggler","addEventListener","this","classList","toggle","index","values","telecode","ar","getCountryCallingCode","label","open","Footer","Button","variant","setItem","jwt","access_level","user","reload","notActiveAccount","link","text","Login","loadLogErrors","ResetPassword","successReset","Request","Values","loadResetPasswErrors","disabled","sendResetPasswEmail","loadLogoutErrors","_","removeItem","sessionStorage","clear","Logout","currentYear","copy","style","SyncApp","prevProps","props","pathname","scrollTo","React","Component","flash","message","state","setState","console","log","notifications","labels","files","resetModals","Home","carousel","small","AdsFiles","setAdsFiles","curState","flashMessage","view","flashState","setFlashState","groups","setGroups","errors","setErrors","maidan_files","carouselAds","smallAds","i","push","QueryError","data-ride","data-slide-to","loading","data-slide","aria-hidden","sort","Math","random","slice","file","file_name","loadErrors","group","images","company","Terms","ViewGroup","currentUser","gid","useParams","setGroup","setFlash","isFlash","setFlashModal","notify","setNotify","isNotify","setNotifyModal","redirect","setRedirect","OpenBranchMap","handleNotify","can_sign_up","resetFlash","logout","groupBranches","branches","lenGroupBranches","groupImages","coupon_price","parseFloat","toFixed","coupons_left","branch","city","description","seconds","setSeconds","sloppy_date","tzOffset","getTimezoneOffset","target_date","getTime","yy","mm","dd","h","getHours","m","getMinutes","expire_date","status","claimants","includes","distribute_type","deadline","x","setInterval","sloppy_time","tzDifference","now","t","hh","floor","ss","timer","innerHTML","clearInterval","add","setTimer","distribute_end_date","loadCard","request_type","SendRequest","ViewGroups","setUser","filters","setFilters","advance","setAdvance","types","setTypes","cities","setCities","elements","forEach","element","handleFilter","SearchFilter","defaultValue","coupons_num","full_price","ViewOffers","offers","limit","setOffers","modalErrors","setModalErrors","isBranches","setBranchesModal","offer_id","isBuy","setBuyModal","Server","balance","scope","offers_patch","offer","group_id","seller","coupon_type","price","loadOffers","new_limit","loadModalErrors","BuyCoupon","Profile","userErrors","setUserErrors","edit","setEdit","FetchError","fullname","Notifications","setNotifs","markAsRead","markAsUnRead","Delete","markAllAsRead","DeleteAll","notifs_patch","notif","viewed","notification","loadNotifs","PayPalBtn","user_id","amount","paypalRef","useRef","progress","setProgress","HandleSuccessPayment","order_id","reloadPage","verified","ID","Method","setTimeout","AddBalance","paypal","Buttons","createOrder","actions","order","create","purchase_units","currency_code","onApprove","hidden","capture","Payment","onError","PaymentBtns","onCancel","onClose","render","current","ref","Balance","setBalance","paypal_email","pullstate","setPullState","setFlashMessage","transferState","setTransferState","isBank","setBank","isPaypal","setPaypal","confirmAmount","setConfirm","isMada","setMada","handleTransferChange","BankMethod","PaypalMethod","MadaMethod","bank_account","PaypalIcon","BankIcon","MadaIcon","action","step","min","max","aria-describedby","TransferBalance","form","CheckUser","MyCoupons","coupons","isQRCode","setQRCodeModal","QRCodeState","setQRCode","isGift","setGiftModal","coupon_id","to_user_id","giftState","setGiftState","searchUsers","setSearchUsers","isSell","setSellModal","sellState","setSellState","offerState","setOfferState","cancelModal","setCancelModal","NotFound","handleGift","fetchUsersResualts","searchQuery","users","CancelOffer","Offer","Coupon","coupons_patch","coupon","available","onhold","expired","used","canceled","getStatus","coupon_status","group_company","group_branches","getQRCode","handleSell","loadCoupons","qr_code","size","level","renderAs","oldElemnt","oldSelectedElement","remove","newElemnt","newSelectedElemnt","handleUserSelection","request","not_yours","SendGift","SellCoupon","Activation","URLSearchParams","search","get","msg","setStatus","isModal","setModal","setEmail","InvalidRequest","InvalidToken","redirectOnTime","ReSendActivationLink","success","activated","Settings","modalState","setModalState","tokenForm","setTokenForm","flashModal","isProvider","setEditProvider","isEmail","setEditEmail","isPhone","setEditPhone","old_password","$","click","selText","parents","find","html","handleChange","submitFullname","CurErrors","updated","UpdateFullname","submitLocation","country_id","country_value","city_id","city_value","UpdateLocation","ImageChange","fileToUpload","reader","FileReader","readAsDataURL","onload","image","Image","result","ImageSize","submitImage","formData","FormData","UploadImages","ImageUpload","LogoutUser","handleModalChange","ValidateNoOpenTickets","submitMainAdImage","append","adImage","submitPDFFile","pdfFile","handleProviderChange","resetAndLogout","loadUserErrors","encType","accept","maidan_user_access","SendToken","resetToken","ValidateToken","SubmitTicket","GetDownloadLink","download_links","downloads","prev_errors","filename","ex","split","reverse","Ticket","messageState","setMessageState","fetchTicket","ticket","interval","waiting","closed","len","elem","substring","handleSubmit","bid","SubmitMessage","closeTicket","close","unAble","user_resp","messages","rows","maxLength","created","last","MyTickets","tickets","modal","tickets_patch","last_activity","loadTickets","submitTicket","NewGroup","couponTypes","setForm","company_type","coupon_code","start","expire","onsite","branches_num","uploaded","setUploaded","user_balance","balanceModal","setBalanceModal","ad_images","main_ad_image","SubmitState","offset","Images","newGroupFormFirst","minDateToToday","today","String","checkBalance","eligible","num","loopList","Array","branches_list","namespace","CurState","CurBranches","TargetBranch","validated","ind","newGroupFormSecond","LoadForms","RedeemCoupons","URLQuery","QRCode","info","setInfo","confirmModal","setConfirmModal","noProvider","ValidateQRCode","s","getSeconds","start_date","CouponInfo","LoadContent","onholdStatus","RedeemCoupon","MyGroups","associates","setAssociates","setCoupons","deleteModal","setDeleteModal","settingsModal","setSettingsModal","settingState","setSettingState","imagesModal","setImagesModal","imageState","setImageState","removeAssoc","setRemoveAssoc","associationModal","setAccosiationModal","imgPreviewModal","setImgPreviewModal","imgDeleteModal","setImgDeleteModal","uid","handleImagesChange","textContent","URL","createObjectURL","imageType","removeAssociate","AddLimit","ReduceLimit","ImagePrimary","associates_patch","LoadAssociates","groups_patch","finished","disType","display","views","handleSettings","LoadGroups","matcher","redeem_date","LoadCoupons","setAssociate","accosiate","Select","Update","coupons_plus","Company","Expired","Hide","ImageDelete","DeleteImage","AdminViewGroup","setUsers","receivers","display_expire_date","on_site","ToProviderTable","requests","setRequests","openImage","setOpenImage","isOk","setOk","bad","isBad","setBad","handleApproved","handleReject","handleDownloadFile","download_link","requests_patch","req","rejected","accepted","content","company_name","mainAdImage","providerAgreement","LoadRequests","DisabledUsers","isActivate","setActivatingModal","users_patch","claimed_coupons","handleActivate","LoadUsers","ActivateUser","InActiveUsers","ElementsTable","setElements","setSearch","isCountry","setCountryModal","isNew","setNewModal","countryState","setCountryState","isTypes","setTypesModal","typeState","setTypeState","SearchElements","handleCountryChange","handleCitiesChange","citiesAr","cities_ar","citiesEn","cities_en","handleNewCity","handleDeleteCity","splice","handleTypesChange","valuesAr","values_ar","valuesEn","values_en","elements_patch","country_ar","country_en","en","LoadElements","NewCountry","inputMode","UpdateCountry","handleDeleteType","FilesTable","uploading","setUploading","setFiles","delete","isDelete","UploadFiles","names","handleDownload","files_patch","original_name","providersAgreement","LoadFiles","SubmitFiles","Files","multiple","filesToUpload","declined","DeleteFile","GroupsTable","SearchGroups","unique_views","SellsTable","handleCancel","completed","buyer","coupon_expire","end_date","LoadOffers","AddGroupsTable","display_time","distribute_time","img","AddSellsTable","acceptModal","setAcceptModal","handleAccept","AcceptOffer","TicketsTable","setTickets","LoadTickets","AdminPanel","subActive","setSubActive","permissions","setPermissions","getElementsByClassName","parentElement","querySelector","handleSubTableSwitch","TICKETS","TO_PROVIDER","DISABLED_USERS","NEW_USERS","ADS","OFFERS","FILES","DATA","Tickets","Applications","Disabled","Newbie","Groups","Sells","AddGroup","AddSells","Elements","Histories","histories","setHistories","entity_type","record_type","record_state","records","extractor","setExtractor","handleExtracting","data_","SearchFilters","dates","LoadFilters","histories_patch","history","Users","Coupons","Offers","getType","rec","err","succeed","failed","error_message","entity_id","record","LoadHistories","cols","createElement","setAttribute","encodeURIComponent","appendChild","removeChild","AdminsTable","isSetting","setSettingModal","isPermissions","setPermissionsModal","setDeletingModal","SearchUsers","handleSettingsChange","BackToNormalUser","SubmitSettings","fullPhone","permissionsBox","getElementsByName","permissionsList","checked","UpdatePermissions","defaultChecked","DeleteUser","ProvidersTable","isRaise","setRaiseModal","owned_groups","check_balance","SubmitCompany","AssociatesTable","isRemove","setRemoveModal","UsersTable","SubmitRaise","BalanceRequests","handleAR","bank","mada","getMethod","SuperAdminPanel","Providers","Associates","Admins","App","component","exact","path","Boolean","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.155eb671.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIAAgMAAACJFjxpAAAADFBMVEXFxcX////p6enW1tbAmiBwAAAFiElEQVR4AezAgQAAAACAoP2pF6kAAAAAAAAAAAAAAIDbu2MkvY0jiuMWWQoUmI50BB+BgRTpCAz4G6C8CJDrC3AEXGKPoMTlYA/gAJfwETawI8cuBs5Nk2KtvfiLW+gLfK9m+r3X82G653+JP/zjF8afP1S//y+An4/i51//AsB4aH+/QPD6EQAY/zwZwN8BAP50bh786KP4+VT+3fs4/noigEc+jnHeJrzxX+NWMDDh4g8+EXcnLcC9T8U5S/CdT8bcUeBEIrwBOiI8ki7Ba5+NrePgWUy89/nYyxQ8Iw3f+pWY4h1gb3eAW7sDTPEOsLc7wK1TIeDuDB+I/OA1QOUHv/dFsZQkhKkh4QlEfOULYz2nGj2/Nn1LmwR/86VxlCoAW6kCsHRGANx1RgCMo5Qh2EsZgrXNQZZShp5Liv7Il8eIc5C91EHY2hxk6bwYmNscZIReDBwtCdhbErC1JGBpScBcOgFMLQsZMQs5Whayd+UQsLYsZGlZyNyykKllISNmIUfAwifw8NXvTojAjGFrdYi11SGWVoeYWx1i6lmQCiEjFkKOVgjZ+xxIhZCtFULWHkCqxCw9gNQKmP9vNHzipdEPrRcxtVbAeDkAvve0iM2QozVD9hfjhp4YP/UrkJYDbD2AtBxgfSkAvvHEeNcDSAsilgtAWxIy91J8AXgZAJ5e33+4tuACcAG4AFwALgBXRXQB6AFcB5MXAuA6nl9/0Vx/011/1V5/1/dfTPJvRtdnu/zL6beeFO/7r+fXBYbrEkt/j+i6ytXfpuvvE/ZXOnsA/a3a/l5xf7O6v1t+Xe/vOyz6HpO8yyboM8o7rfJes77bru83THk48p7TvOs27zvOO6/73vO++z7l4cgnMPQzKPopHC0N9noSSz6LJp/Gk88jyicy5TOp6qlc+VyyfDJbPpuuns6XzyfMJzTmMyrrKZ35nNJ8Ums+q7af1tvPK+4nNodEnPKp3fnc8npyez67/qVP7+/fL8hfcMjfsOhf8cjfMclfcnn9+BkOnLECP8Q58OYeyJ40eoyF6Ee/En/JHlP6mIlRVXprF4BxtAvArV0AxtEuALd2ARhHuwDc2gVgHPX/hFv9fMBddjIGeKg/WCxlCsI46u+Ga5mCcJd+sIG9UkGAW32ZbApFAHhod4Bb3eo04h3god0BbiUHYApVCNjbHeBW+QDAXT4a7qg7r7e214057vg0QhkEHkoSwq0kIdydXw4/Q3H8hjYJ3vL0WConBJhCHQaOToeBrU0BljYFmEoVgHGUKgAPnREAt84IgLuqFgAYSUEOAHszDwuAtSkHAZhLGYIpdCLgKGUIHtocZG1zkLmUIRhxDnJU1RDA1uYga5uDzKUOwhTnIEfnxcDe5iBrcyQAYGlzkKkUYhhxDrKXQgxbSwLWUohhbknA1JKAEZOAvSUBW0sC1pYEzC0JmFoSMMJyCDhaFrK3JGDtyiFgaVnI3LKQqWUhI2YhR8tC9paFrC0LWVoWMrcsZGpZyIhZyNGykL2rSIGtlQHWVgZYWhlgbmWAqZUBRiwDHK0MsLcywNbKAGsOoNUhllaHmFsdYmp1iBHrEEerQ+w5gFYI2VodYm11iKXVIeYcQCuETK0QMmIh5MgBtELI3gohWyuErDmAVolZWiFkzgG0SszUKjGjfj6gVmKOVonZcwCtFbB9HQC+ozWDbz1bvGu9iKW1AuYcQOtFTLEX1GbIaFegN0OOHEBrhuw5gNYM2XIArRuz5gDacoB3bTnAEktxXQ4wfw0AvveM8b4tiJjSJOwLIsbXsAKeNeKCiOO3D+AVbUl0AfjGs8ZPbUnIdgFoa1LWC0BblfMuB9AeC1j6gqQE0J9LmC8AOYD2ZMb7i4bt2ZTpWoHfPoB7Tj2fXzT8N1X41vkq/QHOAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/logo-d.48995aea.png\";","module.exports = \"data:image/jpeg;base64,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\"","module.exports = \"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAABGCAYAAABll74gAAAVPUlEQVR4Xu1dCZQcxXn+qqqPmT20Wp1I4hACDEjcFjZnJB4WEDAJmMMHxMgONglg4hgScIwd4UsEiDHI5tLDJE5iCDghGEKA8AyJHZw4kARxhcucFgIhraQ9Zvqoqryvt3oZbXa1q5WWGc126c3b2e3u6jq++uur/5JAUYoRaKIREE3Ul6IrxQigAHQBgqYagQLQTTWdRWcKQBcYaKoRKADdVNNZdKYAdIGBphqBAtBNNZ1FZwpAFxhoqhEoAN1U01l0pgB0gYGmGoEC0E01nUVnCkAXGGiqESgA3VTTWXSmAHSBgaYagQLQTTWdRWcKQBcYaKoRKADdVNNZdKYAdIGBphqBAtBNNZ1FZxoC0G9v6jtV+uUTWqPKB9JQvxAnwQPTJoV3b3F6rBW4AgLzIfAsLJYJM+bpzOtaBIkXINAJgTYI9MBiLQJoJLhIRAP1834h7JjfVzw4biNQd0Df8lxl6Q1PvHTb2m6JjqQHadmg0ufDVv11G4JqV+rLsCpMFRoiEKJUVrI1lKIcSBEKMf4hZD6mQCQVwMaI4xihtGmkg4ffWB9chG/Of3GEmTkEwGkAdgHguQ8X3noA5w96dgaAJQD+AMBeAHwAKQDlnqsCCN3vvwYwr+b5d5RSU7TW3QAkgGcA3ALgbwAko0QP23g5gBMAdLhPBcCPAXwFwBujrKeut9Ud0Hc813vbVx97aen6eBKmiQRJK1Ct+phkAnSr9Qh1CcZabQAjAcUGW8C6DySEFADFZfY3XhaAlCKb2CGLttAGQlsgk+oCNqvDANZYGMPrFia1SKX0ZJomiQ5EmkCHMBXZnvS+trbSeTIuW/D6MK/YDcBfAFgkhNAEpGXr3iv/A2AhAF5jIfDvB0BQ829se237+TcCm+3ldy6IndyzvwHgQd/3S0nyHnaFELDW/jOAPwbA922pfDoIgtviOB54p+d5SFOup6z0AbgEwI11ResoXl53QP9k1VtLL3/izdvW2Zlor/RgU1iFMB2Y7pexNn4DoTd5FN0Yv1uqaWIqfZFRfpu1XlgV1mCq7e56vrdjMf5o7ivDvPlpJ0FL7jqlWwyAtIWAvNdJQ16e6cBMUBNBXQD+AQClLe8nkAMAlND8zp8bAfy5q5sL4xxXL+9fAGAxgFZ3/XEAJwF4Z5i2zgLwE7fAWDdBzTZscG0ru/fzndw9fjh+o73tNdcd0OzC/FtW2YoXQKSUrQFgu5HIEgJjYOrcQqk9xEEvvLQV3UkaJYneMKMjaXmxd/oCXDBnqG34GgBf6t9IsvJNAH+6han6JIAfODrBLf7TAP5uG6f2DAB/yTqVUlJrfTGA7wxT55FBENwTx/EkAG8D+AiA52vu/XsAJzoK9C8APuok9jY2cXwerzNcgB8+2T3jyl++uqaifNHogJZCY0NFr2tvS7Amnn5I9bzZQ1EO7vscV0q6/+V6HWHqPgHgNgdoUolPAXhoG6e73UnSU1w9BPfS4QBdKpUerVarlP6vAfgMgEdr7j0awE/d7sD+ng6AUr8hS90BfedzXYuW/fzNRyvKb3gJTUD3RHoTyun6uG3nRV1nThkK0LXaFh4It6ytAQ4DcA+A6QB6AfwrgOsBvOtARElPoPN3bvujLdcJIS5w3P3fHO3oGeLhI5SUd2tj+P43AZzt2pDfysMs390mhFDWWgJ6W3eQ0fZhq++rO6AzyrHyKbujADpKdLU3SF8Vk/dcsv60FgJgcCGgCUJy5j0BUCMxUqGEpqTOOfevg1KpDGOQJElsraX0JKj+C8DnAJCajFRIdaidYFsIaFKbodp7VBAED8VxnL/j8wD+saZyajyozZnmdh7y9Ybl0Q0B6H1vWZVWvUDtCJRDp1pvkOnzataex607uWUQWKe3AWs3uYnnAWtvAMNpQgYDkuoxLoAp5L38GJ4hjPGsRWCtIbBYfgHgiJHQDOAbSqnLtdY8aPIZUomXh3jusCDwfxrHCRcTD44fA/BYzX1TAPDw266USrTWXHgj7TqjaN743NIQgJ6/8imzo3DoNNVpl5e+4M3e//j1J4pBEm9mK/D2W9ye3XRRg7F2K6eO3JtaDX4o7al7PtdJW9bLOaPWgmq+LZVaCf0kgJOHkdBU+/0tF5ID9O8O4vBnuQMmlFLvaq2PB8D6GrI0BqAbWMuhtIfIaTnIoStx2tcbpK/FuxxwfOV4MZSWgyCk+owS7woAy7bTzL/q1Gisl0aT81y9BD5pBSkDr3FnYBuuEEJc4ujKfwO4yElqLgrSIS4c6pfJmb9PCey0HLcD+CsHbi4CGoD2dzSH6r3f2QpjzXbq+uiraQhA73PzqmrkB2EjUo7BgO6N0544TN6yu+79ka4l5aHoxDoAnW4KuN3nABr9rAx9Z14vFwu1Fr8H4AsA/gxAWSkFKSU5NwYZRQh2weta682u0fjCYje3+hDsIesi5WFxRhpyeIL5gW3tyHg+X39An3FnsMcJH4h6g2noiNahlza71MckYdAte6FMvnsPPQz5pAw3SIMsdP/vtpGeT4VCZ5Ii8SwqMWyX1l3G731D7nvQqRsXlYcwrExZAqy/05mOCWgaKChR/4PAc8YTIoXSlCo+GloIOv7MD5QZjlxjSQUI3IOcLpj3HA7gP50U/tqWAML+s495PwnSIAgyM34OWs/zbJqm6z3Pm0rrYA5+PiOlJG/+ldttKL0butQf0EsfKe19WGelS3SgQ3cjCUrQOkQbVWReBG+cLSsjAT7ygbAvReRLVEU50sJUSn7Xm6V58z7x+lFT6TMxVFnhrHcZ53USLruP0tMd9gaAk1dQIzE3q1MIEVlryaUpPWlSz+kGrYsH1JjKh5pPUhAupMwtwC0o+onwXi4iLip+qBqk6o5+JDSrk8qscbr0B933hgZzrRSoX0PPuLO834kLet9JfDHJVJCE7Yi1h9CmqHgavqEadPRlMEBHksAjAdpTgBdZ9PghrKA1s4qZ6t2+YN8pRz1+xFxy0+EKTdKUnh8CQCscAUSJzQ4RUJS0/AwGYf57/pMg5v3UVJBe/FONFXL0AzNB7qy7hP7yw6+c8tia6O4uLRGaClJVhjYSysSIhIUnR+ssNrYZGwnwXmIQGGF7Sr4Q8KBgsHOpiqUH7XLjaXtNG+wxN7ZGFE9ttxGoO6BtUln8xOrkkVRK+KYPGiGUpHtaFQn960TuYzP6PtdK3ZEAO9J1o0IEaYoNogJpbOaX58sEH+zs0EGrv3Xbx+i7UNw5xhFoCEB3RaVHVED/zQjQAXyVQiKC0T6sGrsffX4gGuPYZI9VtECHVOj1qgi0hVUKkZLoEAGkyLxZi9JAI1D3Cem2lcWq6j8iZAwtNWwaQqoUMBXAtA6czsdrzEbi0PSybpEBYvL5GJnqq0dYtEofQatf9/Ebr3HZUeut+4RUbGVu2OO9ok0vUl9C2HZApEjRBw+TIDM7Qf1KpKrZwbRHKLSaAIFUSESK0CQQ5Za6j98YRoY+zYyMoZmdrqF/MoY6GvaRhpiQ7vRla0UHdKUVJV/ApAmgUqRpCzw1vofCEWdGRBCmDCsrsGhBaizSpAdT26ZDKGeZGLGShrqB/hpUz7F825nUG6qB29KYugP6izfvO+vMYy9YXYkBk5YQqBQ6jSB9DUvK0R8lVbdiqWkzJQjVCwg/U9yGqhX77XLcOy89u2znhQtvqfOK2+qhySyOUkphjPlWTeTMVlfUiA/UHdDfvnPe73dMnnbDxmo3pPSgVASdVCGDFNa0u6i/Og4dPR7SMoTXDQOdGUXag11w7EHH3FFK37ps3uxb6RS/IxVaLqkX59pkdM2Xd6TGj9TWugN6xX37fMH4bdd3J+vhBT4gKrDGQHgJkqQMan/rWbSqQiSdEKoCI1KYtIo2fy4+dsCRyyf5uKqz87sEyI5U6N6ae+0VlGN7z9yN9+5zYVW0rujFRkilYGwViioxZRBVfXhBHhi9vd88uvqM6gaiaRBSQ3gCVlfRrubg9IVHL5/lBd9B+7J1DLCura0NWNzT77PM6O8cPKQm5K/065jjDmZznaWQvIr+EgyOpRP/4MI4Pka2kPvSK45mcEaf0L/5e85sPfgZBr/SmYhBs2wfnYvoHUjvP9ZB77xvOGtm/uweAH4bAH/yXbl/Cd1kGUlT6/g/ugF8n++qr/gDcPMD8y+uWnlNRW1kbgEwYUHotQAiQapDCFlfLYf0e6GjqYBMIaUPYyN0eLNw6sHH/GAn4X9LTF5GIA4UCTxtNo8jJJADpZTVWmfjTX+O3PON3nE1nm0EPB3xc1/n36QrZxiGU6lepEMRSxiGmVed84ZjhPaRAJ6racbhYRjeE0XR9EGed7wlz/XB75TQzMUx1flA0zckqz+K3surw7+1tbXpnp6eCzhl7zNGt+p1dQf09+6b+/lETLk5UhuRWA/S0nEhgLF9ULKMVAzkhtiqjm2vm6WMYdNJgFeBtjIDYqe3G0479MhrZ8G7TnRePsChj9gduz32Cl5w76YEpGTkISwVQhCUlHiZ6VMp1S2lJMhjYzKXwjwRDT3a6NBPX2UGqN6vlGrTWlNKUspygbAOJoahpKYTESNMCOq8rPI8b3+XV4OSPE+jwDCq2TX3XQXgMvf760qpOe49HPQ8jQJ3GeYLIVbou3ImgJe21/hu73rqD+gHd70o0m3XRWoTjPThCwmb0oCxAWHQhsgOmy9me4/FkPUJbSBFGTLoRmINklhiir8XTj90yU2zwtK1onRxDmBx9K7Y92evgzk5WAhebu/0VKNzEeP7GGmSOygxcQujqekJR2CRohgp5TpjzKEudItbP1MSUHKvArDafScdYAKZC7PEOlK8a409ytGW03zf/7FLOkPwf91lP+JioKM+nZvybEy1lIP30eOO0SiMVudCID7o5L+S7q6lUklUq1XqsB9+XwZ/DC+pO6BXPLjT+Wk66/tVuYkzAyYaknQBElVYUYIw9eXQWngIdB8iL4CvBRQCSK+Mcw771FVTvckrRencAWl1+Dzs/4tfZYDInOqdo38eqX0cwe18R7S1lmDNpftyIcSldLT3PC9O05S+z7W5MYaaWi6OOzJpLbAGNgPeEw5sx7qFQ47NNAoDuk8hxHprLeMTKSmuHIWWgzsHd4dpLuqbwbZ8b0OWugP6+oc6z9PJ3JuqagNstuumUMKDRgVWhJCbp9B63wdxKEALVcJnPnz2NVOCaStF6ZxcQmPhLtjv8TcySZoDms75uRaE2YweYQecfzRz0+UBAuSyVJ8Z3/d1kiQ8yNXmzaMrKoNXd3WBAwTjzs532RNCvGutZazfU45ekFowgIDR5J8dNGhcYLzGXYNxh7UBApT8PBQe4xZjnrWJu0fuQ10AeksovOah9nNluufKSDYqoAMnoX34WoH/+gF91tVT/I4bRflzA1ErB+6KBU++noFqKAlNjktNQc6hdgfAOEEWGjhogiageeBjtDglPw9r13med4YxJuDBkB9GnPBnkiS5doUSlNz23x0toYM+qc3VQ1gCmR2JwOUJk+nESIVYmO3pS2EYzuGBkO3ge6rVKs8NrIuBCszLQc3JX7/vkmWUL6y7hF5+f+mzIfa+NSLlgAeBFFIEMFnOlRY3L8P3RjA14xaK3cast1oECNM+VP3NAb30w2dcObVivytmfoUAycqCnTD/mTUZh84Bza2dhysWApqptAhoNrpWQg8AOggCE8fxfo5yXCSEWG6t5UAwZQIjYZi1iBKW93AR8Bo59m85ysH7GNPIe5jA5tRBw8Mdg9d4mCTgL3WHTyaPIdDZdgYSMGSMHJyS+aaagyE5PVMuNGSpO6C/drf65ORwvx/VAlpZH1rykD8yoEdMfke1yTYUg/ckdKAVhGAIS4CzDzx5WbBh47VT91pBQ0VW9p+NfZ5ajWdrAE2LXJ6tiBoLApqF404ddM6hCWhqG0QQBHEcxwc7NRwPX+TD7MRgcDLfHCXlZClljzGGNIEcmvz24+4ZgpdSvnYQSDmoh2ZhVDo/5NLMf8fFxjq4+GpN+tTUdPi+L5MkYV4Oxkw2ZKk7oC+9HSfNmHzgfZEgLvolNAGdogKBEsQIeczHm2IbSUBXEHkKtYA+ZbdDzo/jnlsXLLirXzlMa8R07Pny2kxtl0toqtfyLEfUQpBysPA6KUceNU4uS0BLqWTFaEN9MA+F1EfzMMl38LDJ79y6SCkWAbjBcWqq5cixCUbWy/S5BC3nl0lhvgqAA8znqHXJD4WU0NSW8P1fdBKEmhTSF6oCKcnJ1Zlrb67z/yAnJzdvyFJ3QF+yEounzdrjXuOZNiMklDUZoA0PhaOR0OM8rAR0Ka2g4m8O6MPC9jOPPvrnd9W+fq+ZmPfi2xn3zQHNLSa3DFHq/azmfup387wePBQSWFIIUbHWUr1Ggw0zkdKQQX0zgUx1GhfMnCAIDozjmLmG+S7WQyrwS1c/VXDkxJnO2/f9dZ7nMX+0TtOUf6PWg9KYacUITu4WPMzyGtVKPAf0Z0uScm9tDNtqfc9PkzQhoAsOPRzu/nAFFnbMmXpH0Nq+h+GRq8EADRHAT/tQ8T2Epp9yWGGrByf69CUffXEzU/DcnTD31TUZEHNAE4j51s1gWQa65kKEBg5GVbMsdwnF8/zPjLwmF+bzNG0TRKmUMshzZdTmzfA87600TZl5n6BkoWRlZPiAmdulKuC789QJzE/HmMhcL0quzYhySnYCnm3JdxOaDQMpJdOTMZPSj8ZZjoy5+rpL6Auvxu7lDu+scmvHh1pavJJIvBZqowNPaCWDGUJ4VgqlRP/HE9LzhOBHZuzYGmuMtcZa99MY/q6N1pqXjNH8MAl/Yq1OraUKWGdJ/C2MZS39/k8pNwh4nlTK83zP830pPV+oUiil0NIksY66U5Okfe1WPD0D8vaTPr42pxADE+ADH0z6QctDAPl0baHBJPPfc/Qgv0aeS4f7PBKc1KG28LDGXBykDDyEko7QCEI9J308qOajhXGwBY8LgvSFfh08KJJTU8rnPH8wcNg2pgbbx3F/qg75Ibh5CGX7uShrd5oxg288Hqw7oAc6Zfsl17IroFav7v/uzUa49plRZdrMqrnrrs2dhGoGLM9JMeIYLlsGOZ//EZErvb3w42mQ5S4IJqoLShDtXYgWnjfq/7tkxHcWN2y/EWgcQG+/PhU1TeARKAA9gSe/GbteALoZZ3UC96kA9ASe/GbsegHoZpzVCdynAtATePKbsesFoJtxVidwnwpAT+DJb8auF4BuxlmdwH0qAD2BJ78Zu14AuhlndQL3qQD0BJ78Zuz6/wEF/bqw6Uo+8AAAAABJRU5ErkJggg==\"","module.exports = \"data:image/jpeg;base64,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\"","import React, { useEffect, useState } from 'react';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n// Phone Input\r\nimport { getCountryCallingCode } from 'react-phone-number-input';\r\n// Place Holder Image\r\nimport PH from '../../static/images/icon.png'\r\nimport LogoD from '../../static/images/logo-d.png'\r\n\r\n\r\n\r\nconst Navbar = () => {\r\n\r\n  // User\r\n  const userData = localStorage.maidan_user\r\n  const User = userData ? {...JSON.parse(userData)} : {};\r\n\r\n  // Basic Data\r\n  const [basic, setBasicData] = useState([]);\r\n\r\n  const [regState, setRegState] = useState({\r\n    email: '',\r\n    username: '',\r\n    password: '',\r\n    pre_phone: null,\r\n    country: ''\r\n  });\r\n  const [registerModal, setRegister] = useState(false);\r\n  const [regErrors, setRegErrors] = useState({});\r\n  const [successReg, setSuccessReg] = useState(false);\r\n  \r\n  const [logState, setLogState] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n  const [loginModal, setLogin] = useState(false);\r\n  const [logErrors, setLogErrors] = useState({});\r\n  \r\n  const [logoutModal, setLogout] = useState(false);\r\n  const [logoutErrors, setLogoutErrors] = useState({});\r\n\r\n  const [resetPasswModal, setResetPassw] = useState(false);\r\n  const [resetPasswState, setResetPasswState] = useState({\r\n    email: null,\r\n    submitted: false,\r\n    token: null,\r\n    password: null,\r\n    confirm_password: null\r\n  })\r\n  const [resetPasswErrors, setResetPasswErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    let basicData = JSON.parse(localStorage.maidan_elements);\r\n    setBasicData(basicData);\r\n  }, [])\r\n\r\n  /* Login */\r\n  const resetLogin = () => {\r\n\r\n    setLogErrors({});\r\n    setLogState({\r\n      email: '',\r\n      password: ''\r\n    });\r\n    setLogin(false);\r\n  }\r\n\r\n  const handleLogChange = (e) => {\r\n    e.preventDefault()\r\n    setLogErrors({});\r\n    setLogState({\r\n      ...logState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const handleLogSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const Login = async() => {\r\n      await fetch('/api/login', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({...logState, logged: localStorage.logged})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            localStorage.setItem('logged', true);\r\n            localStorage.setItem('maidan_jwt_$m3', data.jwt);\r\n            localStorage.setItem('maidan_user_access', data.access_level);\r\n            localStorage.setItem('maidan_user', JSON.stringify(data.user));\r\n            if (data.profile_img){\r\n              localStorage.setItem('profile_img', data.profile_img);\r\n            }\r\n            setLogErrors({});\r\n            setLogState({});\r\n            setLogin(false);\r\n            // Reload Page\r\n            window.location.reload();\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setLogErrors({\r\n                serverError: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ ما أثناء محاولة التسجيل, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })  \r\n            }\r\n            if (data.code === 'LOGGED_IN'){\r\n              setLogErrors({\r\n                serverError: {\r\n                  name: 'خطأ',\r\n                  error: 'يبدو بأنك قد سجلت دخولك بالفعل, الرجاء إغلاق الصفحة وإعادة فتحها لحل المشكلة.',\r\n                  type: 'danger'\r\n                }\r\n              })  \r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setLogErrors({\r\n                requestError: {\r\n                  name: 'طلب غير صحيح',\r\n                  error: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء إرسال طلب آخر.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_ACTIVE'){\r\n              setLogErrors({\r\n                notActiveAccount: {\r\n                  name: 'الحساب',\r\n                  error: 'لم يتم تفعيل حسابك, لإعادة إرسال رابط التفعيل',\r\n                  link: {\r\n                    text: 'إضغط هنا',\r\n                    id: 'ACTIVE_LINK'\r\n                  },\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              setLogErrors({\r\n                notActiveAccount: {\r\n                  name: 'الحساب',\r\n                  error: 'تم إيقاف حسابك, الرجاء التواصل مع الإدارة لمعرفة الأسباب.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_EMAIL'){\r\n              setLogErrors({\r\n                email: {\r\n                  name: 'البريد الإلكتروني',\r\n                  error: 'البريد الإلكتروني غير مسجل, لتسجيل مستخدم جديد',\r\n                  link: {\r\n                    text: 'إضغط هنا',\r\n                    id: 'REGISTER'\r\n                  },\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'WRONG_PASSW'){\r\n              setLogErrors({\r\n                password: {\r\n                  name: 'كلمة المرور',\r\n                  error: 'كلمة المرور غير صحيحة, الرجاء إدخال كلمة المرور من جديد.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    Login();\r\n  }\r\n  /* END Login */ \r\n\r\n  /* Register */\r\n  const resetRegister = () => {\r\n\r\n    setRegErrors({});\r\n    setRegState({\r\n      email: '',\r\n      username: '',\r\n      password: '',\r\n      country: '',\r\n      pre_phone: null\r\n    });\r\n    setRegister(false);\r\n  }\r\n\r\n  const handleRegChange = (e) => {\r\n    e.preventDefault()\r\n\r\n    // Reset Register Errors\r\n    setRegErrors({});\r\n\r\n    if (e.target.id === 'pre_phone'){\r\n      setRegState({\r\n        ...regState,\r\n        [e.target.id]: e.target.name,\r\n        country: e.target.title\r\n      });\r\n\r\n      document.getElementById('pre_phone_selector').innerText = e.target.name;\r\n\r\n    } else {\r\n      setRegState({\r\n        ...regState,\r\n        [e.target.id]: e.target.value\r\n      })\r\n    }\r\n    \r\n  }\r\n\r\n  const handleRegSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    const Register = async() => {\r\n      await fetch('/api/register', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({...regState, hostname: window.location.origin, logged: localStorage.logged})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setRegErrors({});\r\n            setRegister(false);\r\n            setRegState({\r\n              email: '',\r\n              username: '',\r\n              password: '',\r\n              country: '',\r\n              pre_phone: null\r\n            });\r\n            setSuccessReg(true);\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setRegErrors({\r\n                serverError: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ ما أثناء محاولة التسجيل, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })  \r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setRegErrors({\r\n                requestError: {\r\n                  name: 'طلب غير صحيح',\r\n                  error: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء إرسال طلب آخر.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'EMAIL_EXIST'){\r\n              setRegErrors({\r\n                email: {\r\n                  name: 'البريد الإلكتروني',\r\n                  error: 'البريد الإلكتروني مسجل مسبقاً, الرجاء إدخال بريد إلكتروني آخر',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'USERNAME_EXIST'){\r\n              setRegErrors({\r\n                username: {\r\n                  name: 'إسم المستخدم',\r\n                  error: 'إسم المستخدم مسجل مسبقاً, الرجاء إدخال إسم مستخدم آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_USERNAME'){\r\n              setRegErrors({\r\n                username: {\r\n                  name: 'إسم المستخدم',\r\n                  error: 'الحروف المسموحة لإسم المستخدم : الإرقام, الحروف الإنجليزية و (_).',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'PHONE_EXIST'){\r\n              setRegErrors({\r\n                phone: {\r\n                  name: 'رقم الجوال',\r\n                  error: 'رقم الجوال مسجل مسبقاً, الرجاء إدخال رقم جوال آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    // Register();\r\n\r\n    // Validate Password\r\n    if (regState.password.length < 8){\r\n      setRegErrors({\r\n        ...regErrors,\r\n        password: {\r\n          name: 'كلمة المرور',\r\n          error: 'يجب أن تتكون كلمة المرور من 8 حروف على الأقل.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } \r\n    else if (regState.password !== regState.confirm_password) {\r\n      setRegErrors({\r\n        ...regErrors,\r\n        password: {\r\n          name: 'كلمة المرور',\r\n          error: \"خانة 'كلمة المرور' لا تتطابق مع خانة 'تأكيد كلمة المرور'.\",\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } \r\n    else if (!regState.pre_phone) {\r\n      setRegErrors({\r\n        ...regErrors,\r\n        pre_phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'خانة الدولة غير محددة, الرجاء إختيار الدولة.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else if (regState.phone[0] !== \"5\" || regState.phone.length !== 9){\r\n      setRegErrors({\r\n        ...regErrors,\r\n        phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'رقم الجوال يجب أن يبدأ بـ 5 ويجب أن يتكون من 9 أرقام.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      Register();\r\n    }\r\n  }\r\n  /* END Register */\r\n\r\n  /* Logout */\r\n  const handleLogout = (e) => {\r\n    e.preventDefault();\r\n\r\n    const Logout = async() => {\r\n      await fetch('/api/logout', {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(_ => {\r\n          setLogout(false);\r\n          setLogoutErrors({});\r\n          localStorage.removeItem('maidan_jwt_$m3');\r\n          localStorage.removeItem('maidan_user');\r\n          localStorage.removeItem('logged');\r\n          localStorage.removeItem('maidan_user_access');\r\n          localStorage.removeItem('profile_img');\r\n          sessionStorage.clear();\r\n          window.location.href = window.location.origin\r\n        })\r\n      })\r\n    }\r\n\r\n    Logout();\r\n  }\r\n\r\n  /* END Logout */\r\n\r\n  /* Reset Password */\r\n\r\n  const resetPasswReset = () => {\r\n\r\n    // Reset Password Reset State\r\n    setResetPassw(false);\r\n    setResetPasswState({\r\n      email: null,\r\n      submitted: false,\r\n      password: null,\r\n      token: null,\r\n      confirm_password: null\r\n    });\r\n    setResetPasswErrors({});\r\n  }\r\n\r\n  const handleResetPasswCall = (e) => {\r\n    e.preventDefault();\r\n    // Set Modal State\r\n    setResetPassw(true);\r\n\r\n    // Reset Login Modal & State\r\n    resetLogin();\r\n  }\r\n\r\n  const sendResetEmail = (e) => {\r\n    e.preventDefault()\r\n\r\n    const sendResetPasswEmail = async() => {\r\n      await fetch(`/api/user/${resetPasswState.email}/sendResetToken`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setResetPasswState({\r\n              ...resetPasswState,\r\n              submitted: true\r\n            })\r\n            setResetPasswErrors({});\r\n          } else {\r\n            if (data.code === 'NO_EMAIL'){\r\n              setResetPasswErrors({\r\n                email: {\r\n                  name: \"البريد الإلكتروني\",\r\n                  error: \"الرجاء إدخال البريد الإلكتروني.\",\r\n                  type: \"warning\"\r\n                }\r\n              })\r\n\r\n            }\r\n            if (data.code === 'INVALID_EMAIL'){\r\n              setResetPasswErrors({\r\n                email: {\r\n                  name: \"البريد الإلكتروني\",\r\n                  error: \"البريد الإلكتروني غير مسجل, الرجاء تسجيل مستخدم جديد.\",\r\n                  type: \"warning\"\r\n                }\r\n              })\r\n              \r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setResetPasswErrors({\r\n                email: {\r\n                  name: \"خطأ\",\r\n                  error: \"حدث خطأ أثناء محاولة إرسال رمز إعادة التعيين.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n              \r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    sendResetPasswEmail();\r\n  }\r\n\r\n  const handleResetPasswChange = (e) => {\r\n    e.preventDefault();\r\n    // Set Reset State\r\n    setResetPasswState({\r\n      ...resetPasswState,\r\n      [e.target.id]: e.target.value\r\n    });\r\n    // Reset Errors State\r\n    setResetPasswErrors({});\r\n  }\r\n\r\n  const handleResetPasswSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const ResetPassword = async() => {\r\n      await fetch('/api/user/resetPassword', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify(resetPasswState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            resetPasswReset();\r\n            setLogErrors({\r\n              successReset: {\r\n                name: 'كلمة المرور',\r\n                error: 'تم تغيير كلمة المرور بنجاح!',\r\n                type: 'success'\r\n              }\r\n            });\r\n            setLogin(true);\r\n\r\n          } else {\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setResetPasswErrors({\r\n                Request: {\r\n                  name: \"خطأ\",\r\n                  error: \"الرجاء إدخال البيانات أولاً\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setResetPasswErrors({\r\n                Values: {\r\n                  name: \"خطأ\",\r\n                  error: \"بعض الخانات غير مدخلة, الرجاء إدخال جميع البيانات.\",\r\n                  type: \"warning\"\r\n                }\r\n              })\r\n              \r\n            }\r\n            if (data.code === 'NO_USER'){\r\n              setResetPasswErrors({\r\n                email: {\r\n                  name: \"البريد الإلكتروني\",\r\n                  error: \"البريد الإلكتروني غير مسجل أو قد تم حذفه, الرجاء تسجيل مستخدم جديد.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n              \r\n            }\r\n            if (data.code === 'INVALID_TOKEN'){\r\n              setResetPasswErrors({\r\n                token: {\r\n                  name: \"رمز إعادة التعيين\",\r\n                  error: \"رمز إعادة التعيين غير صحيح, الرجاء إدخال الرمز بشكل صحيح.\",\r\n                  type: \"warning\"\r\n                }\r\n              })\r\n              \r\n            }\r\n            if (data.code === 'EXPIRED_TOKEN'){\r\n              setResetPasswErrors({\r\n                token: {\r\n                  name: \"رمز إعادة التعيين\",\r\n                  error: \"لقد إنتهت صلاحية رمز إعادة التعيين, الرجاء المحاولة من جديد.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'USED_TOKEN'){\r\n              setResetPasswErrors({\r\n                token: {\r\n                  name: \"رمز إعادة التعيين\",\r\n                  error: \"لقد تم إستخدام هذا الرمز بالفعل, الرجاء إعادة المحاولة.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setResetPasswErrors({\r\n                error: {\r\n                  name: \"خطأ\",\r\n                  error: \"حدث خطأ ما, الرجاء المحاولة من جديد لاحقاً.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n              \r\n            }\r\n          }\r\n        })\r\n      })\r\n\r\n    }\r\n\r\n    if (resetPasswState.password.length < 8){\r\n      setResetPasswErrors({\r\n        ...resetPasswErrors,\r\n        password: {\r\n          name: 'كلمة المرور',\r\n          error: 'يجب أن تتكون كلمة المرور من 8 حروف على الأقل.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } \r\n    else if (resetPasswState.password !== resetPasswState.confirm_password) {\r\n      setResetPasswErrors({\r\n        ...resetPasswErrors,\r\n        password: {\r\n          name: 'كلمة المرور',\r\n          error: \"خانة 'كلمة المرور' لا تتطابق مع خانة 'تأكيد كلمة المرور'.\",\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } else {\r\n      ResetPassword();\r\n    }\r\n  }\r\n\r\n  /* END Reset Password */\r\n\r\n  const handleErrorEvent = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SendActivationLink = async() => {\r\n      await fetch('/api/activation', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({email: logState.email, hostname: window.location.origin})\r\n      }).then(resp => {\r\n        if (resp.ok){\r\n          setLogErrors({\r\n            ActivationLink: {\r\n              name: 'رمز التفعيل',\r\n              error: 'تم إرسال رمز تفعيل جديد',\r\n              type: 'success'\r\n            }\r\n          });\r\n        }\r\n      })\r\n    }\r\n\r\n    if (e.target.id === 'ACTIVE_LINK'){\r\n      SendActivationLink();\r\n    }\r\n    if (e.target.id === 'REGISTER'){\r\n      setLogErrors({});\r\n      setLogin(false);\r\n      setRegister(true);\r\n    }\r\n  }\r\n\r\n  const loadRegErrors = () => {\r\n    if (Object.keys(regErrors).length !== 0 && regErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {regErrors ? Object.entries(regErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadLogErrors = () => {\r\n    if (Object.keys(logErrors).length !== 0 && logErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {logErrors ? Object.entries(logErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error} {e[1].link ? (<Link className=\"text-primary\" to=\"#\" id={e[1].link.id} onClick={handleErrorEvent}>{e[1].link.text}</Link>) : null}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadResetPasswErrors = () => {\r\n    if (Object.keys(resetPasswErrors).length !== 0 && resetPasswErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {resetPasswErrors ? Object.entries(resetPasswErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error} {e[1].link ? (<Link to=\"#\" id={e[1].link.id} onClick={handleErrorEvent}>{e[1].link.text}</Link>) : null}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadLogoutErrors = () => {\r\n    if (Object.keys(logoutErrors).length !== 0 && logoutErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {logoutErrors ? Object.entries(logoutErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  // Current Date\r\n  const DateDisplay = () => {\r\n    var date = new Date();\r\n    var days = [\"اﻷحد\", \"اﻷثنين\", \"الثلاثاء\", \"اﻷربعاء\", \"الخميس\", \"الجمعة\", \"السبت\"];\r\n    var delDateString = days[date.getDay()] + ', ' + date.getDate() + '-' + (date.getMonth() + 1) + '-' + date.getFullYear();\r\n\r\n    return delDateString;\r\n  }\r\n\r\n  const caretDown = () => {\r\n    // Pre-Phone Selector\r\n    var toggler = document.getElementById(\"pre_phone_selector\");\r\n    toggler && toggler.addEventListener(\"click\", function() {\r\n      this.classList.toggle(\"selector-down\");\r\n    });\r\n  }\r\n\r\n  const LoggedOutLinksDesktop = (\r\n    <ul className=\"navbar-nav mobile-lg-h ml-5\">\r\n\r\n      <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n        <Link to=\"#\" onClick={() => setRegister(true)} className=\"nav-link qsemh-turq\" >\r\n          <i title=\"جديد\" className=\"fa fa-user-plus fa-lg\"/>\r\n        </Link>\r\n      </li>\r\n\r\n      <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n        <Link to=\"#\" onClick={() => setLogin(true)} className=\"nav-link qsemh-turq\" >\r\n          <i title=\"دخول\" className=\"fa fa-sign-in-alt fa-lg\"/>\r\n        </Link>\r\n      </li>\r\n\r\n    </ul>\r\n  )\r\n\r\n  const LoggedInLinksDesktop = (\r\n    <ul className=\"mobile-lg-h navbar-nav ml-2\">\r\n\r\n      <li className=\"nav-item dropdown\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n        <Link to=\"#\" className=\"nav-link text-info\" id=\"dropdown1\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n          <img title={User.username} src={localStorage.profile_img ? (`https://s3.us-east-2.amazonaws.com/maidancom/${localStorage.profile_img}`) : PH} alt=\"PI\" width=\"36\" height=\"36\" className=\"rounded-circle\"/>\r\n        </Link>\r\n        <div className=\"dropdown-menu text-right no-shadow\" aria-labelledby=\"dropdown1\">\r\n          <Link className=\"dropdown-item\" to=\"/user/profile\">\r\n            <i className=\"fa fa-user fa-s\"/>  الحساب\r\n          </Link>\r\n          {\r\n            User.is_provider ? (\r\n              <Link className=\"dropdown-item\" to=\"/providers/panel\">\r\n                <i className=\"fa fa-tools fa-s\"/> لوحة التحكم\r\n              </Link>\r\n            ) : null\r\n          }\r\n          {\r\n            User.is_associate ? (\r\n              <Link className=\"dropdown-item\" to=\"/admin/redeem\">\r\n                <i className=\"fa fa-tools fa-s\"/> مطابقة القسائم\r\n              </Link>\r\n            ) : null\r\n          }\r\n          {\r\n            User.is_admin ? (\r\n              <Link className=\"dropdown-item\" to=\"/admins/panel\">\r\n                <i className=\"fa fa-tools fa-s\"/> لوحة التحكم\r\n              </Link>\r\n            ) : null\r\n          }\r\n          {\r\n            User.is_super ? (\r\n              <Link className=\"dropdown-item\" to=\"/admin/panel\">\r\n                <i className=\"fa fa-tools fa-s\"/> لوحة التحكم\r\n              </Link>\r\n            ) : null\r\n          }\r\n          {\r\n            User.is_super ? (\r\n              <Link className=\"dropdown-item\" to=\"/admin/histories\">\r\n                <i className=\"fa fa-history fa-s\"/> السجلات\r\n              </Link>\r\n            ) : null\r\n          }\r\n          <div className=\"dropdown-divider\"/>\r\n          <Link className=\"dropdown-item\" to=\"/user/coupons\">\r\n            <i className=\"fa fa-wallet fa-s\"/> قسائمي\r\n          </Link>\r\n          <Link className=\"dropdown-item\" to=\"/user/tickets\">\r\n            <i className=\"fa fa-ticket-alt fa-s\"/> التذاكر\r\n          </Link>\r\n          <Link className=\"dropdown-item\" to=\"/balance\">\r\n            <i className=\"fa fa-dollar-sign fa-s\"/> الرصيد\r\n          </Link>\r\n          <div className=\"dropdown-divider\"/>\r\n          <Link className=\"dropdown-item\" to=\"#\" onClick={() => {setLogout(true)}}>\r\n            <i className=\"fa fa-sign-out-alt fa-s\"/> تسجيل الخروج\r\n          </Link>\r\n        </div>\r\n      </li>\r\n\r\n    </ul>\r\n  )\r\n\r\n  const LoggedInLinksSideNav = (\r\n    <li>\r\n      <a className=\"nav-a qsemh-turq font-weight-bold\" href=\"#accountMenu\" data-toggle=\"collapse\" aria-expanded=\"false\">\r\n        {User.username}\r\n        <i className=\"left fa fa-arrow-down fa-xs\"></i>\r\n      </a>\r\n      <ul className=\"collapse list-unstyled\" id=\"accountMenu\">\r\n        <li className=\"qsemh-turq font-weight-light\">\r\n          <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/user/profile\">\r\n            <i className=\"fa fa-user fa-s\"/>  الحساب\r\n          </Link>\r\n        </li>\r\n        <li className=\"qsemh-turq font-weight-light\">\r\n          <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/user/notifications\">\r\n            <i className=\"fa fa-bell fa-s\"/>  التنبيهات\r\n            {parseInt(localStorage.notifs) > 0 ? (\r\n              <i title={parseInt(localStorage.notifs)} className=\"fa fa-circle text-danger float-left\"/>\r\n            ) : null}\r\n          </Link>\r\n        </li>\r\n        {\r\n          User.is_provider ? (\r\n            <li className=\"qsemh-turq font-weight-light\">\r\n              <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/providers/panel\">\r\n                <i className=\"fa fa-tools fa-s\"/> لوحة التحكم\r\n              </Link>\r\n            </li>\r\n          ) : null\r\n        }\r\n        {\r\n          User.is_associate ? (\r\n            <li className=\"qsemh-turq font-weight-light\">\r\n              <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/admin/redeem\">\r\n                <i className=\"fa fa-tools fa-s\"/> مطابقة القسائم\r\n              </Link>\r\n            </li>\r\n          ) : null\r\n        }\r\n        {\r\n          User.is_admin ? (\r\n            <li className=\"qsemh-turq font-weight-light\">\r\n              <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/admins/panel\">\r\n                <i className=\"fa fa-tools fa-s\"/> لوحة التحكم\r\n              </Link>\r\n            </li>\r\n          ) : null\r\n        }\r\n        {\r\n          User.is_super ? (\r\n            <li className=\"qsemh-turq font-weight-light\">\r\n              <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/admin/panel\">\r\n                <i className=\"fa fa-tools fa-s\"/> لوحة التحكم\r\n              </Link>\r\n            </li>\r\n          ) : null\r\n        }\r\n        {\r\n          User.is_super ? (\r\n            <li className=\"qsemh-turq font-weight-light\">\r\n              <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/admin/histories\">\r\n                <i className=\"fa fa-history fa-s\"/> السجلات\r\n              </Link>\r\n            </li>\r\n          ) : null\r\n        }\r\n        <div className=\"dropdown-divider\"/>\r\n        <li className=\"qsemh-turq font-weight-light\">\r\n          <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/user/coupons\">\r\n            <i className=\"fa fa-wallet fa-s\"/> قسائمي\r\n          </Link>\r\n        </li>\r\n        <li className=\"qsemh-turq font-weight-light\">\r\n          <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/user/tickets\">\r\n            <i className=\"fa fa-ticket-alt fa-s\"/> التذاكر\r\n          </Link>\r\n        </li>\r\n        <li className=\"qsemh-turq font-weight-light\">\r\n          <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"/balance\">\r\n            <i className=\"fa fa-dollar-sign fa-s\"/> الرصيد\r\n          </Link>\r\n        </li>\r\n        <div className=\"dropdown-divider\"/>\r\n        <li className=\"qsemh-turq font-weight-light\">\r\n          <Link name=\"SideLink\" className=\"nav-a dropdown-item\" to=\"#\" onClick={() => {setLogout(true)}}>\r\n            <i className=\"fa fa-sign-out-alt fa-s\"/> تسجيل الخروج\r\n          </Link>\r\n        </li>\r\n        \r\n      </ul>\r\n    </li>\r\n  )\r\n\r\n  const LoggedOutLinksSideNav = (\r\n    <ul className=\"list-unstyled CTAs\">\r\n      <li>\r\n        <Link name=\"SideLink\" className=\"btn btn-sm btn-outline-orange\" to=\"#\" onClick={() => setLogin(true)}>\r\n          <i className=\"fa fa-sign-in-alt fa-lg\"/> دخول\r\n        </Link>\r\n      </li>\r\n      <li>\r\n        <Link name=\"SideLink\" className=\"btn btn-sm btn-outline-turq\" to=\"#\" onClick={() => setRegister(true)}>\r\n          <i className=\"fa fa-user-plus fa-lg\"/> جديد\r\n        </Link>\r\n      </li>\r\n    </ul>\r\n  )\r\n  \r\n  return (\r\n    <div className=\"wrapper fixed-top\">\r\n      \r\n      {/* Sidebar */}\r\n      <nav id=\"sidebar\">\r\n\r\n        <div className=\"sidebar-header text-center\">\r\n          <Link name=\"SideLink\" to=\"/\">\r\n            <img className=\"navbar-brand-side\" src={LogoD} alt=\"brand\"/>\r\n          </Link>\r\n        </div>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"text-center\">\r\n          <b className=\"font-weight-bold\">{DateDisplay()}</b>\r\n        </div>\r\n        \r\n        <hr/>\r\n\r\n        <ul className=\"text-right list-unstyled components\">\r\n          <li className=\"qsemh-orange\">\r\n            <Link className=\"nav-a\" name=\"SideLink\" to=\"/\">الرئيسية</Link>\r\n          </li>\r\n          <li className=\"qsemh-turq\">\r\n            <Link className=\"nav-a\" name=\"SideLink\" to=\"/ads\">كل القسائم</Link>\r\n          </li>\r\n          <li className=\"qsemh-turq\">\r\n            <Link className=\"nav-a\" name=\"SideLink\" to=\"/coupons/offers\">قسائم للبيع</Link>\r\n          </li>\r\n          <li className=\"qsemh-turq\">\r\n            <Link className=\"nav-a\" name=\"SideLink\" to=\"/terms\">الشروط والأحكام</Link>\r\n          </li>\r\n          {localStorage.maidan_jwt_$m3 ? LoggedInLinksSideNav : null}\r\n        </ul>\r\n\r\n        {localStorage.maidan_jwt_$m3 ? null : LoggedOutLinksSideNav}\r\n\r\n      </nav>\r\n      {/* Sidebar */}\r\n\r\n      {/* Navbar Content */}\r\n      <div id=\"content\">\r\n\r\n        <nav className=\"navbar shadow navbar-expand-lg rounded navbar-light\">\r\n          \r\n          <div className=\"container-fluid\">\r\n\r\n            <div className=\"float-right\">\r\n              <button type=\"button\" id=\"sidebarCollapse\" className=\"btn btn-link\">\r\n                <i className=\"fas fa-align-justify fa-2x\"></i>\r\n              </button>\r\n              <Link className=\"mobile-h\" to=\"/\">\r\n                <img className=\"navbar-brand ml-auto\" src={LogoD} alt=\"brand\"/>\r\n              </Link>\r\n              <Link className=\"desktop-h\" to=\"/\">\r\n                <img className=\"navbar-brand\" src={LogoD} alt=\"brand\"/>\r\n              </Link>\r\n            </div>\r\n            {/* {localStorage.maidan_jwt_$m3 ? LoggedInLinksMobile : LoggedOutLinksMobile} */}\r\n\r\n            <div className=\"collapse navbar-collapse text-right\" id=\"navbarSupportedContent\">\r\n\r\n              <ul className=\"mobile-lg-h navbar-nav ml-md-auto mr-md-4\">\r\n                <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n                  <Link to=\"/ads\" className=\"nav-link qsemh-turq nav-text\">كل القسائم</Link>\r\n                </li>\r\n\r\n                <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n                  <Link to=\"/coupons/offers\" className=\"nav-link qsemh-turq nav-text\">قسائم للبيع</Link>\r\n                </li>\r\n\r\n                <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n                  <Link to=\"/terms\" className=\"nav-link nav-text qsemh-turq\">الشروط والأحكام</Link>\r\n                </li>\r\n              </ul>\r\n\r\n              <ul className=\"mobile-lg-h navbar-nav mr-md-2\">\r\n                <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n                  <b className=\"nav-text\">{DateDisplay()}</b>\r\n                </li>\r\n              </ul>\r\n\r\n              {\r\n                Object.keys(User).length !== 0 && User.constructor === Object ? (\r\n                  <ul className=\"mobile-lg-h navbar-nav\">\r\n                    <li className=\"nav-item\" data-toggle=\"collapse\" data-target=\".navbar-collapse.show\">\r\n                      <Link to=\"/user/notifications\" className=\"nav-link nav-text qsemh-turq\">\r\n                        <i title={`التنبيهات (${parseInt(localStorage.notifs)})`} className=\"far fa-bell fa-lg\"/>\r\n                        {parseInt(localStorage.notifs) > 0 ? (\r\n                          <span title={parseInt(localStorage.notifs)} className=\"fa fa-circle text-danger\"/>\r\n                        ) : null}\r\n                      </Link>\r\n                    </li>\r\n                  </ul>\r\n                ) : null\r\n              }\r\n\r\n              {localStorage.maidan_jwt_$m3 ? LoggedInLinksDesktop : LoggedOutLinksDesktop}\r\n            \r\n            </div>\r\n\r\n          </div>\r\n\r\n        </nav>\r\n      \r\n      </div>\r\n      {/* Navbar Content */}\r\n\r\n      {/* Overlay */}\r\n      <div className=\"overlay-nav\"></div>\r\n      {/* Overlay */}\r\n\r\n            \r\n      {/* Register Modal */}\r\n      <Modal show={registerModal} onHide={resetRegister}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>تسجيل مستخدم جديد</Modal.Title>\r\n          <Link to=\"#\" onClick={resetRegister}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body>\r\n          <form onSubmit={handleRegSubmit}>\r\n            \r\n            <p className=\"text-muted font-info text-right\">\r\n              <i className=\"fa fa-star-of-life fa-xs\"/> جميع البيانات التالية ضرورية للتسجيل.\r\n            </p>\r\n            \r\n            <div className=\"mt-2\">\r\n              {loadRegErrors()}\r\n            </div>\r\n            \r\n            <div className=\"row\">\r\n\r\n              <div className=\"col-sm-12 text-right\">\r\n                <label htmlFor=\"email\" className=\"ml-sm-4 font-weight-bold\">البريد الإلكتروني : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleRegChange} dir='ltr' required id=\"email\" type=\"email\" placeholder=\"example@gmail.com\" className={\"form-control col-sm-8 \" + (regErrors.email ? \"is-invalid\" : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"username\" className=\"ml-sm-4 font-weight-bold\">إسم المستخدم : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleRegChange} required id=\"username\" type=\"text\" placeholder=\"إسم المستخدم\" className={\"form-control col-sm-8 \" + (regErrors.username ? \"is-invalid\" : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"phone\" className=\"ml-sm-4 font-weight-bold\">رقم الجوال : </label>\r\n                <div className=\"input-group\">\r\n\r\n                  <input onChange={handleRegChange} dir='ltr' required id=\"phone\" type=\"text\" placeholder=\"5xxxxxxxx\" className={\"form-control col-sm-6 \" + (regErrors.phone ? \"is-invalid\" : '')}/>\r\n                  \r\n                  <div className=\"btn-group\">\r\n                    <Link onClick={caretDown} dir='ltr' id=\"pre_phone_selector\" className={\"form-control btn-white selector\" + (regErrors.pre_phone ? 'is-invalid' : '')} data-toggle=\"dropdown\" to=\"#\">الدولة</Link>\r\n                    <ul className=\"dropdown-menu font-weight-bold\">\r\n                      {\r\n                        basic.map((data, index) => {\r\n                          if (data.key === 'country'){\r\n                            return(\r\n                              <li key={index}>\r\n                                <Link to=\"#\" className=\"text-dark ml-2\" id=\"pre_phone\" name={`+${data.values.telecode}`} title={data.values.country.ar} onClick={handleRegChange}>\r\n                                  {getCountryCallingCode(data.label)}+ <img src={`http://catamphetamine.gitlab.io/country-flag-icons/3x2/${data.label}.svg`} width=\"24\" alt={data.label}/>\r\n                                </Link>\r\n                              </li>\r\n                            )\r\n                          }\r\n                        })\r\n                      }\r\n                    </ul>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"password\" className=\"ml-sm-4 font-weight-bold\">كلمة المرور : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleRegChange} required id=\"password\" type=\"password\" placeholder=\"كلمة المرور\" className={\"form-control col-sm-8 \" + (regErrors.password ? \"is-invalid\" : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"confirm_password\" className=\"ml-sm-4 font-weight-bold\">تأكيد كلمة المرور : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleRegChange} required id=\"confirm_password\" type=\"password\" placeholder=\"تأكيد كلمة المرور\" className={\"form-control col-sm-8 \" + (regErrors.password ? \"is-invalid\" : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 form-check mt-4 text-right\">\r\n                <input required type=\"checkbox\" className=\"form-check-input\"/>\r\n                <label htmlFor=\"confirm\" className=\"form-check-label font-weight-bold mr-4\">\r\n                  أوافق على <Link to=\"#\" className=\"text-primary\" onClick={() => window.open(\"/terms\")}>الشروط الأحكام</Link> \r\n                </label>\r\n              </div>\r\n            \r\n            </div>\r\n\r\n            <Modal.Footer className=\"mt-4\">\r\n              <Button variant=\"grey\" onClick={resetRegister}>\r\n                إلغاء\r\n              </Button>\r\n              <Button variant=\"turq\" type=\"submit\">\r\n                تسجيل\r\n              </Button>\r\n            </Modal.Footer>\r\n             \r\n          </form>\r\n        </Modal.Body>   \r\n        \r\n      </Modal>\r\n    \r\n      {/* Login Modal */}\r\n      <Modal show={loginModal} onHide={resetLogin}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>تسجيل الدخول</Modal.Title>\r\n          <Link to=\"#\" onClick={resetLogin}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n          <form onSubmit={handleLogSubmit}>\r\n            \r\n            <div className=\"mt-2\">\r\n              {loadLogErrors()}\r\n            </div>\r\n            \r\n            <div className=\"row\">\r\n              \r\n              <div className=\"col-sm-12 text-right\">\r\n                <label htmlFor=\"email\" className=\"ml-sm-4 font-weight-bold\">البريد الإلكتروني : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleLogChange} required id=\"email\" type=\"email\" placeholder=\"البريد الإلكتروني\" className={\"form-control col-sm-8 \" + (logErrors.email ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"password\" className=\"ml-sm-4 font-weight-bold\">كلمة المرور : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleLogChange} required id=\"password\" type=\"password\" placeholder=\"كلمة المرور\" className={\"form-control col-sm-8 \" + (logErrors.password ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <p className=\"mt-1 mr-4 font-weight-light\">\r\n                <Link to=\"#\" onClick={handleResetPasswCall} className=\"text-primary\">نسيت كلمة المرور؟</Link>\r\n              </p>\r\n\r\n            </div>\r\n\r\n            <Modal.Footer className=\"mt-4\">\r\n\r\n              <Button variant=\"grey\" onClick={resetLogin}>\r\n                إلغاء\r\n              </Button>\r\n              <Button variant=\"orange\" type=\"submit\">\r\n                تسجيل الدخول\r\n              </Button>\r\n\r\n            </Modal.Footer>\r\n          \r\n          </form>\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n      \r\n      {/* Reset Password Modal */}\r\n      <Modal show={resetPasswModal} onHide={resetPasswReset}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>إعادة تعيين كلمة المرور</Modal.Title>\r\n          <Link to=\"#\" onClick={resetPasswReset}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n          <form onSubmit={handleResetPasswSubmit}>\r\n            \r\n            <div className=\"mt-2\">\r\n              {loadResetPasswErrors()}\r\n            </div>\r\n            \r\n            <div className=\"row\">\r\n\r\n              <div className=\"col-sm-12 text-right\">\r\n                <label htmlFor=\"email\" className=\"ml-sm-4 font-weight-bold\">البريد الإلكتروني : </label>\r\n                <div className=\"input-group\">\r\n                  <input disabled={resetPasswState.submitted} onChange={handleResetPasswChange} required id=\"email\" type=\"email\" placeholder=\"البريد الإلكتروني\" className={\"form-control col-sm-8 \" + (resetPasswErrors.email ? 'is-invalid' : '')}/>\r\n                </div>\r\n                <p className=\"text-muted mr-sm-4 font-info\">\r\n                  سيتم إرسال رمز إعادة التعيين على البريد الإلكتروني.\r\n                </p>\r\n                <div className=\"text-right\">\r\n                    <button disabled={resetPasswState.submitted} onClick={sendResetEmail} className=\"btn btn-sm btn-outline-dark\">إرسال</button>\r\n                  </div>\r\n              </div>\r\n\r\n              {\r\n                resetPasswState.submitted ? (\r\n                    <div className=\"col-sm-12 mt-3 text-right\">\r\n                      <label htmlFor=\"token\" className=\"ml-sm-4 font-weight-bold\">* رمز إعادة التعيين : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleResetPasswChange} required id=\"token\" type=\"text\" placeholder=\"رمز إعادة التعيين\" className={\"form-control col-sm-8 \" + (resetPasswErrors.token ? 'is-invalid' : '')}/>\r\n                      </div>\r\n                    </div>\r\n                ) : null\r\n              }\r\n              {\r\n                resetPasswState.submitted ? (\r\n                  <div className=\"col-sm-12 mt-2 text-right\">\r\n                    <label htmlFor=\"password\" className=\"ml-sm-4 font-weight-bold\">كلمة المرور الجديدة : </label>\r\n                    <div className=\"input-group\">\r\n                      <input onChange={handleResetPasswChange} required id=\"password\" type=\"password\" placeholder=\"كلمة المرور\" className={\"form-control col-sm-8 \" + (resetPasswErrors.password ? 'is-invalid' : '')}/>\r\n                    </div>\r\n                  </div>\r\n                ) : null\r\n              }\r\n              {\r\n                resetPasswState.submitted ? (\r\n                  <div className=\"col-sm-12 mt-2 text-right\">\r\n                    <label htmlFor=\"confirm_password\" className=\"ml-sm-4 font-weight-bold\">تأكيد كلمة المرور الجديدة : </label>\r\n                    <div className=\"input-group\">\r\n                      <input onChange={handleResetPasswChange} required id=\"confirm_password\" type=\"password\" placeholder=\"تأكيد كلمة المرور\" className={\"form-control col-sm-8 \" + (resetPasswErrors.password ? 'is-invalid' : '')}/>\r\n                    </div>\r\n                  </div>\r\n                ) : null\r\n              }\r\n\r\n            </div>\r\n\r\n            <Modal.Footer className=\"mt-4\">\r\n\r\n              <Button variant=\"grey\" onClick={resetPasswReset}>\r\n                إلغاء\r\n              </Button>\r\n              <Button disabled={resetPasswState.token ? false : true} variant=\"primary\" type=\"submit\">\r\n                إعادة التعيين\r\n              </Button>\r\n\r\n            </Modal.Footer>\r\n          \r\n          </form>\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n      \r\n      {/* Logout Modal */}\r\n      <Modal show={logoutModal} onHide={() => {setLogout(false)}}>\r\n        <Modal.Header>\r\n          <Modal.Title>تسجيل الخروج</Modal.Title>\r\n          <Link to=\"#\" onClick={() => setLogout(false)}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-right\">\r\n          <div className=\"mt-2\">\r\n            {loadLogoutErrors()}\r\n          </div>\r\n          <span className=\"display-8 text-dark mt-4\">هل تود تسجيل الخروج بالفعل؟</span>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"grey\" onClick={() => {setLogout(false); setLogoutErrors({})}}>\r\n            إلغاء\r\n          </Button>\r\n          <Button variant=\"danger\" onClick={handleLogout}>\r\n            تسجيل الخروج\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Successful Registeration */}\r\n      <Modal show={successReg} onHide={() => {setSuccessReg(false)}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تم تسجيلك بنجاح!</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <i className=\"fa fa-check-circle text-success fa-3x\"/>\r\n          <p className=\"mt-2 lead text-muted\">\r\n            سيتم إرسال رابط التفعيل على البريد الإلكتروني, \r\n            الرجاء تفعيل الحساب لتتمكن من تسجيل الدخول.\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-success\" onClick={() => {setSuccessReg(false)}}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default withRouter(Navbar)","import React from 'react';\r\nimport copy from 'copy-to-clipboard';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\n\r\nexport const Footer = () => {\r\n  const currentYear = new Date().getFullYear()\r\n\r\n\r\n  return (\r\n    <footer className=\"page-footer bg-footer font-small\">\r\n\r\n      <div className=\"bg-sub-footer\">\r\n        <div className=\"container\">\r\n\r\n          <div className=\"row py-3 d-flex align-items-center\">\r\n\r\n            <div className=\"col-md-6 col-lg-5 text-center text-md-right mb-4 mb-md-0\">\r\n              <h6 className=\"mb-0 text-dark font-weight-bold\">تواصل معنا عن طريق شبكات التواصل الإجتماعي</h6>\r\n            </div>\r\n\r\n            <div className=\"col-md-6 col-lg-7 text-center text-md-left\">\r\n\r\n              <Link dir=\"ltr\" title=\"@qsemh1\" to=\"#\" onClick={() => {window.open(\"https://t.me/qsemh1\")}} className=\"fb-ic text-primary\">\r\n                <span className=\"fab fa-telegram-plane fa-2x font-weight-bold mr-4\"/>\r\n              </Link>\r\n\r\n              <Link dir=\"ltr\" title=\"@qsemh\" to=\"#\" onClick={() => {window.open(\"https://twitter.com/qsemh\")}} className=\"li-ic text-info\">\r\n                <span className=\"fab fa-twitter fa-2x font-weight-bold mr-4\"/>\r\n              </Link>\r\n\r\n              <Link dir=\"ltr\" title=\"@\" to=\"#\" className=\"wa-ic text-success\">\r\n                <span className=\"fab fa-whatsapp fa-2x font-weight-bold mr-4\"/>\r\n              </Link>\r\n\r\n              <Link dir=\"ltr\" title=\"@qsemh\" to=\"#\" onClick={() => {window.open(\"https://www.instagram.com/qsemh/\")}} className=\"ins-ic text-warning\">\r\n                <span className=\"fab fa-instagram fa-2x font-weight-bold mr-4\"/>\r\n              </Link>\r\n\r\n              <Link dir=\"ltr\" title=\"QsemhApp@gmail.com\" to=\"#\" onClick={() => {copy(\"QsemhApp@gmail.com\")}} className=\"ins-ic text-danger\">\r\n                <span className=\"fa fa-at fa-2x font-weight-bold mr-4\"/>\r\n              </Link>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n      <hr/>\r\n\r\n      <div className=\"container text-center text-md-left\">\r\n\r\n        <div className=\"row mt-3\">\r\n          \r\n          <div className=\"col-md-3 text-right col-lg-2 col-xl-2 mx-auto mb-4\">\r\n\r\n            <h6 className=\"text-uppercase font-weight-bold text-dark\">روابط مهمة</h6>\r\n            \r\n            <hr className=\"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto\" style={{width: \"85px\"}}/>\r\n            \r\n            <p>\r\n              <Link className=\"font-weight-bold qsemh-turq\" to=\"/\">أبرز العروض</Link>\r\n            </p>\r\n\r\n            <p>\r\n              <Link className=\"font-weight-bold qsemh-turq\" to=\"/ads\">القسائم</Link>\r\n            </p>\r\n\r\n            <p>\r\n              <Link className=\"font-weight-bold qsemh-turq\" to=\"/coupons/offers\">بيع القسائم</Link>\r\n            </p>\r\n            \r\n          </div>\r\n        \r\n          <div className=\"col-md-2 text-right col-lg-2 col-xl-2 mx-auto mb-4\">\r\n\r\n            <h6 className=\"text-uppercase font-weight-bold text-dark\">روابط أخرى</h6>\r\n            <hr className=\"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto\" style={{width: \"78px\"}}/>  \r\n\r\n            <p>\r\n              <Link className=\"font-weight-bold qsemh-turq\" to=\"/terms\">الشروط والأحكام</Link>\r\n            </p>\r\n            \r\n          </div>\r\n\r\n          <div className=\"col-md-3 text-right col-lg-4 col-xl-3 mx-auto mb-4\">\r\n\r\n            <h6 className=\"text-uppercase font-weight-bold text-dark\">نبذة عن \"قسيمة\"</h6>\r\n            <hr className=\"deep-purple accent-2 mb-4 mt-0 d-inline-block mx-auto\" style={{width: \"152px\"}}/>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div className=\"footer-copyright font-weight-bold text-dark text-center py-3\">\r\n        جميع الحقوق محفوظة لـ \"قسيمة\" {currentYear} ©\r\n      </div>\r\n    \r\n    </footer>\r\n  )\r\n}","import React from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nclass SyncApp extends React.Component {\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      this.props.location.pathname !== prevProps.location.pathname\r\n    ) {\r\n      window.scrollTo(0, 0);\r\n    }    \r\n  }\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default withRouter(SyncApp);","import React, { useEffect, useState } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n\r\nconst FetchData = () => {\r\n\r\n  const [state, setState] = useState({\r\n    flash: false,\r\n    title: null,\r\n    message: null,\r\n    state: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetch('/api/labels', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          if (data.user){\r\n            console.log(data.notifications)\r\n            localStorage.removeItem('maidan_user');\r\n            localStorage.removeItem('maidan_user_access');\r\n            localStorage.setItem('maidan_user', data.user);\r\n            localStorage.setItem('notifs', data.notifications);\r\n            localStorage.setItem('maidan_user_access', data.access_level);\r\n          }\r\n          localStorage.setItem('maidan_elements', data.labels);\r\n          localStorage.setItem('maidan_files', data.files);\r\n        } else {\r\n          if (data.code === 'DISABLED'){\r\n            if (localStorage.maidan_user){\r\n              setState({\r\n                flash: true,\r\n                title: 'حسابك',\r\n                message: 'لقد تم تعطيل حسابك, الرجاء التواصل مع الإدارة.',\r\n                state: 'error'\r\n              })\r\n            }\r\n          }\r\n        }\r\n      })\r\n    })\r\n  })\r\n\r\n  const resetModals = () => {\r\n    setState({\r\n      flash: false,\r\n      title: null,\r\n      message: null,\r\n      state: null\r\n    })\r\n\r\n    // Reset Page\r\n    localStorage.removeItem('maidan_jwt_$m3');\r\n    localStorage.removeItem('maidan_user');\r\n    localStorage.removeItem('logged');\r\n    localStorage.removeItem('maidan_user_access');\r\n    localStorage.removeItem('profile_img');\r\n    sessionStorage.clear();\r\n    window.location.href = window.location.origin\r\n  }\r\n\r\n  return(\r\n    <div className=\"mt-5\">\r\n      <Modal show={state.flash} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{state.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {state.state === 'success' ? (\r\n            <i className=\"fa fa-check-circle text-success fa-3x\"/>\r\n          ) : state.state === 'error' ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : null}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {state.message}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-primary\" onClick={resetModals}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(FetchData);","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n/*\r\n  This Page Will Display The Best 6 Coupon Groups (Based on Full Price)\r\n*/\r\n\r\nexport const Home = (props) => {\r\n\r\n  const [AdsFiles, setAdsFiles] = useState({carousel: [], small: []});\r\n  const curState = props.location && props.location.state;\r\n\r\n  const flashMessage = curState && curState.flash;\r\n  const [flashState, setFlashState] = useState({\r\n    flash: flashMessage,\r\n    view: (flashMessage ? true : false)\r\n  })\r\n  \r\n\r\n  const [groups, setGroups] = useState();\r\n  const [errors, setErrors] = useState({});\r\n  \r\n\r\n\r\n  useEffect(() => {\r\n    fetch('/api/groups', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({user: localStorage.maidan_user ? JSON.parse(localStorage.maidan_user) : null})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups(data.groups);\r\n          var files = JSON.parse(localStorage.maidan_files);\r\n          var carouselAds = [];\r\n          var smallAds = [];\r\n          // Loop Through Saved Files.\r\n\r\n          for (let i = 0; i < files.length; i++){\r\n            if (files[i].key === 'carouselAds'){\r\n              carouselAds.push(files[i]);\r\n            }\r\n            if (files[i].key === 'smallAds'){\r\n              smallAds.push(files[i]);\r\n            }\r\n          }\r\n\r\n          setAdsFiles({\r\n            carousel: carouselAds,\r\n            small: smallAds\r\n          })\r\n        } else {\r\n          setErrors({\r\n            QueryError: {\r\n              name: 'السيرفر',\r\n              error: 'حدث خطأ أثناء سحب البيانات من السيرفر, الرجاء تحديث الصفحة.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n\r\n  const loadCards = () => {\r\n    return(\r\n      <div className=\"row justify-content-center mt-4\">\r\n        {groups.map((group, index) => (\r\n          <div key={index} className=\"col-sm-10 col-md-4\">\r\n\r\n            <div className=\"card hoverable mt-4 text-center bg-light-grey img-thumbnail\">\r\n              \r\n              <div className=\"view overlay zoom\">\r\n                <img loading=\"lazy\" src={`https://maidancom.s3.us-east-2.amazonaws.com/${group.images[0]}`} alt={group.images[0]} className=\"card-top-img card-normal-img img-fluid\"/>\r\n                <Link to={`/ads/${group.id}`}>\r\n                  <div className=\"mask flex-center rgba-black-slight\">\r\n                    <div className=\"card-body\">\r\n                      <span className=\"display-7 card-title shadow-text qsemh-turq\">{group.company}</span>\r\n                      <p className=\"card-text font-weight-bold  text-dark mt-4\">\r\n                        للمزيد من المعلومات <i className=\"fa fa-external-link-alt \"/>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              </div>\r\n              \r\n              <div className=\"card-body\">\r\n                \r\n                <Link to={`/ads/${group.id}`} className=\"text-dark\">\r\n                  <p className=\"display-8 font-weight-bold\">\r\n                    {group.company}\r\n                  </p>\r\n                </Link>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const loadSmallAds = () => {\r\n    let smallAds = AdsFiles.small;\r\n\r\n    return(\r\n      smallAds.sort(() => 0.5 - Math.random()).slice(0, 2).map((file, index) => {\r\n        return(\r\n          <div key={index} className=\"col-sm-6 col-gap pr-md-1 pt-mobile\">\r\n            <img loading=\"lazy\" src={`https://maidancom.s3.us-east-2.amazonaws.com/${file.file_name}`} alt={file.file_name} className=\"ads-images img-fluid\"/>\r\n          </div>\r\n        )\r\n      })\r\n    )\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5\">\r\n\r\n      <div className=\"pt-4\">\r\n              \r\n        <div id=\"carousel-example-1z\" className=\"mt-5 pt-5 pr-md-2 pl-md-2 carousel slide carousel-fade\" data-ride=\"carousel\">\r\n\r\n          <ol className=\"carousel-indicators\">\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"0\" className=\"active\"></li>\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"1\"></li>\r\n            {/* <li data-target=\"#carousel-example-1z\" data-slide-to=\"2\"></li> */}\r\n          </ol>\r\n\r\n          <div className=\"carousel-inner\" role=\"listbox\">\r\n\r\n            <div className=\"carousel-item carousel-sitem active\">\r\n              <img loading=\"lazy\" className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner1.png\"\r\n                alt=\"First slide\"/>\r\n            </div>\r\n\r\n            <div className=\"carousel-item carousel-sitem\">\r\n              <img loading=\"lazy\" className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner2.png\"\r\n                alt=\"Second slide\"/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <a className=\"carousel-control-prev\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"prev\">\r\n            {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">التالي</span>\r\n          </a>\r\n\r\n          <a className=\"carousel-control-next\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"next\">\r\n            {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">السابق</span>\r\n          </a>\r\n\r\n        </div> \r\n        \r\n      </div>\r\n\r\n      <div className=\"mt-5 container\">\r\n\r\n        <div className=\"row justify-content-center\">\r\n\r\n          {loadSmallAds()}\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div className=\"mt-5 text-center container\">\r\n        {loadErrors()}\r\n      </div>\r\n     \r\n      <div className=\"mt-5 text-center container\">\r\n        <span className=\"display-6 header-shadow qsemh-turq\">\r\n          عروض مميزة\r\n        </span>\r\n        <hr/>\r\n        {groups && groups.length > 0 ? loadCards() : (<p className=\"font-weight-bold text-danger\">لا توجد عروض حالياً</p>)}\r\n      </div>\r\n    \r\n      <div id=\"carousel-example-2z\" className=\"mt-5 pt-5 pr-md-3 pl-md-3 carousel slide\" data-ride=\"carousel\">\r\n\r\n        <div className=\"carousel-inner\" role=\"listbox\">\r\n\r\n          {\r\n            AdsFiles.carousel.map((file, index) => {\r\n              if (index === 0){\r\n                return(\r\n                  <div key={index} className=\"carousel-item carousel-ad-item active\">\r\n                    <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src={`https://maidancom.s3.us-east-2.amazonaws.com/${file.file_name}`}\r\n                      alt={file.file_name}/>\r\n                  </div>\r\n                )\r\n              } else {\r\n                return(\r\n                  <div key={index} className=\"carousel-item carousel-ad-item\">\r\n                    <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src={`https://maidancom.s3.us-east-2.amazonaws.com/${file.file_name}`}\r\n                      alt={file.file_name}/>\r\n                  </div>\r\n                )\r\n              }\r\n            })\r\n          }\r\n\r\n        </div>\r\n\r\n        <a className=\"carousel-control-prev\" href=\"#carousel-example-2z\" role=\"button\" data-slide=\"prev\">\r\n          {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n          <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n          <span className=\"sr-only\">التالي</span>\r\n        </a>\r\n        \r\n        <a className=\"carousel-control-next\" href=\"#carousel-example-2z\" role=\"button\" data-slide=\"next\">\r\n          {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n          <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n          <span className=\"sr-only\">السابق</span>\r\n        </a>\r\n\r\n      </div>     \r\n      \r\n      <div className=\"input-group justify-content-center mt-4\">\r\n        <Link to=\"/ads\" className=\"btn btn-lg btn-outline-turq font-weight-bold\">جميع القسائم</Link>\r\n      </div>\r\n      \r\n      {/* Flash Messages Modal */}\r\n      <Modal show={flashState.view} onHide={() => {setFlashState({flash: {}, view: false})}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{flashState.flash && flashState.flash.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {flashState.flash && flashState.flash.type === 'error' ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : (\r\n            <i className=\"fa fa-info-circle text-info fa-3x\"/>\r\n          )}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {flashState.flash && flashState.flash.message}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-primary\" onClick={() => {setFlashState({flash: {}, view: false})}}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport const Terms = () => {\r\n  return(\r\n    <div className=\"mb-5 pb-5\">\r\n\r\n      <div className=\"pt-5\"/>\r\n\r\n      <div className=\"mt-5 pt-5 text-right container\">\r\n\r\n        <span className=\"display-7 font-weight-light text-danger\">\r\n          الأحكام, وشروط الإستخدام\r\n        </span>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"container mt-5\">\r\n          \r\n          <span className=\"display-8 text-primary\">\r\n            * مصطلحات مهمة :-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n            - القيمة الموازنة:&nbsp;&nbsp;\r\n            <br/>\r\n            <span className=\"font-weight-bold\">\r\n              (عدد القسائم * سعر القسيمة)\r\n            </span>\r\n            <br/><br/>\r\n            - معادلة البقاء بالساعات:&nbsp;&nbsp;\r\n            <br/>\r\n            <span className=\"font-weight-bold\">\r\n              ((القيمة الموازنة / 1000) *24) بحد أقصى 48 ساعة\r\n            </span>\r\n            <br/><br/>\r\n            - رصيد نقطة واحدة:&nbsp;&nbsp;\r\n            <br/>\r\n            <span className=\"font-weight-bold\">\r\n              دولار أمريكي واحد (3.75 ريال سعودي)\r\n            </span>\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"container mt-5\">\r\n          <hr/>\r\n          <span className=\"display-8 text-primary\">\r\n            * القسيمة:-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n            - القسيمة عبارة عن تعريف إلكتروني يسمى QRcode بمثابة تصريح لمالكه - بالطرق النظامية والشرعية - الاستفادة من قيمته لمرة واحدة فقط بشكل مجاني 100% دون شرط أو قيد من أي منتج أو سلعة تبيعه الجهة التي أصدرت وأعلنت عن هذه القسيمة , ويجب أن يتم الاستفادة منها خلال فترة صلاحيتها وإلا تعتبر ملغية ولا يحق لأحد الاستفادة منها بأي شكل من الأشكال.\r\n            <br/><br/>\r\n            - القسيمة لا تسترجع قيمتها نقداً من قبل المعلن بأي حال من الأحوال إلا برضاه دون أن يكون للموقع أدنى مسؤولية.\r\n            <br/><br/>\r\n            - للقسائم وقتٌ لتقديم الطلبات عليها في بداية إنزال الإعلان في الموقع , وبعد انقضاء هذه المدة سيقوم النظام بتوزيع قسائم الإعلان بشكل آلي وعشوائي للمتقدمين عليها , بعد ذلك في حال كانت القسائم أكثر من عدد المتقدمين فإن الحصول على القسائم المتبقية يكون بشكل مباشر من قبل المستفيدين الذين لم يسبق لهم التقديم عليها حتى نفاذ هذه الكمية المتبقية.\r\n            <br/><br/>\r\n            - في الصفحة الرئيسية (أبرز العروض) تكون مخصصة لأفضل 6 عروض من الإعلانات ومدة بقاء الإعلان في هذه المساحة حسب معادلة البقاء , وللإدارة الحق في تمديد أي عرض تراه.\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"container mt-5\">\r\n          <hr/>\r\n          <span className=\"display-8 text-primary\">\r\n          * المستفيد:-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n            - يحق للمستفيد بعد تفعيل حسابه وإكمال بياناته بشكل صحيح , التقديم على القسائم بحد أقصى ( 1 قسيمة كل 24 ساعة ).\r\n            <br/><br/>\r\n            - لا يحق للمستفيد التقديم على نفس الإعلان مرة أخرى, لكن يمكنه التقديم على إعلانات أخرى حتى لو كانت لنفس المعلن.\r\n            <br/><br/>\r\n            - يحق للمستفيد الاستفادة من قسيمته مباشرة من المعلن دون شرط أو قيد مالم تنتهي صلاحيتها.\r\n            <br/><br/>\r\n            - يحق للمستفيد إعطاء قسيمته لأي شخص آخر (صورة QrCode أو الرمز التعريفي ) للاستفادة منها ولا يحق للمعلن رفضها.\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"container mt-5\">\r\n          <hr/>\r\n          <span className=\"display-8 text-primary\">\r\n          * المعلن:-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n            - للمعلن الحرية في الإعلان بعدد القسائم  بشرط أن لا يقل سعر القسيمة الواحدة عن 10 دولار أمريكي ( 37.50 ريال سعودي).\r\n            <br/><br/>\r\n            - مدة بقاء الإعلان في الصفحة الرئيسية (أبرز العروض) حسب معادلة البقاء.\r\n            <br/><br/>\r\n            - الترتيب والأولوية للإعلانات في صفحة (كل العروض) حسب الأعلى للقيمة الموازنة.\r\n            <br/><br/>\r\n            - يحق للمعلن إنزال منشورات إعلانية في المساحة الخاصة به 3 منشورات بحجم (1280*1280) بكسيل ونص إعلاني لا يزيد عن 200 حرف.\r\n            <br/><br/>\r\n            - يحق للمعلن تحديد الفروع التي تستقبل هذه القسائم وإحداثياتها أو جعلها لكل فروعه مع توضيح ذلك في خانة الفرع.\r\n            <br/><br/>\r\n            <span className=\"text-muted\">- لا يحق للمعلن إنزال إعلان آخر ولديه إعلان قائم.</span>\r\n            <br/><br/>\r\n            - يحظر على المعلن المساس بالدين الإسلامي أو قوانين المملكة العربية السعودية أو الذوق العام بإعلانه أو تصرفه أو أي إجراء يتخذه.\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"container mt-5\">\r\n        <hr/>\r\n          <span className=\"display-8 text-primary\">\r\n          * الإعلان:-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n          - كل إعلان له صلاحية بقاء في الموقع حسب معادلة البقاء, ولكن لو حصل أن تبقى قسائم لم تستنفذ وهناك وقت عرض متبقى (الذي وضعه المعلن) فيبقى الأعلان ولا يحذف حتى آخر قسيمة وبعد انتهاء مدة العرض هذه تصبح القسائم المتبقية غير فعالة.\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"container mt-5\">\r\n          <hr/>\r\n          <span className=\"display-8 text-primary\">\r\n          * بيع القسائم:-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n            - يحق لأي طرف بيع أو إهداء أو شراء أي قسيمة على الطرف الآخر بأي وسيلة كانت خارج الموقع دون أن يكون للموقع أدنى مسؤولية , أو يكون ذلك تحت مظلة ومسؤولية وتنظيم الموقع من خلال قسم خاص ومسؤولين عن ذلك لضمان حقوق الجميع بدون أن يكون هناك أي تلاعب وذلك مقابل رسوم بسيطة جداً مقدارها 1% فقط من سعر البيع للقسيمة المباعة.\r\n            <br/><br/>\r\n            - ومثال على ذلك:-\r\n            <br/>\r\n            - قام (خالد) ببيع قسيمته ذات القيمة السوقية 15 دولار لمطعم X , بقيمة 10 دولار على ( محمد ) فبعد خصم رسوم الموقع 1% سيحصل (خالد) على 9.9 دولار ( نقطة ) في محفظته الرقمية, ويحصل ( محمد ) على قسيمة االمطعم X ويحق له الاستفادة من كامل قيمتها في الأصل وهي ( 15 دولار ).\r\n            <br/><br/>\r\n            - الموقع يوفر محفظة رقمية برصيد يسمى (نقاط) وهذه النقاط تمثل مبلغ مالي يتم شحنه من أحد قنوات الدفع التي توفرها بوابة الدفع.\r\n            <br/><br/>\r\n            - يتم شحن الرصيد بطرق الدفع المتاحة في الموقع ( فيزا - paypal- مدى - تحويل بنكي ) ,ولكل وسيلة دفع رسوم تقتطعها بوابة الدفع ليس لنا دخل فيها وستكون موضحة وقت الدفع.\r\n          </p>\r\n\r\n        </div>\r\n\r\n        <div className=\"container mt-5\">\r\n          <hr/>\r\n          <span className=\"display-8 text-primary\">\r\n          * طريقة الاستخدام:-\r\n          </span>\r\n\r\n          <p className=\"mt-2 font-terms\">\r\n            - توجه للموقع <Link className=\"text-primary\" to=\"#\" onClick={() => {window.open(window.origin)}}>Qsemh.com</Link> بعد ذلك ادخل على الإعلان المراد مباشرة أو من صفحة (<Link to=\"/ads\">القسائم</Link>) و بإمكانك إستخدام فلاتر البحث للوصول للنتيجة المرغوبة, ثم ادخل على الإعلان, ثم انقر على زر تقديم طلب وعادة يكون هناك وقت أو مهلة بداية إنزال الإعلان لتجميع الطلبات , بعد ذلك يقوم النظام بتوزيع القسائم عشوائياً على المتقدمين وخلال دقائق ستجد القسيمة في حسابك بكل تفاصيلها إن حالفك الحظ.\r\n            <br/><br/>\r\n            - اتجه للمعلن وأبرز له كود القسيمة QRcode من قائمة (كوبوناتي) أو الكود المكتوب (الرمز التعريفي), بعد ذلك تتم المطابقة ثم اطلب ما تشاء بقيمة هذه القسيمة وما زاد عن ذلك تقوم بدفعه انت من حسابك الخاص.\r\n            <br/><br/>\r\n            - ليس لك الحق في المطالبة بقيمة القسيمة بأي طريقة كانت أو بأي حيلة كانت, كأن تطلب أي طلب ثم تقوم بإلغاءه لأجل استرجاع المبلغ إلا إن سمح بذلك المعلن فله ذلك دون أن يكون للموقع أدنى مسؤولية.\r\n          </p>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}","import React, { useState } from 'react';\r\nimport { Link, Redirect, useParams } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n\r\nexport const ViewGroup = () => {\r\n\r\n  const currentUser = localStorage.maidan_user ? JSON.parse(localStorage.maidan_user) : {};\r\n  const { gid } = useParams()\r\n  const [group, setGroup] = useState();\r\n\r\n  const [flash, setFlash] = useState({});\r\n  const [isFlash, setFlashModal] = useState(false);\r\n\r\n  const [notify, setNotify] = useState({});\r\n  const [isNotify, setNotifyModal] = useState(false);\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n  \r\n\r\n  useEffect(() => {\r\n    fetch(`/api/groups/${gid}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroup(data.group);\r\n        } else {\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الإعلان غير موجود أو قد تم حذفه'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [gid])\r\n\r\n\r\n  const OpenBranchMap = (e) => {\r\n    e.preventDefault();\r\n    window.open(e.target.id)\r\n  }\r\n  \r\n  const handleRequest = (e) => {\r\n    e.preventDefault();\r\n    const SendRequest = async() => {\r\n      await fetch(`/api/groups/request/${group.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({request_type: group.distribute_type})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setFlash({\r\n              title: 'طلب الحصول على القسيمة',\r\n              message: 'تم تسجيل طلبك بنجاح!',\r\n              type: 'success'\r\n            })\r\n            setFlashModal(true);\r\n          } else {\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setFlash({\r\n                title: 'طلب الحصول على القسيمة',\r\n                message: 'القسيمة غير متوفرة, الرجاء طلب قسيمة أخرى',\r\n                type: 'error'\r\n              })     \r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setFlash({\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة طلب القسيمة, الرجاء المحاولة من جديد لاحقاً.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_TYPE'){\r\n              setFlash({\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة طلب القسيمة, الرجاء المحاولة من جديد لاحقاً.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'NO_COUPON'){\r\n              setFlash({\r\n                title: 'خطأ',\r\n                message: 'للأسف, لقد إنتهت الكمية لهذا القسيمة, الرجاء تجربة قسيمة آخر.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'HAS_CLAIMED'){\r\n              setFlash({\r\n                title: 'خطأ',\r\n                message: 'لقد قمت بإستخدام طلبك اليومي بالفعل, الرجاء المحاولة مجدداً بعد مرور 24 ساعة.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'HAS_A_COUPON'){\r\n              setFlash({\r\n                title: 'خطأ',\r\n                message: 'لقد قمت بالمطالبة بهذا القسيمة سابقاً بالفعل, لا يمكنك المطالبة به مجدداً.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === \"ITS_YOUR_COUPON\"){\r\n              setFlash({\r\n                title: 'طلب الحصول على القسيمة',\r\n                message: 'لا يمكنك طلب الحصول على قسيمتك.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === \"COUNTRY_ERROR\"){\r\n              setFlash({\r\n                title: 'طلب الحصول على القسيمة',\r\n                message: 'لا يمكنك طلب الحصول على قسيمة لدولة أخرى.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === \"SING_UPS_EXPIRED\"){\r\n              setFlash({\r\n                title: 'طلب الحصول على القسيمة',\r\n                message: 'لا يمكن طلب هذه القسيمة في الوقت الحالي, القسيمة لازالت في مرحلة التوزيع.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === \"ALREADY_SIGNED_UP\"){\r\n              setFlash({\r\n                title: 'طلب الحصول على القسيمة',\r\n                message: 'لقد قمت بتسجيل طلب الحصول على القسيمة مسبقاً, لا يمكنك تسجيل الطلب مجدداً.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === \"DISABLED\"){\r\n              setFlash({\r\n                title: 'حسابك',\r\n                message: 'لا يمكنك إكمال الطلب, لقد تم إيقاف حسابك, الرجاء التواصل مع الإدارة.',\r\n                type: 'error',\r\n                logout: true\r\n              });\r\n            }\r\n            if (data.code === \"UNCLAIMABLE\"){\r\n              setFlash({\r\n                title: 'القسيمة',\r\n                message: 'لا يمكن طلب هذا القسيمة حالياً, لقد إنتهت صلاحيته, أو مدة عرضه على الموقع.',\r\n                type: 'error',\r\n              });\r\n            }\r\n            if ([\r\n                'INVALID_AUTH_HEADER', \r\n                'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n                'ACCESS_DENIED', 'AUTH_ERROR'\r\n              ].includes(data.code)){\r\n                setFlash({\r\n                  title: 'خطأ',\r\n                  message: 'يجب أن تسجل دخولك أولاً قبل طلب القسيمة',\r\n                  type: 'error'\r\n                })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              window.location.reload();\r\n            }\r\n            setFlashModal(true)\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    SendRequest();\r\n    setNotifyModal(false);\r\n  }\r\n\r\n  const handleNotify = (e) => {\r\n    e.preventDefault();\r\n    const user = localStorage.logged;\r\n\r\n    if (user){\r\n      setNotify({\r\n        title: 'تسجيل طلب',\r\n        message: 'يمكنك طلب الحصول على قسيمة مرة واحدة في اليوم, هل أنت متأكد؟',\r\n        can_sign_up: true\r\n      })\r\n    } else {\r\n      setNotify({\r\n        title: 'تسجيل طلب',\r\n        message: 'يجب أن تسجل دخولك أولاً قبل طلب القسيمة.',\r\n        can_sign_up: false\r\n      })\r\n    }\r\n    setNotifyModal(true)\r\n  }\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  const setTimer = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n\r\n    var deadline = new Date(date).getTime();\r\n    var x = setInterval(function() {\r\n      var sloppy_time = new Date();\r\n      // get the timezone offset from local time in minutes\r\n      var tzDifference = sloppy_time.getTimezoneOffset();\r\n      // convert the offset to milliseconds, add to sloppy_time, and make new date\r\n      var now = new Date(sloppy_time.getTime() + tzDifference * 60 * 1000);\r\n\r\n      var t = deadline - now;\r\n      \r\n      var hh = Math.floor((t%(1000 * 60 * 60 * 24))/(1000 * 60 * 60)); \r\n      var mm = Math.floor((t % (1000 * 60 * 60)) / (1000 * 60)); \r\n      var ss = Math.floor((t % (1000 * 60)) / 1000);\r\n\r\n      let timer = document.getElementById('Timer')\r\n      if (timer){\r\n        timer.innerHTML = `${(hh>9?'':'0')+hh}:${(mm>9?'':'0')+mm}:${(ss>9?'':'0')+ss}`\r\n      }\r\n\r\n      if (t < 0){\r\n        clearInterval(x); \r\n        document.getElementById('TimerEl').innerHTML = 'تم الإنتهاء من التوزيع';\r\n        document.getElementById('TimerEl').classList.add('text-danger')\r\n      }\r\n    })\r\n  }\r\n\r\n  const loadCard = () => {\r\n    // Branch Configuration\r\n    const groupBranches = group && group.branches;\r\n    const lenGroupBranches = groupBranches.length;\r\n    // Images Configuration\r\n    const groupImages = group && group.images;\r\n    \r\n    return(\r\n      <div className=\"card hoverable bg-light-grey\">\r\n\r\n        <div className=\"card-body \">\r\n\r\n          <div className=\"row justify-content-center\">\r\n            \r\n            <div className=\"col-sm-10\">\r\n              <div className=\"carousel slide carousel-fade\" id=\"GroupCard\" data-ride=\"carousel\">\r\n\r\n                <div className=\"carousel-inner\">\r\n\r\n                  {/* <div className=\"carousel-item active\">\r\n                    <img loading=\"lazy\"  src={`Rests`} alt=\"Coupon 1\" width=\"100%\" height=\"30%\"/>\r\n                  </div>\r\n\r\n                  <div className=\"carousel-item\">\r\n                    <img loading=\"lazy\"  src={`Games`} alt=\"Coupon 2\" width=\"100%\" height=\"30%\"/>\r\n                  </div> */}\r\n\r\n                  {groupImages.map((key, index) => {\r\n                    if (index === 0){\r\n                      return(\r\n                        <div key={index} className=\"carousel-item active\">\r\n                          <img className=\"img-fluid carousel-img\" loading=\"lazy\" src={`https://s3.us-east-2.amazonaws.com/maidancom/${key}`} alt={key} width=\"100%\"/>\r\n                        </div>\r\n                      )\r\n                    } else {\r\n                      return(\r\n                        <div key={index} className=\"carousel-item\">\r\n                          <img className=\"img-fluid carousel-img\" loading=\"lazy\" src={`https://s3.us-east-2.amazonaws.com/maidancom/${key}`} alt={key} width=\"100%\"/>\r\n                        </div>\r\n                      )\r\n                    }\r\n                  })}\r\n\r\n                </div>\r\n\r\n                <a className=\"carousel-control-prev\" href=\"#GroupCard\" role=\"button\" data-slide=\"prev\">\r\n                  {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n                  <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n                  <span className=\"sr-only\">التالي</span>\r\n                </a>\r\n                \r\n                <a className=\"carousel-control-next\" href=\"#GroupCard\" role=\"button\" data-slide=\"next\">\r\n                  {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n                  <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n                  <span className=\"sr-only\">السابق</span>\r\n                </a>\r\n\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className=\"row mt-4 justify-content-center\">\r\n\r\n            <div className=\"col-sm-6 text-right mt-4\">\r\n\r\n              <p className=\"text-dark font-weight-bold\"><i className=\"fa fa-utensils fa-s\"/> الشركة : {group.company}</p>\r\n\r\n              <p className=\"text-dark\"><i className=\"fa fa-receipt fa-s\"/> نوع القسيمة : {group.type}.</p>\r\n\r\n              <p className=\"text-dark\"><i className=\"fa fa-dollar-sign fa-s\"/> قيمة القسيمة : {group.coupon_price}$ ({parseFloat(group.coupon_price*3.75).toFixed(2)} ريال سعودي).</p>\r\n              \r\n              <p className=\"text-dark\"><i className=\"fa fa-database fa-s\"/> العدد المتبقي : {group.coupons_left} (قسائم/قسيمة).</p>\r\n\r\n            </div>\r\n\r\n            <div className=\"col-sm-4 text-right mt-md-4 col-gap\">\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-globe fa-s\"/> الدولة : </span>\r\n              <p className=\"text-dark\">{group.country}</p>\r\n\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-code-branch fa-s\"/> الفروع : </span>\r\n              <p className=\"text-dark\">\r\n                {groupBranches.map((branch, index) => {\r\n                  if (lenGroupBranches === (index+1)){\r\n                    return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>.</span>)\r\n                  } else {\r\n                    return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>, </span>)\r\n                  }\r\n                })}\r\n              </p>\r\n            \r\n            </div>\r\n\r\n            <div className=\"col-sm-10 text-right mt-2\">\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-comment-dots fa-s\"/> الوصف : </span>\r\n                <blockquote className=\"text-muted mt-2 blockquote text-right text-quote\">\r\n                  {group.description}\r\n                </blockquote>\r\n            </div>\r\n            \r\n            <div className=\"col-sm-10 text-right mt-2\">\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-calendar-times fa-s\"/> صلاحية القسيمة : </span>\r\n              <p className=\"mt-2 mr-3\" dir=\"ltr\">{getDate(group.expire_date)}</p>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {\r\n            group.status === 'expired' ? (\r\n              <p className=\"text-danger font-weight-bold\">القسيمة منتهية.</p>\r\n            ) : (\r\n              <div>\r\n                {\r\n                  parseInt(group.coupons_left) > 0 ? (\r\n                    <div>\r\n                    {\r\n                      group.claimants.includes(currentUser.id) ? (\r\n                        <div>\r\n                          <div className=\"input-group justify-content-center mt-3\">\r\n                            <button disabled className=\"btn btn-lg btn-grey\">تقديم طلب <i className=\"fa fa-cart-arrow-down fa-s\"></i></button>\r\n                          </div>\r\n                          <small className=\"text-muted\">قمت بتقديم طلب لهذه القسيمة بالفعل</small>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"input-group justify-content-center mt-3\">\r\n                          <button onClick={handleNotify} className=\"btn btn-lg btn-orange\">تقديم طلب <i className=\"fa fa-cart-arrow-down fa-s\"></i></button>\r\n                        </div>\r\n                      )\r\n                    }\r\n\r\n                    {\r\n                      group.distribute_type === 'display' ? (\r\n                        <p id={'TimerEl'} className=\"font-weight-bold\"> المتبقي على التوزيع : <span id={'Timer'}>{setTimer(group.distribute_end_date, group.id)}</span></p>\r\n\r\n                      ): (\r\n                        <p className=\"font-weight-bold\">سارع بالطلب قبل نفاذ الكمية</p>\r\n                      )\r\n                    }\r\n                    </div>\r\n                  ) : (\r\n                    <p className=\"text-danger font-weight-bold\">نفذت الكمية بالفعل!</p>\r\n                  )\r\n                }\r\n              </div>\r\n            )\r\n          }\r\n\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const resetFlash = () => {\r\n    if (flash.logout){\r\n      localStorage.removeItem('maidan_jwt_$m3');\r\n      localStorage.removeItem('maidan_user');\r\n      localStorage.removeItem('logged');\r\n      localStorage.removeItem('maidan_user_access');\r\n      localStorage.removeItem('profile_img');\r\n      sessionStorage.clear();\r\n      window.location.href = window.location.origin\r\n    }\r\n    setFlashModal(false);\r\n    setFlash({});\r\n    window.location.reload();\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5\">\r\n\r\n      <div className=\"pt-4\">\r\n        \r\n        <div id=\"carousel-example-1z\" className=\"mt-5 pt-5 pr-md-2 pl-md-2 carousel slide carousel-fade\" data-ride=\"carousel\">\r\n\r\n          <ol className=\"carousel-indicators\">\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"0\" className=\"active\"></li>\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"1\"></li>\r\n            {/* <li data-target=\"#carousel-example-1z\" data-slide-to=\"2\"></li> */}\r\n          </ol>\r\n\r\n          <div className=\"carousel-inner\" role=\"listbox\">\r\n\r\n            <div className=\"carousel-item carousel-sitem active\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner1.png\"\r\n                alt=\"First slide\"/>\r\n            </div>\r\n\r\n            <div className=\"carousel-item carousel-sitem\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner2.png\"\r\n                alt=\"Second slide\"/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <a className=\"carousel-control-prev\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"prev\">\r\n            {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">التالي</span>\r\n          </a>\r\n\r\n          <a className=\"carousel-control-next\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"next\">\r\n            {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">السابق</span>\r\n          </a>\r\n\r\n        </div> \r\n\r\n      </div>\r\n\r\n      <div className=\"mt-5 text-center container\">\r\n        <span className=\"display-6 shadow-text-sm qsemh-turq\">\r\n          الإعلان ({gid}#)\r\n        </span>\r\n        <hr/>\r\n        <div className=\"mt-4\">\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"col-sm-11\">\r\n              {group ? loadCard() : null}\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n\r\n      {/* Flash Message Modal */}\r\n      <Modal show={isFlash} onHide={resetFlash}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{flash.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {flash.type === 'success' ? (\r\n            <i className=\"fa fa-check-circle text-success fa-3x\"/>\r\n          ) : flash.type === 'error' ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : null}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {flash.message}\r\n          </p>  \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-success\" onClick={resetFlash}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Notification Modal */}\r\n      <Modal show={isNotify} onHide={() => {setNotifyModal(false)}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{notify.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {!notify.can_sign_up ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : null}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {notify.message}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            {notify.can_sign_up ? (\r\n              <div>\r\n                <Button variant=\"outline-grey\" onClick={() => {setNotifyModal(false)}}>\r\n                  إلغاء\r\n                </Button>\r\n                <Button variant=\"outline-success\" onClick={handleRequest}>\r\n                  تأكيد\r\n                </Button>\r\n              </div>\r\n            ) : (\r\n              <Button variant=\"outline-grey\" onClick={() => {setNotifyModal(false)}}>\r\n                إغلاق\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>   \r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\n/*\r\n  This Page Will Display The Best 9 Coupon Groups (Based on Full Price)\r\n  First 3 Will Be Displayed at Large Cards, And\r\n  The Rest Will Be Displayed as Normal Cards.\r\n*/\r\n\r\nexport const ViewGroups = () => {\r\n  \r\n  const [user, setUser] = useState({});\r\n\r\n  const [groups, setGroups] = useState();\r\n  const [filters, setFilters] = useState({});\r\n  const [advance, setAdvance] = useState(false);\r\n\r\n  // Filters;\r\n\r\n  const [types, setTypes] = useState([]);\r\n  const [cities, setCities] = useState([]);\r\n\r\n  const [errors, setErrors] = useState({});\r\n  \r\n\r\n  useEffect(() => {\r\n    fetch('/api/groups/all', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({user: localStorage.maidan_user ? JSON.parse(localStorage.maidan_user) : null})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups(data.groups);\r\n\r\n          var user = localStorage.maidan_user && JSON.parse(localStorage.maidan_user);\r\n          setUser(user);\r\n          // Getting Cities Names (AR) & Types (AR).\r\n          var elements = JSON.parse(localStorage.maidan_elements);\r\n\r\n          // If user, we just add User's Cities (Based on his country).\r\n          if (user){\r\n            elements.forEach(element => {\r\n              if (element.key === 'country'){\r\n                if (element.values.country.ar === user.country){\r\n                  setCities(element.values.cities.ar);\r\n                }\r\n              }\r\n              if (element.key === 'coupon_types'){\r\n                setTypes(element.values.ar)\r\n              }\r\n            })\r\n          } else {\r\n            var cities = []\r\n            elements.forEach(element => {\r\n              if (element.key === 'country'){\r\n                  element.values.cities.ar.forEach(city => {\r\n                    cities.push(city);\r\n                  })\r\n              }\r\n              if (element.key === 'coupon_types'){\r\n                setTypes(element.values.ar)\r\n              }\r\n            })\r\n            setCities(cities);\r\n          }\r\n\r\n        } else {\r\n          setErrors({\r\n            QueryError: {\r\n              name: 'السيرفر',\r\n              error: 'حدث خطأ أثناء سحب البيانات من السيرفر, الرجاء تحديث الصفحة.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const handleFilter = (e) => {\r\n    e.preventDefault()\r\n\r\n    const SearchFilter = async() => {\r\n      await fetch('/api/groups/all', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({...filters,\r\n          [e.target.id]: e.target.value,\r\n          user: localStorage.maidan_user ? JSON.parse(localStorage.maidan_user) : null})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setGroups(data.groups);\r\n          } else {\r\n            window.location.reload();\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    SearchFilter();\r\n    setFilters({\r\n      ...filters,\r\n      [e.target.id]: e.target.value\r\n    });\r\n  }\r\n\r\n  const loadfilters = () => {\r\n    return (\r\n      <div className=\"mt-4\">\r\n        <form>\r\n\r\n          <div className=\"row justify-content-center\">\r\n\r\n            <div className=\"form-group col-sm-12\">\r\n              <label htmlFor=\"search\" className=\"form-label font-weight-bold float-right\">البحث : </label>\r\n              <div className=\"input-group justify-content-right\">\r\n                <input id=\"search\" onChange={handleFilter} type=\"text\" placeholder=\"أدخل كلمة البحث (إسم الشركة, الوصف, النوع)\" className=\"form-control col-sm-6 col-md-12\"/>\r\n              </div>\r\n            </div>\r\n\r\n            \r\n          </div>\r\n          \r\n        </form>\r\n        \r\n        \r\n        <div className=\"text-right\">\r\n          <button onClick={() => {setAdvance(!advance)}} className=\"btn btn-link font-weight-bold\">\r\n            إعدادات البحث المتقدم\r\n            {advance ? (\r\n              <i className=\"mr-2 fa fa-arrow-up fa-xs\"/>\r\n            ) : (\r\n              <i className=\"mr-2 fa fa-arrow-down fa-xs\"/>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {advance ? (\r\n          <form>\r\n          \r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-md\">\r\n                <select onChange={handleFilter} id=\"coupon_type\" className=\"custom-select font-weight-bold\">\r\n                  <option className=\"font-weight-bold\" value=\"\" defaultValue>نوع القسيمة</option>\r\n                  {\r\n                    types.map((type, index) => (\r\n                      <option key={index} value={type}>{type}</option>\r\n                    ))\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"col-md pt-mobile\">\r\n                <select onChange={handleFilter} id=\"city\" className=\"custom-select font-weight-bold\">\r\n                  <option className=\"font-weight-bold\" value=\"\" defaultValue>المدينة</option>\r\n                  {\r\n                    cities.map((city, index) => (\r\n                      <option key={index} value={city}>{city}</option>\r\n                    ))\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"col-md pt-mobile\">\r\n                <select onChange={handleFilter} id=\"price\" className=\"custom-select font-weight-bold\">\r\n                  <option className=\"font-weight-bold\" value=\"\" defaultValue>قيمة القسيمة</option>\r\n                  <option value=\"highest\">الأكبر أولاً</option>\r\n                  <option value=\"lowest\">الأصغر أولاً</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"col-md pt-mobile\">\r\n                <select onChange={handleFilter} id=\"amount\" className=\"custom-select font-weight-bold\">\r\n                  <option className=\"font-weight-bold\" value=\"\" defaultValue>عدد القسائم</option>\r\n                  <option value=\"available\">المتوفر</option>\r\n                  <option value=\"highest\">الأكبر أولاً</option>\r\n                  <option value=\"lowest\">الأصغر أولاً</option>\r\n                </select>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <div className=\"text-right\">\r\n              <button className=\"btn btn-link text-primary font-weight-bold\">إعادة تعيين البحث</button>\r\n            </div>\r\n\r\n          </form>\r\n        ) : null}\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const loadCards = () => {\r\n    return(\r\n      <div className=\"row justify-content-center mt-4\">\r\n        {groups.map((group, index) => (\r\n          <div key={index} className=\"col-sm-10 col-md-4\">\r\n\r\n            <div className=\"card hoverable mt-4 text-center bg-light-grey img-thumbnail\">\r\n              \r\n              <div className=\"view overlay zoom\">\r\n                <img loading=\"lazy\" src={`https://maidancom.s3.us-east-2.amazonaws.com/${group.images[0]}`} alt=\"Coupon\" className=\"card-top-img card-normal-img img-fluid\"/>\r\n                <Link to={`/ads/${group.id}`}>\r\n                  <div className=\"mask flex-center rgba-black-slight\">\r\n                    <div className=\"card-body\">\r\n                      <span className=\"display-7 card-title shadow-text qsemh-turq\">{group.company}</span>\r\n                      <p className=\"card-text font-weight-bold text-dark mt-4\">\r\n                        للمزيد من المعلومات <i className=\"fa fa-external-link-alt \"/>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </Link>\r\n              </div>\r\n              \r\n              <div className=\"card-body\">\r\n                \r\n                <Link to={`/ads/${group.id}`} className=\"text-dark\">\r\n                  <p className=\"display-8 font-weight-bold\">\r\n                    {group.company}\r\n                  </p>\r\n                  {\r\n                    user && (user.is_admin || user.is_super) ? (\r\n                      <div>\r\n                        <p className=\"font-info font-weight-bold\">\r\n                          القسائم ({group.coupons_num}) - السعر ({group.coupon_price}$)\r\n                          <br/>\r\n                          الموازنة ({group.full_price}$) - المتبقي ({group.coupons_left})\r\n                        </p>\r\n                      </div>\r\n                    ) : null\r\n                  }\r\n                </Link>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n        ))}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5\">\r\n\r\n      <div className=\"pt-4\">\r\n        \r\n        <div id=\"carousel-example-1z\" className=\"mt-5 pt-5 pr-md-2 pl-md-2 carousel slide carousel-fade\" data-ride=\"carousel\">\r\n\r\n          <ol className=\"carousel-indicators\">\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"0\" className=\"active\"></li>\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"1\"></li>\r\n            {/* <li data-target=\"#carousel-example-1z\" data-slide-to=\"2\"></li> */}\r\n          </ol>\r\n\r\n          <div className=\"carousel-inner\" role=\"listbox\">\r\n\r\n            <div className=\"carousel-item carousel-sitem active\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner1.png\"\r\n                alt=\"First slide\"/>\r\n            </div>\r\n\r\n            <div className=\"carousel-item carousel-sitem\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner2.png\"\r\n                alt=\"Second slide\"/>\r\n            </div>\r\n\r\n            {/* <div className=\"carousel-item\">\r\n              <img loading=\"lazy\"  className=\"card-xl-img\" src=\"https://mdbootstrap.com/img/Photos/Slides/img%20(70).jpg\"\r\n                alt=\"Third slide\"/>\r\n            </div> */}\r\n\r\n          </div>\r\n\r\n          <a className=\"carousel-control-prev\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"prev\">\r\n            {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">التالي</span>\r\n          </a>\r\n\r\n          <a className=\"carousel-control-next\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"next\">\r\n            {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">السابق</span>\r\n          </a>\r\n\r\n        </div>     \r\n\r\n      </div>\r\n\r\n      <div className=\"mt-5 text-center container\">\r\n        {loadErrors()}\r\n      </div>\r\n      \r\n      <div className=\"mt-4 text-center container\">\r\n        <span className=\"display-6 header-shadow qsemh-turq\">\r\n          القسائم\r\n        </span>\r\n        <hr/>\r\n        {loadfilters()}\r\n        <hr/>\r\n        {groups ? loadCards() : null}\r\n      </div>\r\n    \r\n    </div>\r\n  )\r\n}","import React, {useState, useEffect} from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\nexport const ViewOffers = () => {\r\n\r\n  const User = localStorage.maidan_user && JSON.parse(localStorage.maidan_user);\r\n  \r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [offers, setOffers] = useState({offers: [], limit: 10});\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [modalErrors, setModalErrors] = useState({});\r\n\r\n  // Modals\r\n  const [flash, setFlash] = useState({});\r\n  const [isFlash, setFlashModal] = useState(false);\r\n  const [isBranches, setBranchesModal] = useState({view: false, branches: []});\r\n  const [isBuy, setBuyModal] = useState({view: false, offer_id: null})\r\n\r\n  useEffect(() => {\r\n    fetch('/api/offers', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setOffers({\r\n            offers: data.offers,\r\n            limit: 10\r\n          });\r\n        } else {\r\n          setErrors({\r\n            Server: {\r\n              name: 'خطأ',\r\n              error: 'حدث خطأ أثناء سحب العروض من قاعدة البيانات, الرجاء المحاولة لاحقاً.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n\r\n  const handleBuy = (e) => {\r\n    e.preventDefault();\r\n    \r\n    const BuyCoupon = async() => {\r\n      await fetch(`/api/user/coupon/${isBuy.offer_id}/buy`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            resetModals();\r\n            setOffers({\r\n              ...offers,\r\n              offers: data.offers\r\n            });\r\n            setFlashModal(true);\r\n            setFlash({\r\n              title: 'شراء العرض',\r\n              message: 'تم شراء القسيمة, وخصم سعر العرض من رصيدك بنجاح!',\r\n              type: 'success',\r\n              reload: true\r\n            });\r\n          } else {\r\n            if (data.code === 'AUTH_ERROR'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح لشراء العروض, الرجاء تسجيل الدخول'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACCESS_DENIED'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح لشراء العروض, الرجاء تسجيل الدخول'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_TOKEN'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_AUTH_HEADER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_LOGGED_IN'){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              localStorage.removeItem('maidan_jwt_$m3');\r\n              localStorage.removeItem('maidan_user');\r\n              localStorage.removeItem('logged');\r\n              localStorage.removeItem('maidan_user_access');\r\n              localStorage.removeItem('profile_img');\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'المستخدم',\r\n                  message: 'لا يمكنك شراء القسيمة, لقد تم إيقاف حسابك, الرجاء التواصل مع لإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة شراء القسيمة, الرجاء المحاولة لاحقاً.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'العرض',\r\n                message: 'يبدو أن العرض الذي تريد شراءة محذوف أو ملغي.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'SOLD_OFFER'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'العرض',\r\n                message: 'للأسف, تم شراء العرض بالفعل, الرجاء تجربة شراء عرض آخر.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'EXPIRED'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'القسيمة',\r\n                message: 'للأسف, لقد إنتهت صلاحية القسيمة الذي تريد شراءه.',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'NO_COUPON_FOUND'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'القسيمة',\r\n                message: 'العرض لا يحتوي على أي قسيمة, الرجاء تجربة عرض آخر',\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'LOWER_CREDIT'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'رصيد حسابك',\r\n                message: `رصيد حسابك (${User.balance}$) أقل من سعر العرض, الرجاء تعبئة رصيدك, والمحاولة من جديد.`,\r\n                type: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'ITS_YOUR_OFFER'){\r\n              resetModals();\r\n              setFlashModal(true);\r\n              setFlash({\r\n                title: 'العرض',\r\n                message: 'لا يمكنك شراء عرضك, يمكنك إلغاء العرض عبر صفحة (قسائمي).',\r\n                type: 'error'\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    BuyCoupon();\r\n\r\n  }\r\n\r\n  const OpenBranchMap = (e) => {\r\n    e.preventDefault();\r\n    window.open(e.target.id)\r\n  }\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  const loadOffers = () => {\r\n    const offers_patch = offers.offers && offers.offers.slice(0, offers.limit)\r\n\r\n\r\n    return (\r\n      <tbody>\r\n        {\r\n          offers_patch ? offers_patch.map((offer, index) => {\r\n            return(\r\n              <tr key={index}>\r\n                \r\n                <th className=\"table-header\">{index+1}</th>\r\n                <th className=\"table-header\">\r\n                  <Link className=\"text-primary\" to={`/ads/${offer.group_id}`}>{offer.group_id}</Link>\r\n                </th>\r\n                <td className=\"table-header\">{offer.seller}</td>\r\n                <td className=\"table-header\">{offer.coupon_type}</td>\r\n                <td className=\"table-header\">{offer.company}</td>\r\n                <td className=\"table-header\">\r\n                  <button onClick={() => {setBranchesModal({view: true, branches: offer.branches})}} className=\"btn btn-sm btn-outline-primary\">الفروع</button>\r\n                </td>\r\n                <td className=\"table-header text-primary\">${offer.coupon_price}</td>\r\n                <td dir='ltr' className=\"table-header text-danger\">{getDate(offer.expire_date)}</td>\r\n                <td className=\"table-header\">${offer.price}</td>\r\n                <td className=\"table-header\">\r\n                  <button onClick={() => {setBuyModal({view: true, offer_id: offer.id})}} className=\"btn btn-sm btn-secondary\">شراء</button>\r\n                </td>\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if ((offers.limit < offers.offers.length)){\r\n      let new_limit = offers.limit + 10;\r\n      setOffers({...offers, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    \r\n    if ((offers.limit > 10)){\r\n      let new_limit = offers.limit - 10;\r\n      setOffers({...offers, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadModalErrors = () => {\r\n    if (Object.keys(modalErrors).length !== 0 && modalErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {modalErrors ? Object.entries(modalErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    if (flash.reload){\r\n      window.location.reload();\r\n    }\r\n\r\n    // Reset State, Errors\r\n    setFlash({});\r\n    setModalErrors({});\r\n\r\n    // Reset Modals\r\n    setFlashModal(false);\r\n    setBranchesModal({view: false, branches: []});\r\n    setBuyModal({view: false, offer_id: null})\r\n\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5\">\r\n\r\n      <div className=\"pt-4\">\r\n        \r\n        <div id=\"carousel-example-1z\" className=\"mt-5 pt-5 pr-md-2 pl-md-2 carousel slide carousel-fade\" data-ride=\"carousel\">\r\n\r\n          <ol className=\"carousel-indicators\">\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"0\" className=\"active\"></li>\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"1\"></li>\r\n            {/* <li data-target=\"#carousel-example-1z\" data-slide-to=\"2\"></li> */}\r\n          </ol>\r\n\r\n          <div className=\"carousel-inner\" role=\"listbox\">\r\n\r\n            <div className=\"carousel-item carousel-sitem active\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner1.png\"\r\n                alt=\"First slide\"/>\r\n            </div>\r\n\r\n            <div className=\"carousel-item carousel-sitem\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner2.png\"\r\n                alt=\"Second slide\"/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <a className=\"carousel-control-prev\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"prev\">\r\n            {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">التالي</span>\r\n          </a>\r\n\r\n          <a className=\"carousel-control-next\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"next\">\r\n            {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">السابق</span>\r\n          </a>\r\n\r\n        </div> \r\n        \r\n      </div>\r\n\r\n      <div className=\"container mt-5 pt-5\">\r\n        \r\n        <div className=\"container mt-2\">\r\n          {loadErrors()}\r\n        </div>\r\n\r\n        <div className=\"container text-center mt-2\">\r\n          <span className=\"display-6 header-shadow qsemh-turq\">\r\n            بيع القسائم\r\n          </span>\r\n          <hr/>\r\n          <p className=\"font-weight-bold mt-2\">\r\n            رصيدك الحالي : {User ? `${User.balance}$` : '0$'}\r\n          </p>\r\n          <div className=\"table-responsive\">\r\n\r\n            <table className=\"table table-bordered mt-4\">\r\n              <thead>\r\n                <tr className=\"bg-light-grey\">\r\n                  <th className=\"table-header\" scope=\"col\">#</th>\r\n                  <th className=\"table-header\" scope=\"col\"># الإعلان</th>\r\n                  <th className=\"table-header\" scope=\"col\">البائع</th>\r\n                  <th className=\"table-header\" scope=\"col\">نوع القسيمة</th>\r\n                  <th className=\"table-header\" scope=\"col\">الشركة</th>\r\n                  <th className=\"table-header\" scope=\"col\">الفروع</th>\r\n                  <th className=\"table-header\" scope=\"col\">قيمة القسيمة</th>\r\n                  <th className=\"table-header\" scope=\"col\">الصلاحية</th>\r\n                  <th className=\"table-header\" scope=\"col\">سعر العرض</th>\r\n                  <th className=\"table-header\" scope=\"col\">شراء</th>\r\n                </tr>\r\n              </thead>\r\n              {loadOffers()}\r\n            </table>\r\n          </div>\r\n          <div className=\"justify-content-center\">\r\n            {(offers.offers && offers.limit < offers.offers.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n            {offers.limit > 10 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      \r\n      {/* Flash Message Modal */}\r\n      <Modal show={isFlash} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{flash.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {flash.type === 'success' ? (\r\n            <i className=\"fa fa-check-circle text-success fa-3x\"/>\r\n          ) : flash.type === 'error' ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : null}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {flash.message}\r\n          </p>  \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-success\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Branches Modal */}\r\n      <Modal show={isBranches.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">الفروع</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <p className=\"text-dark\">\r\n            {isBranches.branches.map((branch, index) => {\r\n              if (isBranches.branches.length === (index+1)){\r\n                return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>.</span>)\r\n              } else {\r\n                return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>, </span>)\r\n              }\r\n            })}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Buy Modal */}\r\n      <Modal show={isBuy.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تأكيد شراء العرض</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <div className=\"container mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n          <div className=\"container mt-2\">\r\n            <p className=\"font-weight-bold text-secondary\">\r\n              هل أنت متأكد من شراء هذا العرض ؟ \r\n            </p>\r\n            <p className=\"font-info text-info\">\r\n              سيتم خصم سعر العرض من رصيدك الحالي.\r\n            </p>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={handleBuy}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport PH from '../../static/images/icon.png'\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\n\r\nexport const Profile = () => {\r\n  \r\n  // User Information\r\n  const [user, setUser] = useState({});\r\n  const [userErrors, setUserErrors] = useState({});\r\n  \r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(false);\r\n  // Edit\r\n  const [edit, setEdit] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check If User is Logged-in\r\n    if (!localStorage.maidan_jwt_$m3){\r\n      setRedirect(true);\r\n    }\r\n    \r\n\r\n    // Fetch User Data\r\n    fetch('/api/user', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUser(data.user)\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setUserErrors({\r\n              FetchError: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة سحب بيانات الحساب, الرجاء إعادة تحديث الصفحة.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n\r\n  const loadUserInfo = () => {\r\n    return(\r\n\r\n      <div className=\"container\">\r\n\r\n          <div className=\"row justify-content-center\">\r\n\r\n            <div className=\"col-sm-5\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-font ml-2\"/>\r\n                الإسم الكامل : \r\n              </p>\r\n              <p className=\"font-weight-bold\">{user.fullname || 'غير محدد'}</p>\r\n            </div>\r\n\r\n            <div className=\"col-sm-5\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-signature ml-2\"/>\r\n                إسم المستخدم : \r\n              </p>\r\n              <p className=\"font-weight-bold\">{user.username}</p>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <hr/>\r\n\r\n          <div className=\"row justify-content-center\">\r\n\r\n            <div className=\"col-sm-5\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-at ml-2\"/> \r\n                البريد الإلكتروني : \r\n              </p>\r\n              <p className=\"font-weight-bold\">{user.email}</p>\r\n            </div>\r\n\r\n            <div className=\"col-sm-5\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-mobile-alt ml-2\"/> \r\n                رقم الجوال : \r\n              </p>\r\n              <p dir='ltr' className=\"font-weight-bold\">{user.phone}</p>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {\r\n            user.is_provider ? (\r\n              <div>\r\n                \r\n                <hr/>\r\n\r\n                <div className=\"row justify-content-center\">\r\n\r\n                  <div className=\"col-sm-12\">\r\n                    <p className=\"font-weight-bold text-muted\">\r\n                      <i className=\"far fa-building ml-2\"/> \r\n                      إسم الشركة : \r\n                    </p>\r\n                    <p className=\"font-weight-bold\">{user.company}</p>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n\r\n              </div>\r\n            ) : null\r\n          }\r\n\r\n          <hr/>\r\n\r\n          <div className=\"row justify-content-center\">\r\n\r\n            <div className=\"col-sm-4\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-globe-africa ml-2\"/> \r\n                الدولة : \r\n              </p>\r\n              <p className=\"font-weight-bold\">{user.country || 'غير محدد'}</p>\r\n            </div>\r\n\r\n            <div className=\"col-sm-4\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-city ml-2\"/> \r\n                المدينة : \r\n              </p>\r\n              <p className=\"font-weight-bold\">{user.city || 'غير محدد'}</p>\r\n            </div>\r\n\r\n            <div className=\"col-sm-4\">\r\n              <p className=\"font-weight-bold text-muted\">\r\n                <i className=\"fa fa-dollar-sign ml-2\"/> \r\n                الرصيد : \r\n              </p>\r\n              <p className=\"font-weight-bold\">{parseFloat(user.balance).toFixed(2)}$</p>\r\n            </div>\r\n\r\n          </div>\r\n\r\n\r\n          <div className=\"input-group justify-content-center mt-5\">\r\n            <button onClick={() => {setEdit(true)}} className=\"btn btn-md btn-outline-grey\">\r\n              تعديل الحساب\r\n            </button>\r\n          </div>\r\n\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(userErrors).length !== 0 && userErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {userErrors ? Object.entries(userErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect){\r\n    return <Redirect to=\"/\"/>\r\n  }\r\n\r\n  if (edit){\r\n    return <Redirect to=\"/settings\"/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container mt-5 pt-5\">\r\n        \r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-sm-10\">\r\n            \r\n            <div className=\"card bg-light-grey shadow-sm p-4\">\r\n              <span className=\"display-7 card-title text-right pr-5\">بيانات الحساب : </span>\r\n            \r\n              <div className=\"card-body text-center\">\r\n                \r\n                <div className=\"mt-2\">\r\n                  {loadErrors()}\r\n                </div>\r\n                \r\n                <div className=\"row mt-4\">\r\n\r\n                  <div className=\"col-sm-12\">\r\n                    <img src={localStorage.profile_img ? (`https://s3.us-east-2.amazonaws.com/maidancom/${localStorage.profile_img}`) : PH} alt=\"PI\" width=\"125\" height=\"125\" className=\"rounded-circle\"/>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-12\">\r\n                    <span className=\"display-8 card-text-head text-info\">{user.username}</span>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"mt-5\">\r\n                  {loadUserInfo()}\r\n                </div>\r\n              \r\n              </div>\r\n\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\n\r\n\r\nexport const Notifications = () => {\r\n\r\n  const [notifs, setNotifs] = useState({notifs: [], limit: 15});\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState({\r\n    redirect: false, to: null, flash: null\r\n  });\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetch('/api/notifications', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          setNotifs({\r\n            notifs: data.notifications,\r\n            limit: 15\r\n          });\r\n        } else {\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              to: '/',\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الرجاء تسجيل الدخول للإطلاع على الإشعارات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, []);\r\n\r\n  \r\n  const loadNotifs = () => {\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n\r\n    const notifs_patch = notifs.notifs && notifs.notifs.slice(0, notifs.limit);\r\n\r\n    return (\r\n      <tbody>\r\n        {\r\n          notifs_patch ? notifs_patch.map((notif, index) => {\r\n            return(\r\n              <tr className={notif.viewed ? \"bg-light-grey\" : \"\"} key={index}>\r\n                <th className=\"table-header text-center\">{index+1}</th>\r\n                <td className=\"table-header\">{notif.notification}</td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(notif.date)}</td>\r\n                <td className=\"table-header text-center\">\r\n                  {\r\n                    notif.viewed ? (\r\n                      <Link className=\"qsemh-orange\" to=\"#\" onClick={() => {markAsUnRead(notif.id)}}>\r\n                        <i title=\"تحديد كغير مقروء\" className=\"fa fa-eye-slash shadow-text-sm\"/>\r\n                      </Link>\r\n                    ) : (\r\n                      <Link className=\"qsemh-orange\" to=\"#\" onClick={() => {markAsRead(notif.id)}}>\r\n                        <i title=\"تحديد كمقروء\" className=\"fa fa-eye shadow-text-sm\"/>\r\n                      </Link>\r\n                    )\r\n                  }\r\n                </td>\r\n                <td className=\"table-header text-center\">\r\n                  <Link className=\"text-danger\" to=\"#\" onClick={() => {Delete(notif.id)}}>\r\n                    <i title=\"حذف الإشعار\" className=\"fa fa-trash-alt\"/>\r\n                  </Link>\r\n                </td>\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n\r\n  }\r\n\r\n  const markAsRead = async(id) => {\r\n    await fetch(`/api/notifications/${id}/read`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              to: '/',\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الرجاء تسجيل الدخول للإطلاع على الإشعارات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"SERVER\") {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'حدث خطأ, الرجاء المحاولة من جديد لاحقاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_YOURS') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'لا يمكنك تعديل إشعارات لا تنتمي لك.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'الإشعار غير موجود أو قد تم حذفه, الرجاء إعادة تحديث الصفحة.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n  \r\n  const markAsUnRead = async(id) => {\r\n    await fetch(`/api/notifications/${id}/unread`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              to: '/',\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الرجاء تسجيل الدخول للإطلاع على الإشعارات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"SERVER\") {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'حدث خطأ, الرجاء المحاولة من جديد لاحقاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_YOURS') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'لا يمكنك تعديل إشعارات لا تنتمي لك.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'الإشعار غير موجود أو قد تم حذفه, الرجاء إعادة تحديث الصفحة.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const Delete = async(id) => {\r\n    await fetch(`/api/notifications/${id}/delete`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              to: '/',\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الرجاء تسجيل الدخول للإطلاع على الإشعارات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"SERVER\") {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'حدث خطأ, الرجاء المحاولة من جديد لاحقاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_YOURS') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'لا يمكنك تعديل إشعارات لا تنتمي لك.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'الإشعار غير موجود أو قد تم حذفه, الرجاء إعادة تحديث الصفحة.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const markAllAsRead = async() => {\r\n    await fetch(`/api/notifications/all/read`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              to: '/',\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الرجاء تسجيل الدخول للإطلاع على الإشعارات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"SERVER\") {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'حدث خطأ, الرجاء المحاولة من جديد لاحقاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_YOURS') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'لا يمكنك تعديل إشعارات لا تنتمي لك.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'الإشعار غير موجود أو قد تم حذفه, الرجاء إعادة تحديث الصفحة.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const DeleteAll = async() => {\r\n    await fetch(`/api/notifications/all/delete`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          window.location.reload();\r\n        } else {\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              to: '/',\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الرجاء تسجيل الدخول للإطلاع على الإشعارات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"SERVER\") {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'حدث خطأ, الرجاء المحاولة من جديد لاحقاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_YOURS') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'لا يمكنك تعديل إشعارات لا تنتمي لك.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: 'الإشعار غير موجود أو قد تم حذفه, الرجاء إعادة تحديث الصفحة.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (notifs.limit < notifs.notifs.length){\r\n      let new_limit = notifs.limit + 50;\r\n      setNotifs({...notifs, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (notifs.limit > 50){\r\n      let new_limit = notifs.limit - 50;\r\n      setNotifs({...notifs, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: redirect.to,\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n\r\n      <div className=\"container text-center pb-5 mt-5 pt-5\">\r\n        <span className=\"display-7 qsemh-turq\">التنبيهات</span>\r\n        <hr/>\r\n        <div className=\"containet mt-2\">\r\n          {loadErrors()}\r\n        </div>\r\n        <div className=\"row mt-4 text-right\">\r\n          <div className=\"col-sm-10\">\r\n            <div className=\"table-responsive mt-4\">\r\n          \r\n              <table className=\"table table-sm table-bordered\">\r\n                <thead>\r\n                  <tr className=\"bg-light-grey\">\r\n                    <th className=\"font-weight-bold text-center\" scope=\"col\">#</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">الإشعار</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">تاريخ الإشعار</th>\r\n                    <th className=\"font-weight-bold text-center\" scope=\"col\">\r\n                      <Link className=\"qsemh-turq\" to=\"#\" onClick={markAllAsRead}>\r\n                        <i title=\"تحديد الكل كمقروء\" className=\"fa fa-eye shadow-text-sm fa-lg\"/>\r\n                      </Link>\r\n                    </th>\r\n                    <th className=\"font-weight-bold text-center\" scope=\"col\">\r\n                      <Link className=\"qsemh-turq\" to=\"#\" onClick={DeleteAll}>\r\n                        <i title=\"حذف الكل\" className=\"fa fa-trash-alt shadow-text-sm fa-lg\"/>\r\n                      </Link>\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                {loadNotifs()}\r\n              </table>\r\n              <div className=\"justify-content-center\">\r\n                {(notifs.groups && notifs.limit < notifs.notifs.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n                {notifs.limit > 15 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n          <div className=\"col-sm-2 mt-4\">\r\n            <div className=\"card shadow-none bg-light-grey\">\r\n              <div className=\"card-body font-smr\">\r\n                <p>بإمكانك تحديد الإشعارات كمقروءة.</p>\r\n                <p>بإمكانك حذف الإشعارات.</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}","import React, {useRef, useEffect, useState} from 'react';\r\n \r\n\r\n\r\nconst PayPalBtn = ({user_id, amount, fullname}) => {\r\n\r\n  const paypalRef = useRef(null);\r\n  const [progress, setProgress] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n    // Load Paypal Buttons\r\n\r\n    const HandleSuccessPayment = (order_id) => {\r\n\r\n      const reloadPage = () => {\r\n        window.location.reload()\r\n      }\r\n      \r\n      const AddBalance = async() => {\r\n        await fetch(`/api/user/balance/${user_id}`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            fullname: fullname,\r\n            amount: amount,\r\n            method: 'paypal',\r\n            verified: true,\r\n            order_id: order_id\r\n          })\r\n        }).then(resp => {\r\n          resp.json().then(data => {\r\n            if (resp.ok){\r\n              reloadPage();\r\n            } else {\r\n              if (data.code === 'NO_MATCH_ID'){\r\n                setErrors({\r\n                  ID: {\r\n                    name: 'خطأ',\r\n                    error: 'المستخدم غير موجود, الرجاء التواصل مع الإدارة لحل المشكلة.',\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_REQUEST'){\r\n                setErrors({\r\n                  Request: {\r\n                    name: 'الطلب',\r\n                    error: 'الطلب غير صحيح, الرجاء التواصل مع الإدارة في حالة تم خصم مبلغ من حسابك.',\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'MISSING_VALUES'){\r\n                setErrors({\r\n                  Values: {\r\n                    name: 'خطأ',\r\n                    error: 'بعض الخانات غير صحيحة, الرجاء التواصل مع الإدارة في حالة تم خصم المبلغ من حسابك.',\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_METHOD'){\r\n                setErrors({\r\n                  Method: {\r\n                    name: 'وسيلة الدفع',\r\n                    error: 'وسيلة الدفع غير صحيحة أو غير مكتملة, الرجاء التواصل مع الإدارة إذا قد تم خصم المبلغ من حسابك.',\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'SERVER'){\r\n                setErrors({\r\n                  Server: {\r\n                    name: 'خطأ',\r\n                    error: 'حدث خطأ أثناء التدقيق في عملية الدفع, الرجاء التواصل مع الإدارة.',\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              setTimeout(reloadPage, 7500);\r\n            }\r\n          })\r\n        })\r\n      }\r\n\r\n      AddBalance()\r\n    }\r\n\r\n    const renderBtns = () => {\r\n      window.paypal\r\n        .Buttons({\r\n          createOrder: (data, actions) => {\r\n            return actions.order.create({\r\n              purchase_units: [\r\n                {\r\n                  description: 'Qsemh Service Fees',\r\n                  amount: {\r\n                    currency_code: 'USD',\r\n                    value: parseFloat(amount),\r\n                  },\r\n                }\r\n              ],\r\n            });\r\n          },\r\n          onApprove: async (data, actions) => {\r\n            setProgress(true);\r\n            document.getElementById('PaypalBtns').hidden = true;\r\n            const order = await actions.order.capture();\r\n\r\n            if (order.status === 'COMPLETED'){\r\n              HandleSuccessPayment(order.id);\r\n            } else {\r\n              console.log(order.status);\r\n              setErrors({\r\n                Payment: {\r\n                  name: 'الدفع',\r\n                  error: 'لم تتم عملية الدفع بنجاح, الرجاء المحاولة من جديد, إذا كنت تعتقد ان هذا خطأ, الرجاء التواصل مع الإدارة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            \r\n          },\r\n          onError: e => {\r\n            console.log(e);\r\n            setErrors({\r\n              PaymentBtns: {\r\n                name: 'خطأ فني',\r\n                error: 'حدث خطأ في تكوين صفحة الدفع, الرجاء تحديث الصفحة. في حال تكرر الأمر, الرجاء التواصل مع الإدارة.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          },\r\n          onCancel: e => {\r\n            console.log('Cancel Payment ', e)\r\n          },\r\n          onClose: _ => {\r\n            console.log('Close Paypal.')\r\n          }\r\n        }).render(paypalRef.current);\r\n    }\r\n    \r\n    if (window.paypal) {\r\n      renderBtns();\r\n    }\r\n  }, [])\r\n  /*eslint-enable */\r\n  \r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return(\r\n    <div className=\"mt-4\">\r\n\r\n      <div className=\"containet mt-2\">\r\n        {loadErrors()}\r\n      </div>\r\n\r\n      <div id=\"PaypalBtns\" className=\"mt-2\" ref={paypalRef}/>\r\n\r\n      <p hidden={!progress} className=\"font-weight-bold\">قد تأخذ العملية بعض الوقت, الرجاء الإنتظار.</p>\r\n      <p hidden={!progress} className=\"font-weight-boldtext-info font-info\">في حال حدثت أي مشكلة, الرجاء التواصل مع الإدارة</p>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default PayPalBtn","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n// Icons\r\nimport PaypalIcon from '../../static/payment/PayPalBtn.jpg';\r\nimport MadaIcon from '../../static/payment/MadaBtn.jpg';\r\nimport BankIcon from '../../static/payment/BankBtn.jpg';\r\nimport PayPalBtn from './PayPalBtn';\r\n\r\n\r\n\r\n\r\nexport const Balance = () => {\r\n\r\n  \r\n  const [modalErrors, setModalErrors] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [balance, setBalance] = useState(0);\r\n\r\n  // Pull Form\r\n  const [pullstate, setPullState] = useState({paypal_email: null, amount: null});\r\n  // const [pullErrors, setPullErrors] = useState({});\r\n\r\n  // Modals\r\n  const [isFlash, setFlash] = useState(false);\r\n  const [flashMessage, setFlashMessage] = useState({});\r\n  \r\n  const [transferState, setTransferState] = useState({\r\n    user_id: null,\r\n    method: null,\r\n    verified: false\r\n  });\r\n  // Pay Using Bank Transfer\r\n  const [isBank, setBank] = useState(false);\r\n  // Pay Using Paypal\r\n  const [isPaypal, setPaypal] = useState(false);\r\n  const [confirmAmount, setConfirm] = useState(false);\r\n  \r\n  const [isMada, setMada] = useState(false);\r\n\r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check If User is Logged-in\r\n    if (!localStorage.maidan_jwt_$m3){\r\n      setRedirect(true);\r\n    }\r\n\r\n    fetch('/api/user/balance', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setTransferState({\r\n            user_id: data.user_id,\r\n            method: null,\r\n            verified: false\r\n          })\r\n          setBalance(data.balance)\r\n          setPullState({\r\n            amount: null,\r\n            paypal_email: data.email\r\n          })\r\n        } else {\r\n          setErrors({\r\n            FetchError: {\r\n              name: 'خطأ',\r\n              error: 'حدث خطأ أثناء محاولة سحب بيانات الرصيد, الرجاء إعادة تحديث الصفحة.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n\r\n    \r\n  }, [])\r\n\r\n\r\n  const handleTransferSubmit = (e) => {\r\n    e.preventDefault();\r\n    const TransferBalance = async() => {\r\n      await fetch(`/api/user/balance/${transferState.user_id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        }, body: JSON.stringify(transferState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            resetModals();\r\n            setFlash(true);\r\n            setFlashMessage({\r\n              title: 'طلب تعبئة الرصيد',\r\n              message: 'تم إرسال الطلب بنجاح, الرجاء إنتظار تأكيد التحويل, وسيتم التواصل معك في حال وجود مشكلة.',\r\n              state: 'success'\r\n            });\r\n          } else {\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              resetModals();\r\n              setFlash(true);\r\n              setFlashMessage({\r\n                title: 'المستخدم غير موجود',\r\n                message: 'المستخدم الحالي غير موجود, الرجاء إعادة تسجيل الدخول, والتواصل مع الإدارة في حالة تكرار الخطأ.',\r\n                state: 'error',\r\n                logout: true\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              resetModals();\r\n              setFlash(true);\r\n              setFlashMessage({\r\n                title: 'الطلب غير صحيح',\r\n                message: 'الطلب الذي تحاول إرساله غير صحيح, ويحتوي على بيانات خاطئة, الرجاء المحاولة لاحقاً.',\r\n                state: 'error'\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setModalErrors({\r\n                Values: {\r\n                  name: 'خطأ',\r\n                  error: 'الرجاء إدخال جميع الخانات المطلوبة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_METHOD'){\r\n              setModalErrors({\r\n                Method: {\r\n                  name: 'وسيلة الدفع',\r\n                  error: 'وسيلة الدفع غير صحيحة أو غير مكتملة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setModalErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء معالجة البيانات, الرجاء المحاولة من جديد لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              resetModals();\r\n              setFlash(true);\r\n              setFlashMessage({\r\n                title: 'المستخدم',\r\n                message: 'لقد تم إيقاف حسابك, الرجاء التواصل مع الإدارة.',\r\n                state: 'error',\r\n                logout: true\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    TransferBalance();\r\n  }\r\n\r\n  const handleTransferChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setTransferState({\r\n      ...transferState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const submitAmount = (e) => {\r\n    e.preventDefault();\r\n\r\n    const CheckUser = async() => {\r\n      const user = localStorage.maidan_user && JSON.parse(localStorage.maidan_user);\r\n      await fetch(`/api/user/${user.id}/is_active`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setConfirm(true);\r\n          } else {\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              resetModals();\r\n              setFlash(true);\r\n              setFlashMessage({\r\n                title: 'المستخدم غير موجود',\r\n                message: 'المستخدم الحالي غير موجود, الرجاء إعادة تسجيل الدخول, والتواصل مع الإدارة في حالة تكرار الخطأ.',\r\n                state: 'error',\r\n                logout: true\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              resetModals();\r\n              setFlash(true);\r\n              setFlashMessage({\r\n                title: 'المستخدم',\r\n                message: 'لقد تم إيقاف حسابك, الرجاء التواصل مع الإدارة.',\r\n                state: 'error',\r\n                logout: true\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    CheckUser();\r\n  }\r\n\r\n  const resetAmount = (e) => {\r\n    e.preventDefault();\r\n    setConfirm(false);\r\n  }\r\n\r\n  /* Methods */\r\n  \r\n  const BankMethod = () => {\r\n    setTransferState({\r\n      ...transferState,\r\n      method: 'bank',\r\n      verified: false\r\n    });\r\n    setBank(true);\r\n  }\r\n\r\n  const PaypalMethod = () => {\r\n    setTransferState({\r\n      ...transferState,\r\n      method: 'paypal',\r\n      verified: true\r\n    });\r\n    setPaypal(true);\r\n  }\r\n\r\n  const MadaMethod = () => {\r\n    setTransferState({\r\n      ...transferState,\r\n      method: 'mada',\r\n      verified: true\r\n    });\r\n    setMada(true);\r\n  }\r\n\r\n  const BalanceNPayment = () => {\r\n\r\n    return(\r\n      <div className=\"container\">\r\n        \r\n        <div className=\"row justify-content-center\">\r\n\r\n          <div className=\"col-sm-12\">\r\n            <span className=\"display-8 font-weight-normal text-muted\">الرصيد الحالي : </span>\r\n            <p className=\"font-weight-bold large-link mt-2\">\r\n              <i className=\"fa fa-dollar-sign ml-1\"/>\r\n              {parseFloat(balance).toFixed(2)}\r\n            </p>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"row justify-content-center\">\r\n\r\n          <div className=\"col-sm-12\">\r\n            <span className=\"display-8 font-weight-bold qsemh-turq\">\r\n              وسائل إضافة الرصيد : \r\n            </span>\r\n\r\n            <div className=\"row mt-5\">\r\n              <div className=\"col-sm-4\">\r\n                <button title=\"الدفع بالبايبال\" onClick={PaypalMethod} className=\"payBtn\">\r\n                  <img loading=\"lazy\" src={PaypalIcon} alt=\"الدفع بالبايبال\" className=\"img-fluid payment-icon\"/>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"col-sm-4 pt-mobile-lg\">\r\n                <button title=\"الدفع عن طريق البنك\" onClick={BankMethod} className=\"payBtn\">\r\n                  <img loading=\"lazy\" src={BankIcon} alt=\"الدفع عن طريق البنك\" className=\"img-fluid payment-icon\"/>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"col-sm-4 pt-mobile-lg\">\r\n                <button title=\"الدفع عبر مدى\" onClick={MadaMethod} className=\"payBtn\">\r\n                  <img loading=\"lazy\" src={MadaIcon} alt=\"الدفع عبر مدى\" className=\"img-fluid payment-icon\"/>\r\n                </button>\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  /* Methods */\r\n\r\n  const PullBalanceForm = () => {\r\n\r\n    const redirectToPaypal = () => {\r\n      window.open(\"https://www.paypal.com\")\r\n    }\r\n\r\n    return(\r\n      <form action=\"\">\r\n\r\n        <div className=\"container text-right\">\r\n\r\n          <p className=\"info-weight text-muted\">\r\n            <i className=\"fa fa-star-of-life fa-xs\"/> سيتم إرسال طلب تحويل رصيدك لحساب <Link to=\"#\" onClick={redirectToPaypal}>PayPal</Link>, قد تستغرق العملية بعض الوقت.\r\n          </p>\r\n\r\n          <div className=\"row mt-5\">\r\n\r\n            <div className=\"col-sm-12\">\r\n\r\n              <label htmlFor=\"paypal_email\" className=\"font-weight-bold text-muted\">حسابك في PayPal : </label>\r\n              <div className=\"input-group\">\r\n                <input dir='ltr' type=\"email\" id=\"paypal_email\" defaultValue={pullstate.paypal_email} className=\"form-control col-sm-8\"/>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <div className=\"col-sm-12 mt-4\">\r\n\r\n              <label htmlFor=\"amount\" className=\"font-weight-bold text-muted\">الرصيد المطلوب : </label>\r\n              <div className=\"input-group\">\r\n                <input type=\"number\" step=\"0.01\" min=\"0\" max={parseFloat(balance).toFixed(2)} defaultValue=\"0.00\" className=\"form-control col-sm-8\" aria-describedby=\"amountHelpInline\"/>\r\n              </div>\r\n              <p id=\"amountHelpInline\" className=\"font-weight-light font-info text-muted\">\r\n                  إن أردت جزءا من رصيدك فقط، حدد المبلغ الذي تريد أن يتم إرساله لحسابك في PayPal. أبقه 0 لإرسال رصيدك كاملاً.\r\n              </p>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className=\"input-group mt-2\">\r\n            <button className=\"btn btn-md btn-primary\">إرسال طلب</button>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadModalErrors = () => {\r\n    if (Object.keys(modalErrors).length !== 0 && modalErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {modalErrors ? Object.entries(modalErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    if (flashMessage.logout){\r\n      localStorage.removeItem('maidan_jwt_$m3');\r\n      localStorage.removeItem('maidan_user');\r\n      localStorage.removeItem('logged');\r\n      localStorage.removeItem('maidan_user_access');\r\n      localStorage.removeItem('profile_img');\r\n      sessionStorage.clear();\r\n      window.location.href = window.location.origin\r\n    }\r\n    // Reset States & Errors\r\n    setTransferState({\r\n      ...transferState,\r\n      fullname: null,\r\n      email: null,\r\n      bank_account: null,\r\n      amount: null,\r\n      method: null,\r\n      verified: false\r\n    });\r\n    setModalErrors({});\r\n    setFlashMessage({});\r\n\r\n    // Reset Modals\r\n    setConfirm(false);\r\n    setPaypal(false);\r\n    setFlash(false);\r\n    setBank(false);\r\n    setMada(false);\r\n  }\r\n\r\n  if (redirect){\r\n    return <Redirect to=\"/\"/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n\r\n      <div className=\"container mt-5 pt-5\">\r\n\r\n      <div className=\"row justify-content-center\">\r\n        \r\n        <div className=\"col-sm-10\">\r\n\r\n          <div className=\"card bg-light-grey text-center shadow-sm p-4\">\r\n            <span className=\"display-8 card-title text-right pr-2\">رصيد الحساب : </span>\r\n\r\n            <div className=\"card-body text-center\">\r\n                \r\n              <div className=\"mt-2\">\r\n                {loadErrors()}\r\n              </div>\r\n\r\n              <div className=\"mt-5\">\r\n                {BalanceNPayment()}\r\n              </div>\r\n                \r\n            </div>\r\n\r\n          </div>\r\n        \r\n        </div>\r\n\r\n        <div className=\"col-sm-10 mt-3\">\r\n          \r\n          <div className=\"card bg-light-grey text-center shadow-sm p-4\">\r\n            <span className=\"display-8 card-title text-right pr-2\">سحب الرصيد عبر البايبال : </span>\r\n\r\n            <div className=\"card-body text-center\">\r\n                \r\n              <div className=\"mt-2\">\r\n                {/* {loadFormErrors()} */}\r\n              </div>\r\n\r\n              <div className=\"mt-5\">\r\n                {PullBalanceForm()}\r\n              </div>\r\n                \r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n      </div>\r\n\r\n      {/* Flash Message Modal */}\r\n      <Modal show={isFlash} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{flashMessage.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {flashMessage.state === 'success' ? (\r\n            <i className=\"fa fa-check-circle text-success fa-3x\"/>\r\n          ) : flashMessage.state === 'error' ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : null}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {flashMessage.message}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-primary\" onClick={resetModals}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Bank Payment Modal */}\r\n      <Modal show={isBank} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إضافة رصيد عبر التحويل البنكي</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n        \r\n          <div className=\"container\">\r\n            <p className=\"font-info font-weight-bold text-muted\">\r\n              <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n              الرجاء تحويل المبلغ (قيمة الرصيد الذي ترغب بإضافته) على الحساب التالي :\r\n            </p>\r\n            <p className=\"font-info font-weight-bold text-dark\">\r\n              000000000000000\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n\r\n          <form id=\"mainForm\" onSubmit={handleTransferSubmit}>\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-10\">\r\n                  <label htmlFor=\"fullname\" className=\"font-weight-bold\">* الإسم الكامل : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleTransferChange} required id=\"fullname\" type=\"text\" placeholder=\"إسم صاحب الحساب\" className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-3\">\r\n                  <label htmlFor=\"email\" className=\"font-weight-bold\">البريد الإلكتروني : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleTransferChange} id=\"email\" type=\"email\" placeholder=\"البريد الإلكتروني (إختياري)\" className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                  <p className=\"font-sm text-muted\">\r\n                    <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                    الرجاء إدخال بريد إلكتروني للتواصل في حال حدوث مشكلة.\r\n                    (سيتم التواصل عبر البريد الإلكتروني أوالجوال المسجل في حال لم يتم الإدخال)\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-2\">\r\n                  <label htmlFor=\"bank_account\" className=\"font-weight-bold\">* رقم الحساب : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleTransferChange} required id=\"bank_account\" type=\"text\" placeholder=\"رقم الحساب\" className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-3\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* قيمة التحويل : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleTransferChange} required id=\"amount\" type=\"number\" min=\"0\" step=\"0.01\" placeholder=\"قيمة التحويل (الرصيد)\" className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button type=\"submit\" form=\"mainForm\" variant=\"success\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* PayPal Payment Modal */}\r\n      <Modal show={isPaypal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إضافة رصيد عبر البايبال</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n        \r\n          <div className=\"container\">\r\n            <p className=\"font-info font-weight-bold text-muted\">\r\n              <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n              الرجاء إدخال كمية الرصيد ($) التي تريدها أولاً.\r\n            </p>\r\n          </div>\r\n          \r\n          <form onSubmit={submitAmount}>\r\n            <div className=\"container text-right mt-4\">\r\n\r\n              <div className=\"row\">\r\n\r\n                <div className=\"col-sm-10\">\r\n                  <label htmlFor=\"fullname\" className=\"font-weight-bold\">الإسم الكامل : </label>\r\n                  <div className=\"input-group\">\r\n                    <input disabled={confirmAmount} onChange={handleTransferChange} id=\"fullname\" type=\"text\" placeholder=\"الإسم الكامل (إختياري)\" className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-3\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* الرصيد : </label>\r\n                  <div className=\"input-group\">\r\n                    <input disabled={confirmAmount} onChange={handleTransferChange} required id=\"amount\" type=\"number\" min=\"0\" step=\"0.01\" placeholder=\"الرصيد (الكمية $)\" className=\"form-control col-sm-12\"/>\r\n                    <div className=\"input-group-append\">\r\n                      <button disabled={confirmAmount} type=\"submit\" className={\"form-control btn-md \" + (confirmAmount ? \"btn-outline-grey\" : \"btn-outline-info\")}>تأكيد</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n              <p hidden={!confirmAmount} className=\"font-info mt-2\"><Link to=\"#\" onClick={resetAmount}>تراجع</Link></p>\r\n\r\n            </div> \r\n          </form>\r\n          \r\n          <div className=\"container\">\r\n            {confirmAmount ? <PayPalBtn user_id={transferState.user_id} amount={transferState.amount} fullname={transferState.fullname} /> : null}\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Mada Payment Modal */}\r\n      <Modal show={isMada} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إضافة رصيد عبر بوابة مدى</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container\">\r\n            <p className=\"font-info text-primary\">\r\n              <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n              سيتم إعادة توجيهك لصفحة الدفع المؤمنة الخاصة بمدى.\r\n            </p>\r\n          </div>\r\n        \r\n          <div className=\"container mt-4\">\r\n            <button onClick={() => {window.location = \"https://secure.telr.com/gateway/ql/MaidanHerokuapp_123683.html\"}} className=\"btn btn-md btn-success font-weight-bold\">\r\n              بوابة الدفع.\r\n            </button>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport LogoD from '../../static/images/logo-d.png'\r\n\r\nimport QRCode from 'qrcode.react';\r\nimport copy from 'copy-to-clipboard'\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n\r\nexport const MyCoupons = () => {\r\n\r\n  const [state, setState] = useState({coupons: null, limit: 15})\r\n  const [errors, setErrors] = useState({});\r\n  \r\n  // Redirect\r\n  const [redirect, setRedirect] = useState({\r\n    redirect: false, to: null, flash: null\r\n  });\r\n\r\n  // Flash Modal\r\n  const [isFlash, setFlashModal] = useState(false);\r\n  const [flashState, setFlashState] = useState({});\r\n  \r\n  const [modalErrors, setModalErrors] = useState({});\r\n\r\n  // QRCode Modal\r\n  const [isQRCode, setQRCodeModal] = useState(false);\r\n  const [QRCodeState, setQRCode] = useState({});\r\n\r\n  // Gifting Modal\r\n  const [isGift, setGiftModal] = useState(false);\r\n  const [giftState, setGiftState] = useState({coupon_id: null, to_user_id: null});\r\n  const [searchUsers, setSearchUsers] = useState({});\r\n\r\n  // Selling Modal\r\n  const [isSell, setSellModal] = useState(false);\r\n  const [sellState, setSellState] = useState({coupon_id: null, coupon_price: null});\r\n\r\n  // Cancel Modal\r\n  const [offerState, setOfferState] = useState({coupon_id: null});\r\n  const [cancelModal, setCancelModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    // Check If User is Logged-in\r\n    if (!localStorage.maidan_jwt_$m3){\r\n      setRedirect({\r\n        redirect: true,\r\n        to: '/'\r\n      });\r\n    }\r\n\r\n    // Fetch Current User Coupons\r\n    fetch('/api/user/coupons', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setState({\r\n            coupons: data.coupons,\r\n            limit: 15\r\n          });\r\n        } else {\r\n          if (data.code === 'NO_COUPONS'){\r\n            setErrors({\r\n              NotFound: {\r\n                name: 'القسائم',\r\n                error: 'لا تملك قسائم حالياً, بإمكانك المطالبة بقسيمة ',\r\n                link: {\r\n                  id: 'GROUPS_PAGE',\r\n                  text: 'من هنا'\r\n                },\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n  }, [])\r\n\r\n\r\n  const OpenBranchMap = (e) => {\r\n    e.preventDefault();\r\n    window.open(e.target.id)\r\n  }\r\n\r\n  const getQRCode = (coupon) => {\r\n    setQRCode(coupon);\r\n    setQRCodeModal(true);\r\n  }\r\n\r\n  const getStatus = (status) => {\r\n\r\n    let statuses = {\r\n      available: [\r\n        'text-success', 'ساري المفعول'\r\n      ],\r\n      onhold: [\r\n        'text-grey', 'معلق'\r\n      ],\r\n      expired: [\r\n        'text-danger', 'منتهي الصلاحية'\r\n      ],\r\n      used: [\r\n        'text-warning', 'مستخدم'\r\n      ],\r\n      canceled: [\r\n        'text-dark', 'ملغي'\r\n      ]\r\n    }\r\n\r\n    return statuses[status]\r\n  }\r\n\r\n  /* Gifting */\r\n\r\n  const handleGift = (e) => {\r\n    e.preventDefault();\r\n\r\n    setGiftState({\r\n      ...giftState,\r\n      coupon_id: e.target.id,\r\n    });\r\n    setGiftModal(true);\r\n  }\r\n\r\n  const fetchUsersResualts = async(e) => {\r\n    var value = e.target && e.target.value;\r\n    setGiftState({\r\n      ...giftState,\r\n      to_user_id: null\r\n    });\r\n    await fetch('/api/user/search', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({searchQuery: value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setModalErrors({});\r\n          if (data.length === 0 && value){\r\n            setModalErrors({\r\n              users: {\r\n                name: 'المستخدمين',\r\n                error: 'لا يوجد مستخدم يطابق البحث المدخل',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          setSearchUsers({\r\n            users: data.users,\r\n            length: data.length\r\n          });\r\n        } else {\r\n          setModalErrors({\r\n            users: {\r\n              name: 'خطأ',\r\n              error: 'حدث خطأ أثناء محاولة البحث عن المستخدم, الرجاء المحاولة من جديد لاحقاً.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleUserSelection = (id) => {\r\n\r\n    // Remove Color from old Selected, and remove Selected Sign.\r\n    var oldElemnt = document.getElementById(`user-card-${giftState.to_user_id}`);\r\n    var oldSelectedElement = document.getElementById(`user-select-${giftState.to_user_id}`);\r\n    if (oldElemnt){\r\n      oldElemnt.classList.remove('bg-light-grey');\r\n      oldElemnt.classList.add('bg-white');\r\n    }\r\n    if (oldSelectedElement){\r\n      oldSelectedElement.classList.remove('fa-check-circle')\r\n    }\r\n\r\n    // Changing Color of new Selected, and add Selected Sign.\r\n    var newElemnt = document.getElementById(`user-card-${id}`);\r\n    var newSelectedElemnt = document.getElementById(`user-select-${id}`);\r\n    newElemnt.classList.remove('bg-white');\r\n    newElemnt.classList.add('bg-light-grey');\r\n    newSelectedElemnt.classList.add('fa-check-circle')\r\n\r\n    // Adding Selected User as `to_user_id` in `giftState`\r\n    setGiftState({\r\n      ...giftState,\r\n      to_user_id: id\r\n    });\r\n  }\r\n\r\n  const handleSendGift = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SendGift = async() => {\r\n      await fetch('/api/user/coupons/gift', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(giftState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            resetModals();\r\n            setFlashState({\r\n              type: 'success',\r\n              title: 'إهداء القسيمة',\r\n              message: 'لقد تم إهداء القسيمة بنجاح!'\r\n            });\r\n            setFlashModal(true);\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                to: '/',\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                to: '/',\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                to: '/',\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setModalErrors({\r\n                request: {\r\n                  name: 'الإهداء',\r\n                  error: 'حدث خطأ, لا يمكن معالجة طلبك حالياً, الرجاء المحاولة من جديد لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setModalErrors({\r\n                request: {\r\n                  name: 'الإهداء',\r\n                  error: 'الرجاء تحديد المستخدم الذي تريد إهداء القسيمة له.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_COUPON'){\r\n              resetModals();\r\n              setFlashState({\r\n                type: 'error',\r\n                title: 'إهداء القسيمة',\r\n                message: 'القسيمة غير موجود أو قد تم حذفه, سيتم إعادة تحديث الصفحة.'\r\n              });\r\n              setFlashModal(true);\r\n            }\r\n            if (data.code === 'NOT_YOURS'){\r\n              setModalErrors({\r\n                not_yours: {\r\n                  name: 'القسيمة',\r\n                  error: 'القسيمة ملك لشخص آخر, لا يمكنك إهداء قسيمة لا تملكه.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_STATUS'){\r\n              setModalErrors({\r\n                coupon_status: {\r\n                  name: 'القسيمة',\r\n                  error: 'القسيمة غير صالح أو مستخدم أو موقوف حالياً, لا يمكنك إرسال القسائم الغير سارية المفعول.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_USER'){\r\n              resetModals();\r\n              setFlashState({\r\n                type: 'error',\r\n                title: 'إهداء القسيمة',\r\n                message: 'المستخدم غير موجود, أو قد تم حذفة, سيتم إعادة تحديث الصفحة.'\r\n              });\r\n              setFlashModal(true);\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    SendGift();\r\n  }\r\n\r\n  /* Gifting */\r\n\r\n  /* Selling */\r\n\r\n  const handleSell = (coupon) => {\r\n    \r\n    setSellState({\r\n      coupon_id: coupon.id,\r\n      coupon_price: coupon.coupon_price\r\n    });\r\n\r\n    setSellModal(true);\r\n  }\r\n\r\n  const handleSellChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setSellState({\r\n      ...sellState,\r\n      [e.target.id]: e.target.value\r\n    });\r\n  }\r\n\r\n  const handleSellSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SellCoupon = async() => {\r\n      await fetch(`/api/user/coupons/${sellState.coupon_id}/sell`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(sellState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            resetModals();\r\n            setFlashState({\r\n              type: 'success',\r\n              title: 'عرض القسيمة',\r\n              message: 'لقد تم عرض القسيمة للبيع بنجاح!'\r\n            });\r\n            setFlashModal(true);\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                to: '/',\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                to: '/',\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                to: '/',\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setModalErrors({\r\n                request: {\r\n                  name: 'عرض القسيمة',\r\n                  error: 'حدث خطأ, لا يمكن معالجة طلبك حالياً, الرجاء المحاولة من جديد لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setModalErrors({\r\n                price: {\r\n                  name: 'عرض القسيمة',\r\n                  error: 'الرجاء إدخال السعر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_COUPON'){\r\n              resetModals();\r\n              setFlashState({\r\n                type: 'error',\r\n                title: 'عرض القسيمة',\r\n                message: 'القسيمة غير موجود أو قد تم حذفه, سيتم إعادة تحديث الصفحة.'\r\n              });\r\n              setFlashModal(true);\r\n            }\r\n            if (data.code === 'LOWER_PRICE'){\r\n              setModalErrors({\r\n                price: {\r\n                  name: 'عرض القسيمة',\r\n                  error: 'الرجاء إدخال السعر بشكل صحيح, ووفق الشروط.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_YOURS'){\r\n              setModalErrors({\r\n                not_yours: {\r\n                  name: 'القسيمة',\r\n                  error: 'القسيمة ملك لشخص آخر, لا يمكنك عرض قسيمة لا تملكه.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_STATUS'){\r\n              setModalErrors({\r\n                coupon_status: {\r\n                  name: 'القسيمة',\r\n                  error: 'القسيمة غير صالح أو مستخدم أو موقوف حالياً, لا يمكنك عرض القسائم الغير سارية المفعول.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (parseInt(sellState.price) > parseInt(sellState.coupon_price)){\r\n      setModalErrors({\r\n        price: {\r\n          name: 'السعر',\r\n          error: 'السعر أكبر من القيمة الفعلية للقسيمة.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } else {\r\n      SellCoupon();\r\n    }\r\n  }\r\n\r\n  /* Selling */\r\n\r\n  /* Cancel Offers */\r\n\r\n  const handleCancel = (coupon_id) => {\r\n    setCancelModal(true);\r\n    setOfferState({coupon_id: coupon_id});\r\n  }\r\n\r\n  const CancelOffer = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/user/offers/${offerState.coupon_id}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setState({\r\n            ...state,\r\n            coupons: data.coupons\r\n          })\r\n          resetModals();\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة إلغاء العرض, الرجاء المحاولة لاحقاً',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'FINISHED_OFFER'){\r\n            setErrors({\r\n              Offer: {\r\n                name: 'العرض',\r\n                error: 'لقد تم شراء العرض بالفعل, لا يمكنك إلغاء العروض المكتملة.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              ID: {\r\n                name: 'معرف العرض',\r\n                error: 'لا يوجد عرض يطابق المعرف, الرجاء التأكد من العرض.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_COUPON'){\r\n            setErrors({\r\n              Coupon: {\r\n                name: 'العرض',\r\n                error: 'لا يوجد قسيمة يطابق المدرج في العرض!',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /* Cancel Offers */\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  const loadCoupons = () => {\r\n    const coupons_patch = state.coupons && state.coupons.slice(0, state.limit)\r\n\r\n    return (\r\n      <tbody>\r\n        {\r\n          coupons_patch ? coupons_patch.map((coupon, index) => {\r\n            let status = getStatus(coupon.coupon_status)\r\n            return(\r\n              <tr key={index}>\r\n                \r\n                <th className=\"table-header\">#{index+1}</th>\r\n                <th className=\"table-header\">\r\n                  <Link className=\"text-primary\" to={`/ads/${coupon.group_id}`}>{coupon.group_id}</Link>\r\n                </th>\r\n                <td className=\"table-header\">{coupon.group_company}</td>\r\n                <td className=\"table-header\">\r\n                  {coupon.group_branches.map((branch, index) => {\r\n                    if (coupon.group_branches.length === (index+1)){\r\n                      return(<span key={index}><Link className=\"text-primary\" to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>.</span>)\r\n                    } else {\r\n                      return(<span key={index}><Link className=\"text-primary\" to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>, </span>)\r\n                    }\r\n                  })}\r\n                </td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(coupon.expire_date)}</td>\r\n                <td className=\"table-header\">{coupon.coupon_price}$</td>\r\n                <td className={`table-header ${status[0]}`}>{status[1]}</td>\r\n                {\r\n                  coupon.coupon_status === 'available' ? (\r\n                      <td>\r\n                        <button onClick={() => {getQRCode(coupon)}} className=\"btn font-btn btn-sm btn-outline-success\">عرض</button>\r\n                      </td>\r\n                  ) : (\r\n                      <td className=\"table-header text-danger\">\r\n                        غ.م\r\n                      </td>\r\n                  )\r\n                }\r\n                {\r\n                  coupon.coupon_status === 'available' ? (\r\n                    <td>\r\n                      <button id={coupon.id} onClick={handleGift} className=\"btn font-btn btn-sm btn-outline-orange\">إهداء</button>\r\n                    </td>\r\n                  ) : (\r\n                    <td className=\"table-header text-danger\">\r\n                      غ.م\r\n                    </td>\r\n                  )\r\n                }\r\n                {\r\n                  coupon.coupon_status === 'available' ? (\r\n                    <td>\r\n                      <button onClick={() => {handleSell(coupon)}} className=\"btn font-btn btn-sm btn-outline-turq\">بيع</button>\r\n                    </td>\r\n                  ) : coupon.coupon_status === 'onhold' ? (\r\n                    <td>\r\n                      <button onClick={() => {handleCancel(coupon.id)}} className=\"btn font-btn btn-sm btn-warning\">إلغاء العرض</button>\r\n                    </td>\r\n                  ) : (\r\n                    <td className=\"table-header text-danger\">\r\n                      غ.م\r\n                    </td>\r\n                  )\r\n                }\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const handleErrorEvent = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.id === 'GROUPS_PAGE'){\r\n      setRedirect({\r\n        redirect: true,\r\n        to: '/ads'\r\n      })\r\n    }\r\n  }\r\n  \r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error} {e[1].link ? (<Link to=\"#\" id={e[1].link.id} onClick={handleErrorEvent}>{e[1].link.text}</Link>) : null}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadModalErrors = () => {\r\n    if (Object.keys(modalErrors).length !== 0 && modalErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {modalErrors ? Object.entries(modalErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error} {e[1].link ? (<Link to=\"#\" id={e[1].link.id} onClick={handleErrorEvent}>{e[1].link.text}</Link>) : null}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if ((state.limit < state.coupons.length)){\r\n      let new_limit = state.limit + 15;\r\n      setState({...state, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    \r\n    if ((state.limit > 15)){\r\n      let new_limit = state.limit - 15;\r\n      setState({...state, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const reloadPage = () => {\r\n    window.location.reload();\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: redirect.to,\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset Modal States\r\n    setSearchUsers({});\r\n    setGiftState({\r\n      coupon_id: null,\r\n      to_user_id: null\r\n    });\r\n    setQRCode({});\r\n    setSellState({\r\n      coupon_id: null,\r\n      coupon_price: null\r\n    })\r\n    setOfferState({coupon_id: null})\r\n    // Reset Modals\r\n    setQRCodeModal(false);\r\n    setGiftModal(false);\r\n    setSellModal(false);\r\n    setCancelModal(false);\r\n    \r\n    // Reset Errors\r\n    setModalErrors({});\r\n  }\r\n\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container mt-5 pt-5\">\r\n\r\n        <div className=\"container mt-2\">\r\n          {loadErrors()}\r\n        </div>\r\n\r\n        <div className=\"container text-center mt-5\">\r\n          <span className=\"display-7\">قسائمي</span>\r\n          <hr/>\r\n          <div className=\"table-responsive\">\r\n\r\n            <table className=\"table table-bordered mt-4\">\r\n              <thead>\r\n                <tr className=\"bg-light-grey\">\r\n                  <th  className=\"table-header\" scope=\"col\">ID</th>\r\n                  <th className=\"table-header\" scope=\"col\"># الإعلان</th>\r\n                  <th className=\"table-header\" scope=\"col\">الشركة</th>\r\n                  <th className=\"table-header\" scope=\"col\">الفروع</th>\r\n                  <th className=\"table-header\" scope=\"col\">تاريخ إنتهاء القسيمة</th>\r\n                  <th className=\"table-header\" scope=\"col\">قيمة القسيمة</th>\r\n                  <th className=\"table-header\" scope=\"col\">حالة القسيمة</th>\r\n                  <th className=\"table-header\" scope=\"col\">QRCode</th>\r\n                  <th className=\"table-header\" scope=\"col\">إهداء</th>\r\n                  <th className=\"table-header\" scope=\"col\">بيع</th>\r\n                </tr>\r\n              </thead>\r\n              {loadCoupons()}\r\n            </table>\r\n          </div>\r\n          <div className=\"justify-content-center\">\r\n            {(state.coupons && state.limit < state.coupons.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n            {state.limit > 15 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    \r\n      {/* Flash Modal */}\r\n      <Modal show={isFlash} onHide={reloadPage}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{flashState.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {flashState.type === 'success' ? (\r\n            <i className=\"fa fa-check-circle text-success fa-2x\"/>\r\n          ) : (\r\n            <i className=\"fa fa-times-circle text-danger fa-2x\"/>\r\n          )}\r\n          <p className=\"font-weight-bold text-muted mt-2\">\r\n            {flashState.message}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={reloadPage}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    \r\n      {/* QRCode Modal */}\r\n      <Modal show={isQRCode} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إستخدام القسيمة : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n          \r\n          \r\n          <div className=\"container text-center border mt-2\">\r\n            <img className=\"coupon-img pt-3\" src={LogoD} alt=\"brand\"/>\r\n            \r\n            <div className=\"font-weight-bold row mt-4 ml-2\">\r\n\r\n              <div className=\"col-6 text-left\">\r\n                الــرمــز:\r\n              </div>\r\n              <div className=\"col-6 text-right\">\r\n                <Link to=\"#\" onClick={() => {copy(QRCodeState.qr_code)}} title=\"إضغط لنسخ الرمز\">{QRCodeState.qr_code}</Link>\r\n              </div>\r\n\r\n              <div className=\"col-6 text-left mt-2\">\r\n                الشركة:\r\n              </div>\r\n              <div className=\"col-6 text-right mt-2\">\r\n                {QRCodeState.group_company}\r\n              </div>\r\n\r\n              <div className=\"col-6 text-left mt-2\">\r\n                القـيمـة:\r\n              </div>\r\n              <div className=\"col-6 text-right mt-2\">\r\n                {QRCodeState.coupon_price}$\r\n              </div>\r\n\r\n            </div>\r\n            \r\n            <div className=\"container mt-4\">\r\n              <QRCode size={152} level=\"Q\" renderAs=\"svg\" className=\"img-fluid\" value={`${window.location.origin}/admin/redeem?qrcode=${QRCodeState.qr_code}`}/>\r\n            </div>\r\n            <div className=\"container mt-4 pb-4\">\r\n              <b className=\"text-danger\">صلاحية القسيمة</b>\r\n              <br/>\r\n              <b dir='ltr' className=\"text-danger\">{getDate(QRCodeState.expire_date)}</b>\r\n            </div>\r\n          </div>\r\n\r\n          <p className=\"text-muted font-info mt-2\">\r\n            <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n            عند زيارتك لفروع الشركة المعلنة المذكورة, الرجاء تزويدهم بالرمز التعريفي أو الـ QRCode للحصول على الخصم.\r\n          </p>\r\n        \r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Gifting Modal */}\r\n      <Modal show={isGift} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إهداء القسيمة</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n          <span className=\"font-weight-bold text-muted\">الرجاء إدخال إسم المستخدم أو البريد الإلكتروني وتحديده : </span>\r\n\r\n          <div className=\"container mt-4\">\r\n\r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-sm-8\">\r\n\r\n                <div className=\"input-group\">\r\n                  <input id=\"users\" onChange={fetchUsersResualts} type=\"text\" placeholder=\"إسم المستخدم/البريد\" className={\"form-control col-sm-12 \" + (modalErrors['users'] ? 'is-invalid' : '')}/>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n          \r\n          <div className=\"container mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n          \r\n          {\r\n            searchUsers.users ? (\r\n              \r\n              <div className=\"container mt-4 text-right\">\r\n                <span className=\"font-weight-bold\">المستخدمين ({searchUsers.length}) : </span>\r\n                {searchUsers.users.map(user => (\r\n                  <Link key={user.id} to=\"#\" onClick={() => {handleUserSelection(user.id)}}>\r\n                    <div id={`user-card-${user.id}`} className=\"card shadow bg-white mt-2\">\r\n                      <div className=\"card-body\">\r\n                        <i id={`user-select-${user.id}`} className=\"fa text-info float-left\"/>\r\n                        <p className=\"card-text font-weight-bold\">\r\n                          إسم المستخدم : {user.username}\r\n                        </p>\r\n                        <p className=\"card-text font-weight-bold\">\r\n                          البريد الإلكتروني : {user.email}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n              \r\n            ) : null\r\n          }\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"orange\" onClick={handleSendGift}>\r\n              إهداء\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Selling Modal */}\r\n      <Modal show={isSell} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">بيع القسيمة</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <form onSubmit={handleSellSubmit} id=\"mainForm\">\r\n            \r\n            <div className=\"container\">\r\n              <p className=\"text-muted font-info font-weight-bold\">\r\n                <i className=\"fa fa-star-of-life fa-xs\"/> السعر يجب أن لا يتجاوز قيمة القسيمة الفعلية ({sellState.coupon_price}$)\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-2\">\r\n              {loadModalErrors()}\r\n            </div>\r\n\r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-sm-8 text-right\">\r\n                \r\n                <label htmlFor=\"price\" className=\"font-weight-bold\">* السعر :</label>\r\n                <div className=\"input-group\">\r\n                  <input required id=\"price\" onChange={handleSellChange} type=\"number\" min={0} max={sellState.coupon_price} step=\"0.01\" placeholder=\"السعر\" className={\"form-control col-sm-12 \" + (modalErrors['price'] ? 'is-invalid' : '')}/>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button type=\"submit\" form=\"mainForm\" variant=\"turq\">\r\n              بيع\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n          \r\n      {/* Cancel Modal */}\r\n      <Modal show={cancelModal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إلغاء عرض القسيمة ({offerState.coupon_id}#)</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"text-warning font-weight-bold\">\r\n              هل أنت متأكد من إلغاء العرض ؟\r\n            </p>\r\n\r\n            <p className=\"text-info font-info\">\r\n              سيتم إعادة القسيمة لحسابك.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"warning\" onClick={CancelOffer}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n    </div>\r\n  )\r\n}","import React, { useEffect, useState } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nexport const Activation = (props) => {\r\n  const URLQuery = new URLSearchParams(props.location.search)\r\n\r\n  const token = URLQuery.get(\"token\") || null;\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [modalErrors, setModalErrors] = useState({});\r\n  const [status, setStatus] = useState({\r\n    status: 'waiting',\r\n    msg: 'الرجاء الإنتظار, حتى يتم التفعيل',\r\n    type: 'dark'\r\n  });\r\n\r\n  // Modal\r\n  const [isModal, setModal] = useState(false);\r\n  const [email, setEmail] = useState(null);\r\n\r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n    fetch('/api/activate', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({token: token})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setStatus({\r\n            status: 'success',\r\n            msg: 'تم التفعيل بنجاح!',\r\n            type: 'success'\r\n          });\r\n        } else {\r\n          if (data.code === 'INVALID_REQUEST'){\r\n            setStatus({\r\n              status: 'error',\r\n              msg: 'حدث خطأ أثناء محاولة التفعيل!',\r\n              type: 'danger'\r\n            });\r\n            setErrors({\r\n              InvalidRequest: {\r\n                name: 'خطأ',\r\n                error: 'الطلب الذي تحاول إرسالة غير صحيح!',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_TOKEN'){\r\n            setStatus({\r\n              status: 'error',\r\n              msg: 'حدث خطأ أثناء محاولة التفعيل!',\r\n              type: 'danger'\r\n            });\r\n            setErrors({\r\n              InvalidToken: {\r\n                name: 'خطأ',\r\n                error: 'رمز التفعيل غير صحيح, لإرسال رمز آخر الرجاء ',\r\n                link: {\r\n                  text: 'الضغط هنا',\r\n                  id: 'ActivationLink'\r\n                },\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'EXPIRED_TOKEN'){\r\n            setStatus({\r\n              status: 'error',\r\n              msg: 'حدث خطأ أثناء محاولة التفعيل!',\r\n              type: 'danger'\r\n            });\r\n            setErrors({\r\n              InvalidToken: {\r\n                name: 'خطأ',\r\n                error: 'رمز التفعيل منتهي الصلاحية, لإرسال رمز آخر الرجاء ',\r\n                link: {\r\n                  text: 'الضغط هنا',\r\n                  id: 'ActivationLink'\r\n                },\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'USED_TOKEN'){\r\n            setStatus({\r\n              status: 'error',\r\n              msg: 'الحساب مفعل بالفعل!',\r\n              type: 'info'\r\n            });\r\n            setErrors({\r\n              InvalidToken: {\r\n                name: 'تنبيه',\r\n                error: 'لقد تم بالفعل تفعيل الحساب المرتبط بهذا الرمز وهذا البريد الإلكتروني',\r\n                type: 'info'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'WRONG_EMAIL'){\r\n            setStatus({\r\n              status: 'error',\r\n              msg: 'حدث خطأ أثناء محاولة التفعيل!',\r\n              type: 'danger'\r\n            });\r\n            setErrors({\r\n              InvalidToken: {\r\n                name: 'خطأ',\r\n                error: 'البريد الإلكتروني غير صحيح, الرجاء التأكد منه والمحاولة من جديد لاحقاً.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, []);\r\n  /*eslint-enable */\r\n\r\n  const redirectOnTime = () => {\r\n    setStatus({...status, status: 'redirect'})\r\n  }\r\n\r\n  const ReSendActivationLink = async() => {\r\n    await fetch('/api/activation', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({email: email, hostname: window.location.origin})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setModalErrors({\r\n            success: {\r\n              name: 'كود التفعيل',\r\n              error: 'تم إرسال كود التفعيل بنجاح!',\r\n              type: 'success'\r\n            }\r\n          });\r\n          document.getElementById('activationBtn').disabled = true;\r\n          setStatus({\r\n            status: 'success'\r\n          })\r\n        } else {\r\n          if (data.code === 'NO_EMAIL'){\r\n            setModalErrors({\r\n              email: {\r\n                name: 'البريد الإلكتروني',\r\n                error: 'البريد الإلكتروني الذي أدخلته غير مسجل, الرجاء التسجيل أولاً.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACTIVATED'){\r\n            setModalErrors({\r\n              activated: {\r\n                name: 'البريد الإلكتروني',\r\n                error: 'لقد تم تفعيل حساب المستخدم بالفعل, بإمكانك تسجيل الدخول.',\r\n                type: 'info'\r\n              }\r\n            })\r\n            setTimeout(redirectOnTime, 5000)\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Resend Activation To Given Email\r\n    ReSendActivationLink();\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  const handleErrorEvent = (e) => {\r\n    e.preventDefault()\r\n\r\n    if (e.target.id === 'ActivationLink'){\r\n      setModal(true);\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error} {e[1].link ? (<Link to=\"#\" id={e[1].link.id} onClick={handleErrorEvent}>{e[1].link.text}</Link>) : null}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadModalErrors = () => {\r\n    if (Object.keys(modalErrors).length !== 0 && modalErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {modalErrors ? Object.entries(modalErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error} {e[1].link ? (<Link to=\"#\" id={e[1].link.id} onClick={handleErrorEvent}>{e[1].link.text}</Link>) : null}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = (e) => {\r\n    e.preventDefault();\r\n\r\n    setModal(false);\r\n    setEmail(null);\r\n  }\r\n\r\n\r\n  if (status.status === 'success'){\r\n    setTimeout(redirectOnTime, 1500);\r\n  }\r\n\r\n  if (status.status === 'redirect'|| !token){\r\n    return <Redirect to=\"/\"/>\r\n  }\r\n\r\n  return (\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container mt-5 pt-5\">\r\n        \r\n        <div className=\"card mt-5 text-center shadow-sm\">\r\n\r\n          <span className=\"display-7 qsemh-turq\">تفعيل الحساب</span>\r\n\r\n          <div className=\"card-body\">\r\n            <div className=\"mt-4\">\r\n              {loadErrors()}\r\n            </div>\r\n            <div className=\"mt-5\">\r\n              <p className={`display-8 text-${status.type}`}>{status.msg}</p>\r\n              {status.status === 'waiting' ? (\r\n                <div className=\"spinner-border mt-4\" role=\"status\">\r\n                  <span className=\"sr-only\">Loading...</span>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n      \r\n      {/* Resend Activation Modal */}\r\n      <Modal show={isModal} onHide={resetModals}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>إعادة إرسال رمز التفعيل</Modal.Title>\r\n          <Link to=\"#\" onClick={resetModals}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n\r\n          <div className=\"mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n\r\n          <form id=\"mainForm\" onSubmit={handleSubmit}>\r\n            <div className=\"row\">\r\n\r\n              <p className=\"text-muted font-info mr-2\">\r\n                <i className=\"fa fa-star-of-life fa-xs\"/> سيتم إرسال رمز التفعيل إلى البريد الإلكتروني.\r\n              </p>\r\n\r\n              <div className=\"col-sm-12 text-right\">\r\n                <label htmlFor=\"email\" className=\"ml-sm-4 font-weight-bold\">البريد الإلكتروني المسجل : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleChange} required id=\"email\" type=\"email\" placeholder=\"البريد الإلكتروني\" className={\"form-control col-sm-8 \" + (modalErrors.email ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </form>\r\n\r\n          <Modal.Footer className=\"text-center mt-4\">\r\n\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button type='submit' variant=\"success\" form=\"mainForm\" id=\"activationBtn\">\r\n              تأكيد\r\n            </Button>\r\n\r\n          </Modal.Footer>\r\n\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport PH from '../../static/images/icon.png'\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n// Phone Input\r\nimport { getCountryCallingCode } from 'react-phone-number-input';\r\n\r\n\r\nexport const Settings = () => {\r\n\r\n  // Basic Data\r\n  const [basic, setBasicData] = useState([]);\r\n\r\n  // Modal Edits\r\n  const [modalState, setModalState] = useState();\r\n  const [modalErrors, setModalErrors] = useState({});\r\n  const [tokenForm, setTokenForm] = useState(false);\r\n\r\n  // Modals Set\r\n  const [flashModal, setFlashModal] = useState({view: false, state: null, message: null, logout: false})\r\n  const [isProvider, setEditProvider] = useState(false);\r\n  const [isEmail, setEditEmail] = useState(false);\r\n  const [isPhone, setEditPhone] = useState(false);\r\n  const [resetPasswModal, setResetPassw] = useState(false);\r\n  const [resetPasswState, setResetPasswState] = useState({\r\n    email: null,\r\n    old_password: null,\r\n    password: null,\r\n    confirm_password: null\r\n  })\r\n  \r\n  // User Information\r\n  const [user, setUser] = useState({});\r\n  const [userErrors, setUserErrors] = useState({});\r\n  \r\n  // Redirect\r\n  const [redirect, setRedirect] = useState(false);\r\n\r\n  // Edits\r\n  const [state, setState] = useState({\r\n    fullname: null,\r\n    username: null,\r\n    country: null,\r\n    city: null\r\n  })\r\n\r\n  const [cities, setCities] = useState();\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n\r\n    // Pre-Phone Selector\r\n    $(\"pre_phone\").click(function(){\r\n      var selText = $(this).text();\r\n      $(this).parents('.btn-group').find('.dropdown-toggle').html(selText+' <span class=\"caret\"></span>');\r\n    });\r\n\r\n    // Check If User is Logged-in\r\n    if (!localStorage.maidan_jwt_$m3){\r\n      setRedirect(true);\r\n    }\r\n    \r\n    // Fetch User Data\r\n    fetch('/api/user', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUser(data.user)\r\n          setState({\r\n            fullname: data.user.fullname,\r\n            username: data.user.username,\r\n            country: data.user.country,\r\n            city: data.user.city\r\n          })\r\n          // Assing Basic Data\r\n          let basicData = JSON.parse(localStorage.maidan_elements);\r\n          let country = data.user.country;\r\n          setBasicData(basicData);\r\n          \r\n          // Loop Through Data\r\n          for (let i = 0; i < basicData.length; i++){\r\n            // Check if Key === 'country'\r\n            if (basicData[i].key === 'country'){\r\n              if (basicData[i].values.country.ar === country){\r\n                // Setting Base Cities For Current Country\r\n                setCities(basicData[i].values.cities.ar)\r\n              }\r\n            }\r\n          }\r\n          \r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setUserErrors({\r\n              FetchError: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة سحب بيانات الحساب, الرجاء إعادة تحديث الصفحة.',\r\n                type: 'danger'\r\n              }\r\n            });\r\n            localStorage.clear();\r\n            window.location.reload();\r\n          }\r\n        }\r\n      })\r\n    })\r\n    \r\n  }, [])\r\n  /*eslint-enable */  \r\n\r\n  /* Changing State */\r\n  const handleChange = (e) => {\r\n    e.preventDefault()\r\n\r\n    // Reset Error\r\n    setErrors({})\r\n\r\n    if (e.target.id === 'country'){\r\n      for (let i = 0; i < basic.length; i++){\r\n        if (basic[i].key === 'country'){\r\n          if (basic[i].values.country.ar === e.target.value){\r\n            setCities(\r\n              basic[i].values.cities.ar\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    setState({\r\n      ...state,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  } \r\n\r\n  /* Fullname */\r\n  const submitFullname = (e) => {\r\n    e.preventDefault();\r\n\r\n    const UpdateFullname = async() => {\r\n      await fetch(`/api/user/${user.id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({fullname: state.fullname})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            // Delete Connected Error\r\n            let CurErrors = errors;\r\n            delete CurErrors['fullname']\r\n            setErrors(CurErrors)\r\n\r\n            setUser(data.user);\r\n            setState({\r\n              ...state,\r\n              [data.updated.id]: data.updated.value\r\n            });\r\n            document.getElementById('fullname').value = ''\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تحديث بيانات المستخدم, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'معرف المستخدم',\r\n                  error: `المعرف ${user.id} غير موجود, الرجاء التواصل مع الإدارة للتوصل لحل للمشكلة.`,\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_NAME'){\r\n              setErrors({\r\n                fullname: {\r\n                  name: 'الإسم',\r\n                  error: 'الإسم المدخل يحتوي على أحرف غير مناسبة, الرجاء الإكتفاء بالحروف الإنجيليزية أو العربية فقط!',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setErrors({\r\n                Request: {\r\n                  name: 'طلب التعديل',\r\n                  error: 'طلب التعديل لا يمكن أن يكون فارغ, الرجاء إدخال بيانات التغيير.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setErrors({\r\n                name: 'خطأ',\r\n                error: 'واحد أو أكثر من الخانات فارغة, الرجاء إدخالها.',\r\n                type: 'warning'\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    UpdateFullname();\r\n  }\r\n  /* Fullname */\r\n\r\n  /* Country & City */ \r\n  const submitLocation = (e) => {\r\n    e.preventDefault();\r\n\r\n    const UpdateLocation = async() => {\r\n      await fetch(`/api/user/${user.id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({country: state.country, city: state.city})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUser(data.user);\r\n            setState({\r\n              ...state,\r\n              [data.updated.country_id]: data.updated.country_value,\r\n              [data.updated.city_id]: data.updated.city_value,\r\n            });\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تحديث بيانات المستخدم, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'معرف المستخدم',\r\n                  error: `المعرف ${user.id} غير موجود, الرجاء التواصل مع الإدارة للتوصل لحل للمشكلة.`,\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setErrors({\r\n                Request: {\r\n                  name: 'طلب التعديل',\r\n                  error: 'طلب التعديل لا يمكن أن يكون فارغ, الرجاء إدخال بيانات التغيير.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setErrors({\r\n                name: 'خطأ',\r\n                error: 'واحد أو أكثر من الخانات فارغة, الرجاء إدخالها.',\r\n                type: 'warning'\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n    UpdateLocation();\r\n  }\r\n  /* Country & City */ \r\n  \r\n\r\n  /* Image */\r\n  const ImageChange = (e) => {\r\n    let fileToUpload = e.target.files\r\n      let id = e.target.id\r\n\r\n      if (e.target.value) {\r\n\r\n        // Reset File Errors\r\n        setErrors({});\r\n        \r\n        // Image Size Validation\r\n        let reader = new FileReader();\r\n\r\n        reader.readAsDataURL(fileToUpload[0]);\r\n\r\n        reader.onload = function(e) {\r\n\r\n          let image = new Image();\r\n          image.src = e.target.result;\r\n\r\n          // Validate Width & Height\r\n\r\n          image.onload = function() {\r\n            let height = this.height;\r\n            let width = this.width;\r\n\r\n            if (width < 100 || height < 75){\r\n              setErrors({\r\n                ...errors,\r\n                ImageSize: {\r\n                  name: 'الصورة',\r\n                  error: `أبعاد الصورة (${fileToUpload[0].name}) غير مناسبة, الرجاء رفع صورة بالإبعاد التالية عل الأقل (75*100)`,\r\n                  type: 'warning'\r\n                }\r\n              });\r\n              document.getElementById(id).value = ''\r\n            } else if (width > 300 || height > 300) {\r\n              setErrors({\r\n                ...errors,\r\n                ImageSize: {\r\n                  name: 'الصورة',\r\n                  error: `أبعاد الصورة أكبر من الحد المسموح, الرجاء إختيار صورة أصغر من (300*300)`,\r\n                  type: 'warning'\r\n                }\r\n              });\r\n              document.getElementById(id).value = ''\r\n            }\r\n          }\r\n\r\n        }\r\n      }\r\n  }\r\n\r\n  const submitImage = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData(e.target);\r\n\r\n      const UploadImages = async() => {\r\n        await fetch(`/api/user/image/${user.id}`, {\r\n          method: 'PATCH',\r\n          body: formData\r\n        }).then(resp => {\r\n          resp.json().then(data => {\r\n            if (resp.ok){\r\n              localStorage.setItem('profile_img', data.key);\r\n              window.location.reload();\r\n            } else {\r\n              document.getElementById('UploadBtn').disabled = false;\r\n              if (data.code === 'SERVER'){\r\n                setErrors({\r\n                  ...errors,\r\n                  ImageUpload: {\r\n                    name: 'الصورة',\r\n                    error: 'حدث خطأ أثناء محاولة رفع الصور للسيرفر, الرجاء المحاولة من جديد.',\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'NO_MATCH_ID'){\r\n                setErrors({\r\n                  ID: {\r\n                    name: 'معرف المستخدم',\r\n                    error: `المعرف ${user.id} غير موجود, الرجاء التواصل مع الإدارة للتوصل لحل للمشكلة.`,\r\n                    type: 'warning'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_REQUEST'){\r\n                setErrors({\r\n                  ...errors,\r\n                  ImageUpload: {\r\n                    name: 'الصورة',\r\n                    error: 'يجب عليك تحديد الصور أولاً قبل محاولة رفعها.',\r\n                    type: 'warning'\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          })\r\n        })\r\n      }\r\n      document.getElementById('UploadBtn').disabled = true;\r\n      UploadImages();\r\n  }\r\n  /* Image */\r\n\r\n\r\n  /* Modals */\r\n\r\n  // Logout User After Successful Main Change\r\n  const LogoutUser = async() => {\r\n    await fetch('/api/logout', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setErrors({});\r\n          localStorage.removeItem('maidan_jwt_$m3');\r\n          localStorage.removeItem('maidan_user');\r\n          localStorage.removeItem('logged');\r\n          localStorage.removeItem('maidan_user_access');\r\n          localStorage.removeItem('profile_img');\r\n          setRedirect(true);\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Logout: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة تسجيل الخروج, الرجاء المحاولة من جديد لاحقاً.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleModalChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Reset Errors\r\n    setModalErrors({});\r\n\r\n    if (e.target.id === 'pre_phone'){\r\n      document.getElementById('pre_phone_selector').innerHTML = e.target.name;\r\n      setModalState({\r\n        ...modalState,\r\n        [e.target.id]: e.target.name\r\n      })\r\n    } else {\r\n      setModalState({\r\n        ...modalState,\r\n        [e.target.id]: e.target.value\r\n      })\r\n    }\r\n  }\r\n  \r\n  // Email\r\n\r\n  const sendResetEmailToken = (e) => {\r\n    e.preventDefault()\r\n    \r\n    const SendToken = async() => {\r\n      await fetch('/api/user/send_reset_email_token', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({email: modalState.email})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setTokenForm(true);\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setModalErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تحديث بيانات المستخدم, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_EMAIL'){\r\n              setModalErrors({\r\n                email: {\r\n                  name: 'البريد الإلكتروني',\r\n                  error: 'البريد الإلكتروني مسجل بالفعل, الرجاء إختيار بريد الكتروني آخر',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setModalErrors({\r\n                Request: {\r\n                  name: 'طلب التعديل',\r\n                  error: 'طلب التعديل لا يمكن أن يكون فارغ, الرجاء إدخال بيانات التغيير.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    SendToken();\r\n  }\r\n\r\n  const validateResetEmailToken = (e) => {\r\n    e.preventDefault();\r\n\r\n    const ValidateToken = async() => {\r\n      await fetch(`/api/user/verify_reset_email_token/${user.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          email: modalState.email,\r\n          token: modalState.token\r\n        })\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setEditEmail(false);\r\n            setFlashModal({\r\n              view: true,\r\n              logout: true,\r\n              state: 'success',\r\n              title: 'تغيير البريد الإلكتروني',\r\n              message: 'تم تغيير البريد الإلكتروني بنجاح!, سيتم تسجيل خروجك لتثبيت التغييرات.'\r\n            })\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setEditEmail(false);\r\n              setFlashModal({\r\n                view: true,\r\n                state: 'failure',\r\n                title: 'تغيير البريد الإلكتروني',\r\n                message: 'حدث خطأ أثناء محاولة تغيير البريد الإلكتروني, الرجاء المحاولة لاحقاً.'\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_EMAIL'){\r\n              setEditEmail(false);\r\n              setFlashModal({\r\n                view: true,\r\n                state: 'failure',\r\n                title: 'تغيير البريد الإلكتروني',\r\n                message: 'لا يمكن تغيير البريد الإلكتروني حالياً, الرجاء المحاولة لاحقاً.'\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_TOKEN'){\r\n              setModalErrors({\r\n                resetToken: {\r\n                  name: 'كود التأكيد',\r\n                  error: 'كود التأكيد المدخل غير صحيح, الرجاء إدخال كود آخر',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'EXPIRED_TOKEN'){\r\n              setEditEmail(false);\r\n              setFlashModal({\r\n                view: true,\r\n                state: 'failure',\r\n                title: 'تغيير البريد الإلكتروني',\r\n                message: 'لقد إنتهت صلاحية كود التأكيد, الرجاء المحاولة من جديد.'\r\n              })\r\n            }\r\n            if (data.code === 'USED_TOKEN'){\r\n              setModalErrors({\r\n                resetToken: {\r\n                  name: 'كود التأكيد',\r\n                  error: 'لقد تم إستخدام هذا الكود بالفعل, الرجاء إدخال كود آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setEditEmail(false);\r\n              setFlashModal({\r\n                view: true,\r\n                state: 'failure',\r\n                title: 'تغيير البريد الإلكتروني',\r\n                message: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء محاولة إرسال طلب آخر!'\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setModalErrors({\r\n                ID: {\r\n                  name: 'معرف المستخدم',\r\n                  error: `المعرف ${user.id} غير موجود, الرجاء التواصل مع الإدارة للتوصل لحل للمشكلة.`,\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    ValidateToken();\r\n  }\r\n\r\n  // Phone\r\n\r\n  // const sendResetPhoneToken = (e) => {\r\n  //   e.preventDefault();\r\n  // }\r\n\r\n  // const validateResetPhoneToken = (e) => {\r\n  //   e.preventDefault();\r\n  // }\r\n\r\n  // Turn To Provider\r\n\r\n  const ValidateNoOpenTickets = async(e) => {\r\n    e.preventDefault();\r\n    await fetch(`/api/user/check_tickets/${user.id}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setEditProvider(true);\r\n        } else {\r\n          if (data.code === 'SERVER') {\r\n            setFlashModal({\r\n              view: true,\r\n              state: 'error',\r\n              title: 'طلب التحويل',\r\n              message: 'حدث خطأ أثناء محاولة إرسال الطلب, الرجاء المحاولة من جديد لاحقاً'\r\n            });\r\n          } else if (data.code === 'NO_MATCH_ID') {\r\n            setFlashModal({\r\n              view: true,\r\n              logout: true,\r\n              state: 'error',\r\n              title: 'المستخدم',\r\n              message: 'المستخدم غير مسجل في السيرفر, الرجاء التواصل مع الإدارة!'\r\n            });\r\n          } else {\r\n            setFlashModal({\r\n              view: true,\r\n              state: 'error',\r\n              title: 'طلب التحويل',\r\n              message: 'المستخدم الحالي قام بالفعل بإرسال طلب تحويل, الرجاء الإنتظار ريثما يتم الرد على الطلب.'\r\n            });\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleDownload = (e) => {\r\n    e.preventDefault();\r\n\r\n    const GetDownloadLink = async(keys) => {\r\n      await fetch('/api/panel/files/download', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({keys: keys})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            for (let i=0; i<data.download_links.length; i++){\r\n              window.open(data.download_links[i])\r\n            }\r\n          } else {\r\n            if (data.code === 'NO_KEYS'){\r\n              setModalErrors({\r\n                flash: {\r\n                  type: 'warning',\r\n                  name: 'تحميل الملفات',\r\n                  error: 'لا توجد ملفات لتحميلها حالياً, الرجاء التواصل مع الإدارة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setModalErrors({\r\n                flash: {\r\n                  type: 'danger',\r\n                  name: 'تحميل الملفات',\r\n                  error: 'حدث خطأ أثناء محاولة تحميل الملفات, الرجاء المحاولة لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n              ].includes(data.code)) {\r\n              setModalErrors({\r\n                flash: {\r\n                  type: 'danger',\r\n                  name: 'تحميل الملفات',\r\n                  error: 'أنت لا تملك صلاحيات تحميل الملفات'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    // Get Required Files From LocalStorage\r\n    var files = JSON.parse(localStorage.maidan_files);\r\n    let downloads = []\r\n    for (let i=0; i < files.length; i++){\r\n      // Check for Providers Agreement Files\r\n      if (files[i].key === 'providersAgreement'){\r\n        downloads.push(files[i].file_name)\r\n      }\r\n    }\r\n\r\n    // Download All Files\r\n    GetDownloadLink(downloads);\r\n\r\n  }\r\n\r\n  const handleMainAdImageChange = (e) => {\r\n    let target_file = e.target;\r\n    let fileToUpload = target_file.files;\r\n    let id = e.target.id;\r\n\r\n    document.getElementById('submitBtn').disabled = true;\r\n\r\n    if (e.target.value) {\r\n      // Reset Image Preview On Selected Image\r\n\r\n      // Reset File Errors\r\n      let prev_errors = {...modalErrors};\r\n      delete prev_errors['ImageSize']\r\n      setModalErrors(prev_errors)\r\n      \r\n      // Image Size Validation\r\n      let reader = new FileReader();\r\n\r\n      reader.readAsDataURL(fileToUpload[0]);\r\n\r\n      reader.onload = function(e) {\r\n\r\n        let image = new Image();\r\n        image.src = e.target.result;\r\n\r\n        // Validate Width & Height\r\n\r\n        image.onload = function() {\r\n          let height = this.height;\r\n          let width = this.width;\r\n\r\n          if (width < 800 || height < 450){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageSize: {\r\n                name: 'الصورة',\r\n                error: `أبعاد الصورة (${fileToUpload[0].name}) غير مناسبة, الرجاء رفع صورة بالإبعاد التالية عل الأقل (450*800)`,\r\n                type: 'warning'\r\n              }\r\n            });\r\n            document.getElementById(id).value = ''\r\n          } else if (width > 1280 || height > 1280) {\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageSize: {\r\n                name: 'الصورة',\r\n                error: `أبعاد الصورة أكبر من الحد المسموح, الرجاء إختيار صورة أصغر من (1280*1280)`,\r\n                type: 'warning'\r\n              }\r\n            });\r\n            document.getElementById(id).value = ''\r\n          } else {\r\n            document.getElementById('ImageuploadStatus').innerHTML = \"في إنتظار رفع الصورة\"\r\n            document.getElementById('ImageuploadStatus').classList.remove(\"text-success\");\r\n            document.getElementById('ImageuploadStatus').classList.add(\"text-primary\");\r\n            document.getElementById('adImageLabel').innerHTML = fileToUpload[0].name;\r\n            submitMainAdImage();\r\n          }\r\n        }\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  const submitMainAdImage = async() => {\r\n    let fileToUpload = document.getElementById('adImage').files[0];\r\n    var data = new FormData();\r\n    data.append('adImage', fileToUpload);\r\n   \r\n    await fetch('/api/user/files', {\r\n      method: 'POST',\r\n      body: data\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          document.getElementById('ImageuploadStatus').innerHTML = \"تم رفع الصورة بنجاح\"\r\n          // document.getElementById('ImageuploadStatus').classList.remove('text-primary')\r\n          document.getElementById('ImageuploadStatus').classList.add('text-success')\r\n          setModalState({\r\n            ...modalState,\r\n            adImage: data.key\r\n          })\r\n        } else {\r\n          document.getElementById('ImageuploadStatus').innerHTML = \"فشل رفع الصورة\"\r\n          // document.getElementById('ImageuploadStatus').classList.remove('text-primary')\r\n          document.getElementById('ImageuploadStatus').classList.add('text-danger')\r\n          if (data.code === 'NOT_LOGGED'){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageUpload: {\r\n                name: 'الصورة',\r\n                error: 'يجب عليك تسجيل دخولك أولاً',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageUpload: {\r\n                name: 'الصورة',\r\n                error: 'حدث خطأ أثناء محاولة رفع الصور للسيرفر, الرجاء المحاولة من جديد.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setModalErrors({\r\n              ID: {\r\n                name: 'معرف المستخدم',\r\n                error: `المعرف ${user.id} غير موجود, الرجاء التواصل مع الإدارة للتوصل لحل للمشكلة.`,\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_REQUEST'){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageUpload: {\r\n                name: 'الصورة',\r\n                error: 'يجب عليك تحديد الصور أولاً قبل محاولة رفعها.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    document.getElementById('submitBtn').disabled = false;\r\n  }\r\n\r\n  const handlePDFFileChange = (e) => {\r\n    let target_file = e.target;\r\n    let fileToUpload = target_file.files[0];\r\n\r\n    document.getElementById('submitBtn').disabled = true;\r\n\r\n    if (e.target.value) {\r\n      // Reset Image Preview On Selected Image\r\n\r\n      // Reset File Errors\r\n      let prev_errors = {...modalErrors};\r\n      delete prev_errors['pdfFile']\r\n      setModalErrors(prev_errors)\r\n      \r\n      var filename = fileToUpload.name;\r\n      var ex = filename.split('.').reverse()[0];\r\n      let acceptedTypes = ['application/pdf', 'image/png', 'image/jpg'];\r\n      let acceptedEx = ['zip', 'rar', 'pdf', 'png', 'jpg'];\r\n      if (acceptedTypes.includes(fileToUpload.type) || acceptedEx.includes(ex)){\r\n        document.getElementById('pdfFileLabel').innerHTML = filename;\r\n        submitPDFFile();\r\n        document.getElementById('PDFuploadStatus').classList.remove(\"text-success\");\r\n        document.getElementById('PDFuploadStatus').classList.add(\"text-primary\");\r\n        document.getElementById('PDFuploadStatus').innerHTML = \"في إنتظار رفع الملف\"\r\n      } else {\r\n        setModalErrors({\r\n          pdfFile: {\r\n            name: 'الملف',\r\n            error: 'الملف الذي تحاول رفعه غير مدعوم, الرجاء رفع ملف بأحدى الصيغ التالية (zip/rar/pdf/png/jpg)',\r\n            type: 'danger'\r\n          }\r\n        })\r\n      }\r\n      \r\n    }\r\n  }\r\n\r\n  const submitPDFFile = async() => {\r\n    let fileToUpload = document.getElementById('pdfFile').files[0];\r\n    var data = new FormData();\r\n    data.append('formPDF', fileToUpload)\r\n    \r\n    await fetch('/api/user/files', {\r\n      method: 'POST',\r\n      body: data\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          document.getElementById('PDFuploadStatus').innerHTML = \"تم رفع الملف بنجاح\"\r\n          // document.getElementById('PDFuploadStatus').classList.remove('text-primary')\r\n          document.getElementById('PDFuploadStatus').classList.add('text-success')\r\n          setModalState({\r\n            ...modalState,\r\n            pdfFile: data.key\r\n          })\r\n        } else {\r\n          document.getElementById('PDFuploadStatus').innerHTML = \"فشل رفع الملف\"\r\n          // document.getElementById('PDFuploadStatus').classList.remove('text-primary')\r\n          document.getElementById('PDFuploadStatus').classList.add('text-danger')\r\n          if (data.code === 'NOT_LOGGED'){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageUpload: {\r\n                name: 'الصورة',\r\n                error: 'يجب عليك تسجيل دخولك أولاً',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageUpload: {\r\n                name: 'الصورة',\r\n                error: 'حدث خطأ أثناء محاولة رفع الصور للسيرفر, الرجاء المحاولة من جديد.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setModalErrors({\r\n              ID: {\r\n                name: 'معرف المستخدم',\r\n                error: `المعرف ${user.id} غير موجود, الرجاء التواصل مع الإدارة للتوصل لحل للمشكلة.`,\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_REQUEST'){\r\n            setModalErrors({\r\n              ...errors,\r\n              ImageUpload: {\r\n                name: 'الصورة',\r\n                error: 'يجب عليك تحديد الصور أولاً قبل محاولة رفعها.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    document.getElementById('submitBtn').disabled = false;\r\n  }\r\n\r\n  const handleProviderChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setModalState({\r\n      ...modalState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const handleProviderSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SubmitTicket = async() => {\r\n      await fetch(`/api/user/upgrade_to_provider/${user.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify(modalState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setEditProvider(false);\r\n            setFlashModal({\r\n              view: true,\r\n              state: 'success',\r\n              title: 'طلب التحويل',\r\n              message: 'تم إرسال الطلب بنجاح, سيتم مراجعة الطلب قريباً.'\r\n            });\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setEditProvider(false);\r\n              setFlashModal({\r\n                view: true,\r\n                state: 'error',\r\n                title: 'طلب التحويل',\r\n                message: 'حدث خطأ أثناء محاولة إرسال الطلب, الرجاء المحاولة من جديد لاحقاً'\r\n              });\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setEditProvider(false);\r\n              setFlashModal({\r\n                view: true,\r\n                logout: true,\r\n                state: 'error',\r\n                title: 'المستخدم',\r\n                message: 'المستخدم غير مسجل في السيرفر, الرجاء التواصل مع الإدارة!'\r\n              });\r\n            }\r\n            if (data.code === 'OPEN_TICKET'){\r\n              setEditProvider(false);\r\n              setFlashModal({\r\n                view: true,\r\n                state: 'error',\r\n                title: 'طلب التحويل',\r\n                message: 'المستخدم الحالي قام بالفعل بإرسال طلب تحويل, الرجاء الإنتظار ريثما يتم الرد على الطلب.'\r\n              });\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setModalErrors({\r\n                Request: {\r\n                  name: 'الطلب',\r\n                  error: 'الطلب الذي تحاول إرسالع غير صحيح, الرجاء محاولة إرسال طلب آخر',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setModalErrors({\r\n                Values: {\r\n                  name: 'الطلب',\r\n                  error: 'بعض الخانات غير صحيحة أو فارغة, الرجاء تعبئة جميع الخانات',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    SubmitTicket();\r\n  }\r\n\r\n  /* Reset Password */\r\n\r\n  const handleResetPasswChange = (e) => {\r\n    e.preventDefault();\r\n    // Set Reset State\r\n    setResetPasswState({\r\n      ...resetPasswState,\r\n      [e.target.id]: e.target.value\r\n    });\r\n    // Reset Errors State\r\n    setModalErrors({});\r\n  }\r\n\r\n  const handleResetPasswSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const ResetPassword = async() => {\r\n      await fetch(`/api/user/${user.id}/resetPassword`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(resetPasswState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            resetModals();\r\n            setFlashModal({\r\n              view: true,\r\n              logout: true,\r\n              state: 'success',\r\n              title: 'تغيير كلمة المرور',\r\n              message: 'تم تغيير كلمة المرور بنجاح!, سيتم تسجيل خروجك لتثبيت التغييرات.'\r\n            });\r\n          } else {\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setModalErrors({\r\n                Request: {\r\n                  name: \"خطأ\",\r\n                  error: \"الرجاء إدخال البيانات أولاً\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setModalErrors({\r\n                Values: {\r\n                  name: \"خطأ\",\r\n                  error: \"بعض الخانات غير مدخلة, الرجاء إدخال جميع البيانات.\",\r\n                  type: \"warning\"\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'WRONG_PASSWORD'){\r\n              setModalErrors({\r\n                old_password: {\r\n                  name: \"كلمة المرور القديمة\",\r\n                  error: \"كلمة المرور القديمة غير صحيحة, الرجاء إدخال كلمة المرور من جديد.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_USER'){\r\n              resetModals();\r\n              setFlashModal({\r\n                view: true,\r\n                logout: true,\r\n                state: 'error',\r\n                title: 'الحساب غير موجود.',\r\n                message: 'المستخدم غير موجود, أو قد تم حذفه أو إيقافة, سيتم تسجيل الخروج للحساب.'\r\n              });\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setModalErrors({\r\n                error: {\r\n                  name: \"خطأ\",\r\n                  error: \"حدث خطأ ما, الرجاء المحاولة من جديد لاحقاً.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n              \r\n            }\r\n            \r\n          }\r\n        })\r\n      })\r\n\r\n    }\r\n\r\n    if (resetPasswState.password.length < 8){\r\n      setModalErrors({\r\n        ...modalErrors,\r\n        password: {\r\n          name: 'كلمة المرور',\r\n          error: 'يجب أن تتكون كلمة المرور من 8 حروف على الأقل.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } \r\n    else if (resetPasswState.password !== resetPasswState.confirm_password) {\r\n      setModalErrors({\r\n        ...modalErrors,\r\n        password: {\r\n          name: 'كلمة المرور',\r\n          error: \"خانة 'كلمة المرور' لا تتطابق مع خانة 'تأكيد كلمة المرور'.\",\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } \r\n    else {\r\n      ResetPassword();\r\n    }\r\n  }\r\n\r\n  /* Modals */\r\n\r\n\r\n  const loadEditForm = () => {\r\n\r\n    return(\r\n\r\n      <div className=\"container\">\r\n\r\n        <div className=\"row justify-content-center\">\r\n          \r\n          <form onSubmit={submitFullname} className=\"col-sm-10 text-right\">\r\n            <label htmlFor=\"fullname\" className=\"font-weight-bold text-right\">\r\n              <i className=\"fa fa-font ml-2\"/>\r\n              الإسم الكامل : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleChange} required id=\"fullname\" type=\"text\" placeholder={user.fullname || \"الإسم الكامل\"} className={\"form-control \" + (errors['fullname'] ? 'is-invalid' : '')}/>\r\n              <div className=\"input-group-append\">\r\n                <button type=\"submit\" className=\"form-control btn-md btn-outline-info\">حفظ</button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n        </div>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"row justify-content-center\">\r\n          \r\n          <form onSubmit={submitLocation} className=\"col-sm-12 text-right\">\r\n            \r\n            <div className=\"row justify-content-center\">\r\n            \r\n              {/* <div className=\"form-group col-sm-6\">\r\n                <label htmlFor=\"country\" className=\"font-weight-bold text-right\">\r\n                  <i className=\"fa fa-globe-africa ml-2\"/>\r\n                  الدولة {user.country ? `(${user.country})` : null}: \r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <select onChange={handleChange} required id=\"country\" className=\"custom-select\">\r\n                    <option value=\"\" defaultValue>إختر الدولة</option>\r\n                    {basic.map((data, index) => {\r\n                      if (data.key === 'country'){\r\n                        return(\r\n                          <option key={index} value={data.values.country.ar}>{data.values.country.ar}</option>\r\n                        )\r\n                      }\r\n                    })}\r\n                  </select>\r\n                </div>\r\n              </div> */}\r\n\r\n              <div className=\"col-sm-4\">\r\n                <p className=\"font-weight-bold\">\r\n                  <i className=\"fa fa-globe-africa ml-2\"/> الدولة :\r\n                </p>\r\n                <p className=\"font-weight-bold text-muted mr-3\">\r\n                  {user.country}\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"form-group col-sm-6\">\r\n                <label htmlFor=\"city\" className=\"font-weight-bold text-right\">\r\n                  <i className=\"fa fa-city ml-2\"/>\r\n                  المدينة {user.city ? `(${user.city})` : null}: \r\n                </label>\r\n                <div className=\"input-group\">\r\n                  <select onChange={handleChange} required id=\"city\" className=\"custom-select\">\r\n                    <option value=\"\" defaultValue>إختر المدينة</option>\r\n                    {cities ? cities.map((city, index) => (\r\n                      <option value={city} key={index}>{city}</option>\r\n                    )) : null}\r\n                  </select>\r\n                  <div className=\"input-group-append\">\r\n                    <button type=\"submit\" className=\"form-control btn-md btn-outline-info\">حفظ</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            {/* <div className=\"input-group justify-content-right\">\r\n              <button type=\"submit\" className=\"btn btn-md btn-outline-info font-weight-bold\">حفظ</button>\r\n            </div> */}\r\n\r\n          </form>\r\n\r\n        </div>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"row justify-content-center\">\r\n\r\n          <form onSubmit={submitImage} encType=\"multipart/form-data\" className=\"col-sm-12 text-right\">\r\n              \r\n            <label htmlFor=\"profile_img\" className=\"font-weight-bold float-right\">\r\n              <i className=\"fa fa-image ml-2\"/>\r\n              صورة العرض (300*300 حجم أقصى) : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              \r\n              <div className=\"custom-file\">\r\n                <input onChange={ImageChange} type=\"file\" className=\"custom-file-input col-sm-12\" id=\"profile_img\" name=\"profile_img\" accept=\"image/*\"/>\r\n                <label className=\"custom-file-label col-sm-12\" htmlFor=\"profile_img\"/>\r\n              </div>\r\n        \r\n            </div>\r\n\r\n            <div className=\"input-group justify-content-right mt-2\">\r\n              <button id=\"UploadBtn\" type=\"submit\" className=\"btn btn-md btn-outline-grey font-weight-bold\">تغيير الصورة</button>\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </div>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"row mt-5\">\r\n\r\n          <div className=\"col-sm-12\">\r\n            <span className=\"display-8 text-danger\">البيانات الرئيسية : </span>\r\n          </div>\r\n\r\n          <div className=\"card mt-4 col-sm-12 bg-light-grey border-danger shadow-none p-4\">\r\n            \r\n            <div className=\"row \">\r\n\r\n              <div className=\"input-group justify-content-center col-sm-12\">\r\n                <button onClick={() => {setEditEmail(true)}} className=\"btn btn-md col-sm-6 btn-outline-primary font-weight-bold\">\r\n                  تغيير البريد الإلكتروني\r\n                </button>\r\n              </div>\r\n\r\n              {/* <div className=\"input-group justify-content-center col-sm-12\">\r\n                <button onClick={() => {setEditPhone(true)}} className=\"btn btn-md col-sm-6 btn-outline-primary font-weight-bold\">\r\n                  تغيير رقم الجوال\r\n                </button>\r\n              </div> */}\r\n\r\n              {\r\n                localStorage.maidan_user_access === 'PROVIDER' ? null : (\r\n                  <div className=\"input-group justify-content-center col-sm-12\">\r\n                    <button onClick={ValidateNoOpenTickets} className=\"btn btn-md col-sm-6 btn-outline-grey font-weight-bold\">\r\n                      طلب تحويل الحساب لمعلن\r\n                    </button>\r\n                  </div>\r\n                )\r\n              }\r\n\r\n              <div className=\"input-group justify-content-center col-sm-12\">\r\n                <button onClick={() => {setResetPassw(true)}} className=\"btn btn-md col-sm-6 btn-outline-secondary font-weight-bold\">\r\n                  تغيير كلمة المرور\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"input-group justify-content-center col-sm-12\">\r\n                <button className=\"btn btn-md col-sm-6 btn-danger font-weight-bold\">\r\n                  حذف الحساب\r\n                </button>\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    )\r\n  }\r\n\r\n  const loadUserErrors = () => {\r\n    if (Object.keys(userErrors).length !== 0 && userErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {userErrors ? Object.entries(userErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const loadModalErrors = () => {\r\n    if (Object.keys(modalErrors).length !== 0 && modalErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {modalErrors ? Object.entries(modalErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    // Reset State & Errors\r\n    setModalState();\r\n    setModalErrors({});\r\n\r\n    // Set Modals To False\r\n    setEditProvider(false);\r\n    setEditEmail(false);\r\n    setEditPhone(false);\r\n    setResetPassw(false);\r\n\r\n    setResetPasswState({\r\n      email: null,\r\n      old_password: null,\r\n      password: null,\r\n      confirm_password: null\r\n    });\r\n    setFlashModal({view: false, state: null, message: null});\r\n\r\n  }\r\n\r\n  const resetAndLogout = () => {\r\n    resetModals();\r\n    LogoutUser();\r\n  }\r\n\r\n  if (redirect){\r\n    return <Redirect to=\"/\"/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container mt-5 pt-5\">\r\n        \r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-sm-10\">\r\n            \r\n            <div className=\"card bg-light-grey shadow-sm p-4\">\r\n              <span className=\"display-7 card-title text-right pr-5\">حفظ بيانات الحساب : </span>\r\n            \r\n              <div className=\"card-body text-center\">\r\n                \r\n                <div className=\"mt-2\">\r\n                  {loadUserErrors()}\r\n                </div>\r\n                \r\n                <div className=\"row mt-4\">\r\n\r\n                  <div className=\"col-sm-12\">\r\n                    <img src={user.profile_img ? (`https://s3.us-east-2.amazonaws.com/maidancom/${localStorage.profile_img}`) : PH} alt=\"PI\" width=\"125\" height=\"125\" className=\"rounded-circle\"/>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-12\">\r\n                    <span className=\"display-8 card-text-head text-info\">{user.username}</span>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"mt-2\">\r\n                  {loadErrors()}\r\n                </div>\r\n\r\n                <div className=\"mt-5\">\r\n                  {loadEditForm()}\r\n                </div>\r\n              \r\n              </div>\r\n\r\n            </div>\r\n            \r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n      \r\n      {/* Change Email Modal */}\r\n      <Modal show={isEmail} onHide={resetModals}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>تغيير البريد الإلكتروني</Modal.Title>\r\n          <Link to=\"#\" onClick={resetModals}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n\r\n          <div className=\"mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={sendResetEmailToken}>\r\n            <div className=\"row\">\r\n\r\n              <p className=\"text-muted font-info mr-2\">\r\n                <i className=\"fa fa-star-of-life fa-xs\"/> سيتم إرسال كود التأكيد إلى البريد الإلكتروني الجديد.\r\n              </p>\r\n\r\n              <div className=\"col-sm-12 text-right\">\r\n                <label htmlFor=\"email\" className=\"ml-sm-4 font-weight-bold\">البريد الإلكتروني الجديد : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleModalChange} disabled={tokenForm} required id=\"email\" type=\"email\" placeholder=\"البريد الإلكتروني\" className={\"form-control col-sm-8 \" + (modalErrors.email ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"input-group mr-2\">\r\n                <button disabled={tokenForm} className=\"btn btn-md btn-outline-primary font-weight-bold\">إرسال كود التأكيد</button>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </form>\r\n          \r\n          <div className=\"row mt-2\">\r\n            \r\n            <div className={tokenForm ? 'col-sm-12' : 'd-none'}>\r\n              <div className={\"text-right mt-2\"}>\r\n              \r\n              <label htmlFor=\"token\" className=\"ml-sm-4 font-weight-bold\">رمز التأكيد : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleModalChange} required id=\"token\" type=\"text\" placeholder=\"رمز التأكيد\" className={\"form-control col-sm-8 \" + (modalErrors.resetToken ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          \r\n          </div>\r\n\r\n          <Modal.Footer className=\"mt-4\">\r\n\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button onClick={validateResetEmailToken} variant=\"success\" disabled={tokenForm ? false : true}>\r\n              تأكيد\r\n            </Button>\r\n\r\n          </Modal.Footer>\r\n\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n\r\n      {/* Change Phone Modal */}\r\n      <Modal show={isPhone} onHide={resetModals}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>تغيير رقم الجوال</Modal.Title>\r\n          <Link to=\"#\" onClick={resetModals}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n\r\n          <div className=\"mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n\r\n          <form>\r\n            <div className=\"row\">\r\n\r\n              <p className=\"text-muted font-info mr-2\">\r\n                <i className=\"fa fa-star-of-life fa-xs\"/> سيتم إرسال كود التأكيد إلى رقم الجوال الجديد.\r\n              </p>\r\n\r\n              <div className=\"col-sm-12 text-right\">\r\n                <label htmlFor=\"phone\" className=\"ml-sm-4 font-weight-bold\">رقم الجوال الجديد : </label>\r\n                <div className=\"input-group\">\r\n\r\n                  <input onChange={handleModalChange} dir='ltr' required id=\"phone\" type=\"text\" placeholder=\"05\" className={\"form-control col-sm-6 \" + (modalErrors.phone ? \"is-invalid\" : '')}/>\r\n                  \r\n                  <div className=\"btn-group\">\r\n                    <Link dir='ltr' id=\"pre_phone_selector\" className={\"form-control btn-white dropdown-toggle \" + (modalErrors.pre_phone ? 'is-invalid' : '')} data-toggle=\"dropdown\" to=\"#\">الدولة</Link>\r\n                    <ul className=\"dropdown-menu font-weight-bold\">\r\n                      {\r\n                        basic.map((data, index) => {\r\n                          if (data.key === 'country'){\r\n                            return(\r\n                              <li key={index}>\r\n                                <Link to=\"#\" className=\"text-dark ml-2\" id=\"pre_phone\" name={`+${data.values.telecode}`} onClick={handleModalChange}>\r\n                                  {getCountryCallingCode(data.label)}+ <img src={`http://catamphetamine.gitlab.io/country-flag-icons/3x2/${data.label}.svg`} width=\"24\" alt={data.label}/>\r\n                                </Link>\r\n                              </li>\r\n                            )\r\n                          }\r\n                        })\r\n                      }\r\n                    </ul>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"input-group mr-2\">\r\n                <button disabled={tokenForm} className=\"btn btn-md btn-outline-primary font-weight-bold\">إرسال كود التأكيد</button>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </form>\r\n          \r\n          <div className=\"row mt-2\">\r\n            \r\n            <div className={tokenForm ? 'col-sm-12' : 'd-none'}>\r\n              <div className={\"text-right mt-2\"}>\r\n              \r\n              <label htmlFor=\"token\" className=\"ml-sm-4 font-weight-bold\">رمز التأكيد : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleModalChange} required id=\"token\" type=\"text\" placeholder=\"رمز التأكيد\" className={\"form-control col-sm-8 \" + (modalErrors.resetToken ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          \r\n          </div>\r\n\r\n          <Modal.Footer className=\"mt-4\">\r\n\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"success\" disabled={tokenForm ? false : true}>\r\n              تأكيد\r\n            </Button>\r\n\r\n          </Modal.Footer>\r\n\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n\r\n      {/* Ask To Be A Provider Modal */}\r\n      <Modal show={isProvider} onHide={resetModals}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>طلب تحويل الحساب لمعلن</Modal.Title>\r\n          <Link to=\"#\" onClick={resetModals}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n\r\n          <div className=\"mt-2\">\r\n            {loadModalErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n\r\n            <form id=\"mainForm\" onSubmit={handleProviderSubmit}>\r\n\r\n              <div className=\"container\">\r\n\r\n                <div className=\"row text-right\">\r\n\r\n                  <div className=\"col-sm-12\">\r\n                    <label htmlFor=\"company_name\" className=\"font-weight-bold float-right\">* إسم الشركة : </label>\r\n                    <div className=\"input-group\">\r\n                      <input onChange={handleProviderChange} required id=\"company_name\" type=\"text\" placeholder=\"مثال: ماكدونالدز, ستاربكس..\" className=\"form-control col-sm-12\"/>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-12 mt-2\">\r\n            \r\n                    <label htmlFor=\"country\" className=\"font-weight-bold float-right\">* الدولة : </label>\r\n                    <div className=\"input-group\">\r\n                      <select required onChange={handleProviderChange} id=\"country\" className=\"custom-select col-sm-6 font-weight-bold\">\r\n                        <option className=\"font-weight-bold\" value=\"\" defaultValue>حدد الدولة</option>\r\n                        {basic.map((data, index) => {\r\n                          if (data.key === 'country'){\r\n                            return (\r\n                              <option key={index} value={data.values.country.ar}>{data.values.country.ar}</option>\r\n                            )\r\n                          }\r\n                        })}\r\n                      </select>\r\n                    </div>\r\n                  \r\n                  </div>\r\n\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </form>\r\n\r\n            <form encType=\"multipart/form-data\">\r\n\r\n              <div className=\"container\">\r\n\r\n                <div className=\"row text-right\">\r\n\r\n                  <div className=\"col-sm-12 mt-4\">\r\n                    <p className=\"text-dark font-info font-weight-bold\">\r\n                      حمل الملفات المطلوبة <Link to=\"#\" onClick={handleDownload}> من هنا </Link> وقم بتعبئته وإعادة إرساله.\r\n                    </p>\r\n                  </div>\r\n\r\n                  <div className=\"form-group col-sm-12\">\r\n                    <label htmlFor=\"pdfFile\" className=\"font-weight-bold float-right\">* أرفق الملفات : </label>\r\n                    <div className=\"custom-file\">\r\n                      <input required type=\"file\" onChange={handlePDFFileChange} id=\"pdfFile\" name=\"pdfFile\" className={\"custom-file-input \" + (modalErrors['pdfFile'] ? 'is-invalid' : '')}/>\r\n                      <label id=\"pdfFileLabel\" className=\"custom-file-label col-sm-12\" htmlFor=\"pdfFile\"/>\r\n                    </div>\r\n                    <p className=\"font-info text-muted\">لرفع مجموعة من الملفات, الرجاء ضغطها في ملف zip أو rar</p>\r\n                    <div className=\"text-center mt-1\">\r\n                      <p id=\"PDFuploadStatus\" className=\"font-info text-primary\"></p>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </form>\r\n\r\n            <form encType=\"multipart/form-data\">\r\n              <div className=\"container\">\r\n\r\n                <div className=\"row text-right\">\r\n\r\n                  <div className=\"form-group col-sm-12\">\r\n                    <label htmlFor=\"adImage\" className=\"font-weight-bold float-right\">صورة الإعلان الرئيسية (إختياري): </label>\r\n                    <div className=\"custom-file\">\r\n                      <input onChange={handleMainAdImageChange} type=\"file\" id=\"adImage\" name=\"adImage\" accept=\"image/*\" className={\"custom-file-input \" + (modalErrors['ImageSize'] ? 'is-invalid' : '')}/>\r\n                      <label id=\"adImageLabel\" className=\"custom-file-label col-sm-12\" htmlFor=\"adImage\"/>\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <p id=\"ImageuploadStatus\" className=\"font-info text-primary\"></p>\r\n                    </div>\r\n                  </div>\r\n\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </form>\r\n\r\n          </div>\r\n\r\n          <Modal.Footer className=\"mt-4\">\r\n\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button id=\"submitBtn\" type=\"submit\" variant=\"success\" form=\"mainForm\">\r\n              تأكيد\r\n            </Button>\r\n\r\n          </Modal.Footer>\r\n\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n      \r\n      {/* Reset Password Modal */}\r\n      <Modal show={resetPasswModal} onHide={resetModals}>\r\n        \r\n        <Modal.Header>\r\n          <Modal.Title>إعادة تعيين كلمة المرور</Modal.Title>\r\n          <Link to=\"#\" onClick={resetModals}>\r\n            <i className=\"fa fa-times text-warning\"/>\r\n          </Link>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body>\r\n          <form onSubmit={handleResetPasswSubmit}>\r\n            \r\n            <div className=\"mt-2\">\r\n              {loadModalErrors()}\r\n            </div>\r\n            \r\n            <div className=\"row\">\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"old_password\" className=\"ml-sm-4 font-weight-bold\">كلمة المرور القديمة : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleResetPasswChange} required id=\"old_password\" type=\"password\" placeholder=\"كلمة المرور القديمة\" className={\"form-control col-sm-8 \" + (modalErrors.old_password ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"password\" className=\"ml-sm-4 font-weight-bold\">كلمة المرور الجديدة : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleResetPasswChange} required id=\"password\" type=\"password\" placeholder=\"كلمة المرور الجديدة\" className={\"form-control col-sm-8 \" + (modalErrors.password ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-2 text-right\">\r\n                <label htmlFor=\"confirm_password\" className=\"ml-sm-4 font-weight-bold\">تأكيد كلمة المرور الجديدة : </label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleResetPasswChange} required id=\"confirm_password\" type=\"password\" placeholder=\"تأكيد كلمة المرور\" className={\"form-control col-sm-8 \" + (modalErrors.password ? 'is-invalid' : '')}/>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <Modal.Footer className=\"mt-4\">\r\n\r\n              <Button variant=\"grey\" onClick={resetModals}>\r\n                إلغاء\r\n              </Button>\r\n              <Button variant=\"primary\" type=\"submit\">\r\n                إعادة التعيين\r\n              </Button>\r\n\r\n            </Modal.Footer>\r\n          \r\n          </form>\r\n        </Modal.Body>\r\n\r\n      </Modal>\r\n      \r\n      {/* Flash State Modal */}\r\n      <Modal show={flashModal.view} onHide={() => {flashModal.logout ? resetAndLogout() : resetModals()}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">{flashModal.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          {flashModal.state === 'success' ? (\r\n            <i className=\"fa fa-check-circle text-success fa-3x\"/>\r\n          ) : flashModal.state === 'error' ? (\r\n            <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          ) : null}\r\n          <p className=\"mt-2 lead text-muted\">\r\n            {flashModal.message}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-primary\" onClick={() => {flashModal.logout ? resetAndLogout() : resetModals()}}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Redirect, useParams } from 'react-router-dom';\r\nimport PH from '../../static/images/icon.png'\r\n\r\n\r\n\r\nexport const Ticket = () => {\r\n\r\n  const { id } = useParams();\r\n\r\n  const [state, setState] = useState({})\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [messageState, setMessageState] = useState({});\r\n  \r\n  // Redirect\r\n  const [redirect, setRedirect] = useState({\r\n    redirect: false, to: null, flash: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Fetch Current User Tickets\r\n    const fetchTicket = () => {\r\n      fetch(`/api/user/tickets/${id}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setState({...data.ticket, is_admin: data.is_admin});\r\n          } else {\r\n            if (data.code === \"NO_TICKET\") {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'التذكرة',\r\n                  message: 'التذكرة غير موجودة, أو قد تم حذفها مسبقاً.'\r\n                },\r\n                to: '/'\r\n              });\r\n            } else {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'الحساب',\r\n                  message: 'يمكنك فقط الإطلاع على تذاكرك.'\r\n                },\r\n                to: '/'\r\n              });\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    // Initial Fetching\r\n    fetchTicket();\r\n    // Repetitive Fetching with setInterval\r\n    const interval = setInterval(() => {\r\n      fetchTicket();\r\n    }, 1000 * 35);\r\n\r\n    // Clear interval when unmount\r\n    return () => clearInterval(interval);\r\n\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let message = document.getElementById('lastMessage');\r\n    message && message.classList.add('card-fade');\r\n  }, [state]);\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  const getStatus = (status) => {\r\n    let statuses = {\r\n      open: [\"في إنتظار الرد\", \"info\"],\r\n      waiting: [\"تم الرد\", \"success\"],\r\n      closed: [\"مغلق\", \"dark\"]\r\n    }\r\n\r\n    return statuses[status]\r\n  }\r\n  \r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.id === 'message') {\r\n      var len = e.target.value.length;\r\n      var elem = document.getElementById('charCount');\r\n\r\n      if (len >= 600) {\r\n        e.target.value = e.target.value.substring(0, 600);\r\n      } \r\n      else {\r\n        if (len > 450) {\r\n          elem.classList.add(\"text-danger\");\r\n          elem.classList.remove(\"text-warning\");\r\n        } else if (len > 300) {\r\n          elem.classList.add(\"text-warning\");\r\n        } else {\r\n          elem.classList.remove(\"text-warning\");\r\n          elem.classList.remove(\"text-danger\");\r\n        }\r\n\r\n      }\r\n\r\n      elem.innerHTML = 600 - len;\r\n\r\n    }\r\n\r\n    setMessageState({\r\n      ...messageState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    var bid = e.target.id;\r\n\r\n    const SubmitMessage = async(status) => {\r\n      await fetch(`/api/user/tickets/${id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify({...messageState, status: status})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok) {\r\n            document.getElementById('message').value = '';\r\n            document.getElementById('charCount').innerHTML = 600;\r\n            setMessageState({});\r\n            setErrors({});\r\n            setState({...data.ticket, is_admin: data.is_admin});\r\n          } else {\r\n            if (data.code === 'NO_TICKET') {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'التذكرة',\r\n                  message: 'التذكرة غير موجودة, أو قد تم حذفها مسبقاً.'\r\n                },\r\n                to: '/'\r\n              });\r\n            }\r\n            else if (data.code === 'NOT_YOURS') {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'الحساب',\r\n                  message: 'يمكنك فقط الإطلاع على تذاكرك.'\r\n                },\r\n                to: '/'\r\n              });\r\n            }\r\n            else {\r\n              setErrors({\r\n                message: {\r\n                  name: \"خطأ\",\r\n                  error: \"حدث خطأ أثناء محاولة الإرسال, الرجاء المحاولة من جديد لاحقاً.\",\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    const closeTicket = async() => {\r\n      await fetch(`/api/user/tickets/${id}/close`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok) {\r\n            document.getElementById('message').value = '';\r\n            document.getElementById('charCount').innerHTML = 600;\r\n            setMessageState({});\r\n            setErrors({});\r\n            setState({...data.ticket, is_admin: data.is_admin})\r\n          } else {\r\n            setErrors({\r\n              close: {\r\n                name: \"خطأ\",\r\n                error: \"حدث خطأ أثناء محاولة إغلاق التذكرة, الرجاء إعادة المحاولة لاحقاً.\",\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (state.is_admin) {\r\n      if (state.status === 'closed') {\r\n        setErrors({\r\n          unAble: {\r\n            name: \"خطأ\",\r\n            error: \"لا يمكنك إرسال رسالة في تذكرة مغلقة.\",\r\n            type: \"warning\"\r\n          }\r\n        });\r\n      } else {\r\n        if (bid === 'close'){\r\n          closeTicket();\r\n        }\r\n        else if (bid === 'send') {\r\n          if (!messageState.message) {\r\n            setErrors({\r\n              message: {\r\n                name: \"خطأ\",\r\n                error: \"الرجاء إدخال رسالة أولاً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          } else {\r\n            SubmitMessage();\r\n          }\r\n        }\r\n        else if (bid === 'closeNsend') {\r\n          if (!messageState.message) {\r\n            setErrors({\r\n              message: {\r\n                name: \"خطأ\",\r\n                error: \"الرجاء إدخال رسالة أولاً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          } else {\r\n            SubmitMessage('closed');\r\n          }\r\n        }\r\n        else if (bid === 'reOpen') {\r\n          if (!messageState.message) {\r\n            setErrors({\r\n              message: {\r\n                name: \"خطأ\",\r\n                error: \"الرجاء إدخال رسالة أولاً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          } else {\r\n            SubmitMessage('open');\r\n          }\r\n        }\r\n      }\r\n    } \r\n    else {\r\n      if (bid !== 'close' && (!state.user_resp && state.status !== 'closed')) {\r\n        setErrors({\r\n          unAble: {\r\n            name: \"خطأ\",\r\n            error: \"لا يمكنك إرسال رسالة حتى يتم الرد على الرسائل من قبل الإدارة.\",\r\n            type: \"danger\"\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        if (bid === 'close'){\r\n          closeTicket();\r\n        }\r\n        else if (bid === 'send') {\r\n          if (!messageState.message) {\r\n            setErrors({\r\n              message: {\r\n                name: \"خطأ\",\r\n                error: \"الرجاء إدخال رسالة أولاً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          } else {\r\n            SubmitMessage();\r\n          }\r\n        }\r\n        else if (bid === 'closeNsend') {\r\n          if (!messageState.message) {\r\n            setErrors({\r\n              message: {\r\n                name: \"خطأ\",\r\n                error: \"الرجاء إدخال رسالة أولاً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          } else {\r\n            SubmitMessage('closed');\r\n          }\r\n        }\r\n        else if (bid === 'reOpen') {\r\n          if (!messageState.message) {\r\n            setErrors({\r\n              message: {\r\n                name: \"خطأ\",\r\n                error: \"الرجاء إدخال رسالة أولاً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          } else {\r\n            SubmitMessage('open');\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: redirect.to,\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container-fluid mt-5 pt-5\">\r\n\r\n        <div className=\"row p-md-5 justify-content-right\">\r\n\r\n          <div className=\"col-sm-8\">\r\n            <div className=\"card shadow-sm p-4\">\r\n              <span className=\"display-8 card-title text-right pr-2\">التذكرة : {state.title}</span>\r\n\r\n              <div className=\"card-body\">\r\n                \r\n                <div className=\"row\">\r\n\r\n                  {\r\n                    state.messages && state.messages.map((message, index) => {\r\n                      if (index === state.messages.length - 1) {\r\n                        return(\r\n                          <div className=\"col-sm-12\" key={index}>\r\n\r\n                            <div id=\"lastMessage\" className=\"card p-2 bg-lighter-grey shadow-none\">\r\n\r\n                              <div className=\"card-body\">\r\n                                <div className=\"row\">\r\n\r\n                                  <div className=\"col-sm-12 text-right\">\r\n                                    <img className=\"rounded-circle ticket-img\" src={message.profile_img ? (`https://s3.us-east-2.amazonaws.com/maidancom/${message.profile_img}`) : PH} alt=\"PI\"/>\r\n                                    <b className=\"font-weight-bold ticket-username mr-2\">{message.user}</b>\r\n                                  </div>\r\n                                  \r\n                                  <div className=\"col-sm-12 mt-2 text-right\">\r\n                                    <p dir='ltr' className=\"text-muted ticket-date\">{getDate(message.date)}</p>\r\n                                  </div>\r\n\r\n                                  <div className=\"col-sm-12 text-right ticket-text wordBreak\">\r\n                                    {message.body}\r\n                                  </div>\r\n\r\n                                </div>\r\n                              </div>\r\n\r\n                            </div>\r\n\r\n                            <hr/>\r\n\r\n                          </div>\r\n                        )\r\n                      } else {\r\n                        return(\r\n                          <div className=\"col-sm-12\" key={index}>\r\n\r\n                            <div className=\"card p-2 bg-lighter-grey shadow-none\">\r\n\r\n                              <div className=\"card-body\">\r\n                                <div className=\"row\">\r\n\r\n                                  <div className=\"col-sm-12 text-right\">\r\n                                    <img className=\"rounded-circle ticket-img\" src={message.profile_img ? (`https://s3.us-east-2.amazonaws.com/maidancom/${message.profile_img}`) : PH} alt=\"PI\"/>\r\n                                    <b className=\"font-weight-bold ticket-username mr-2\">{message.user}</b>\r\n                                  </div>\r\n                                  \r\n                                  <div className=\"col-sm-12 mt-2 text-right\">\r\n                                    <p dir='ltr' className=\"text-muted ticket-date\">{getDate(message.date)}</p>\r\n                                  </div>\r\n\r\n                                  <div className=\"col-sm-12 text-right ticket-text wordBreak\">\r\n                                    {message.body}\r\n                                  </div>\r\n\r\n                                </div>\r\n                              </div>\r\n\r\n                            </div>\r\n\r\n                            <hr/>\r\n\r\n                          </div>\r\n                        )\r\n                      }\r\n                    })\r\n                  }\r\n\r\n                  {\r\n                    state.is_admin ? (\r\n                      <div className=\"col-sm-12\">\r\n\r\n                        <div className=\"mt-2\">\r\n                          {loadErrors()}\r\n                        </div>\r\n\r\n                        {\r\n                          state.status === 'closed' ? null : (\r\n                            <div className=\"row\">\r\n                        \r\n                              <div className=\"col-sm-12 mt-4 text-right\">\r\n\r\n                                <div className=\"input-group\">\r\n                                  <textarea onChange={handleChange} required id=\"message\" rows=\"6\" maxLength=\"600\" placeholder=\"نص الرسالة\" className={\"form-control fixed-width-sm col-sm-12 \" + (errors.message ? \"is-invalid\" : \"\")}/>\r\n                                </div>\r\n                                <div className=\"float-left font-weight-bold\" id=\"charCount\">600</div>\r\n\r\n                              </div>\r\n                              \r\n                              <div className=\"col-sm-12 mt-2 text-left\">\r\n                                <button id=\"close\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-grey\">إغلاق التذكرة</button>\r\n                                <button id=\"send\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-orange\">إرسال</button>\r\n                              </div>\r\n                            \r\n                            </div>\r\n                          )\r\n                        }\r\n                      \r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"col-sm-12\">\r\n\r\n                        <div className=\"mt-2\">\r\n                          {loadErrors()}\r\n                        </div>\r\n\r\n                        <div className=\"row\">\r\n                        \r\n                          <div className=\"col-sm-12 mt-4 text-right\">\r\n\r\n                            <div className=\"input-group\">\r\n                              <textarea disabled={!state.user_resp && state.status !== 'closed'} onChange={handleChange} required id=\"message\" rows=\"6\" maxLength=\"600\" placeholder=\"نص الرسالة\" className={\"form-control fixed-width-sm col-sm-12 \" + (errors.message ? \"is-invalid\" : \"\")}/>\r\n                            </div>\r\n                            <div className=\"float-left font-weight-bold\" id=\"charCount\">600</div>\r\n\r\n                          </div>\r\n\r\n                          {\r\n                          state.status === 'closed' ? (\r\n                            <div className=\"col-sm-12 mt-2 text-left\">\r\n                              <button id=\"reOpen\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-outline-turq\">إعادة فتح التذكرة</button>\r\n                            </div>\r\n                          ) : null\r\n                          }\r\n\r\n                          {\r\n                          state.status === 'open' ? (\r\n                            <div className=\"col-sm-12 mt-2 text-left\">\r\n                              <button id=\"close\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-grey\">إغلاق التذكرة</button>\r\n                              <button disabled id=\"send\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-orange\">إرسال</button>\r\n                              <button disabled id=\"closeNsend\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-turq\">إرسال وإغلاق</button>\r\n                            </div>\r\n                          ) : null\r\n                          }\r\n\r\n                          {\r\n                          state.status === 'waiting' ? (\r\n                            <div className=\"col-sm-12 mt-2 text-left\">\r\n                              <button id=\"close\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-grey\">إغلاق التذكرة</button>\r\n                              <button id=\"send\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-orange\">إرسال</button>\r\n                              <button id=\"closeNsend\" onClick={handleSubmit} className=\"btn btn-sm fixed-width-sm btn-turq\">إرسال وإغلاق</button>\r\n                            </div>\r\n                          ) : null\r\n                          }\r\n\r\n                        </div>\r\n\r\n                      </div>\r\n                    )\r\n                  }\r\n                \r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-sm-4\">\r\n            <div className=\"card bg-light-grey shadow-sm p-4\">\r\n              \r\n              <div className=\"card-body text-right\">\r\n                \r\n                <div className=\"row\">\r\n\r\n                  <div className=\"col-sm-6 text-right\">\r\n                    <p className=\"font-info font-weight-bold\">صاحب التذكرة :</p>\r\n                  </div>\r\n                  <div className=\"col-sm-6 text-left\">\r\n                    <p className=\"font-info font-weight-bold\">{state.user && state.user.username}</p>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-6 text-right\">\r\n                    <p className=\"font-info font-weight-bold\">نوع التذكرة :</p>\r\n                  </div>\r\n                  <div className=\"col-sm-6 text-left\">\r\n                    <p className=\"font-info font-weight-bold text-secondary\">{state.type}</p>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-4 col-md-6 text-right\">\r\n                    <p className=\"font-info font-weight-bold\">حالة التذكرة :</p>\r\n                  </div>\r\n                  <div className=\"col-sm-6 text-left\">\r\n                    <p className={`font-info text-${state.status && getStatus(state.status)[1]} font-weight-bold`}>{state.status && getStatus(state.status)[0]}</p>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-12\"><hr/></div>\r\n\r\n                  <div className=\"col-sm-6 text-right\">\r\n                    <p className=\"font-info font-weight-bold\">تاريخ الإنشاء :</p>\r\n                  </div>\r\n                  <div className=\"col-sm-6 text-left\">\r\n                    <p dir='ltr' className=\"font-info font-weight-bold\">{getDate(state.created)}</p>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-6 text-right\">\r\n                    <p className=\"font-info font-weight-bold\">آخر مشاركة :</p>\r\n                  </div>\r\n                  <div className=\"col-sm-6 text-left\">\r\n                    <p dir='ltr' className=\"font-info font-weight-bold\">{getDate(state.last)}</p>\r\n                  </div>\r\n\r\n                  <div className=\"col-sm-12\"><hr/></div>\r\n\r\n                  <div className=\"col-sm-5 text-right\">\r\n                    <p className=\"font-info font-weight-bold\">للتواصل :</p>\r\n                  </div>\r\n                  <div className=\"col-sm-7 text-left\">\r\n                    <p dir='ltr' className=\"font-info font-weight-bold\">{state.email || 'غ.م'}</p>\r\n                  </div>\r\n\r\n                </div>\r\n                \r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\n\r\nexport const MyTickets = () => {\r\n\r\n  const [state, setState] = useState({tickets: null, limit: 15})\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [modal, setModal] = useState(false);\r\n  const [modalState, setModalState] = useState({});\r\n  \r\n  // Redirect\r\n  const [redirect, setRedirect] = useState({\r\n    redirect: false, to: null, flash: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    // Check If User is Logged-in\r\n    if (!localStorage.maidan_jwt_$m3){\r\n      setRedirect({\r\n        redirect: true,\r\n        to: '/'\r\n      });\r\n    }\r\n\r\n    // Fetch Current User Tickets\r\n    fetch('/api/user/tickets', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setState({\r\n            tickets: data.tickets,\r\n            limit: 15\r\n          });\r\n        } else {\r\n          setRedirect({\r\n            redirect: true,\r\n            flash: {\r\n              type: 'error',\r\n              title: 'الحساب',\r\n              message: 'الرجاء إعادة تسجيل الدخول'\r\n            },\r\n            to: '/'\r\n          });\r\n        }\r\n      })\r\n    })\r\n\r\n  }, [])\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  const getStatus = (status) => {\r\n    let statuses = {\r\n      open: [\"في إنتظار الرد\", \"info\"],\r\n      waiting: [\"تم الرد\", \"success\"],\r\n      closed: [\"مغلق\", \"dark\"]\r\n    }\r\n\r\n    return statuses[status]\r\n  }\r\n\r\n  const loadTickets = () => {\r\n    const tickets_patch = state.tickets && state.tickets.slice(0, state.limit)\r\n\r\n    return (\r\n      <tbody>\r\n        {\r\n          tickets_patch ? tickets_patch.map((ticket, index) => {\r\n\r\n            let status = getStatus(ticket.status)\r\n            return(\r\n              <tr key={index}>\r\n                <th className=\"table-header\">\r\n                  <Link className=\"text-primary\" to={`/user/tickets/${ticket.id}`}>{ticket.title}</Link>\r\n                </th>\r\n                <th className=\"table-header\">#{ticket.id}</th>\r\n                <th className=\"table-header text-secondary\">{ticket.type}</th>\r\n                <th dir='ltr' className=\"table-header\">{getDate(ticket.created)}</th>\r\n                <th dir='ltr' className=\"table-header\">{ticket.last_activity}</th>\r\n                <th className={`table-header text-${status[1]}`}>{status[0]}</th>\r\n              </tr>\r\n              )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n  \r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if ((state.limit < state.tickets.length)){\r\n      let new_limit = state.limit + 15;\r\n      setState({...state, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    \r\n    if ((state.limit > 15)){\r\n      let new_limit = state.limit - 15;\r\n      setState({...state, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    setModal(false);\r\n    setModalState({});\r\n  }\r\n\r\n  /* New Ticket */\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.id === 'message') {\r\n      var len = e.target.value.length;\r\n      var elem = document.getElementById('charCount');\r\n\r\n      if (len >= 600) {\r\n        e.target.value = e.target.value.substring(0, 600);\r\n      } \r\n      else {\r\n        if (len > 450) {\r\n          elem.classList.add(\"text-danger\");\r\n          elem.classList.remove(\"text-warning\");\r\n        } else if (len > 300) {\r\n          elem.classList.add(\"text-warning\");\r\n        } else {\r\n          elem.classList.remove(\"text-warning\");\r\n          elem.classList.remove(\"text-danger\");\r\n        }\r\n\r\n      }\r\n\r\n      elem.innerHTML = 600 - len;\r\n\r\n    }\r\n\r\n    setModalState({\r\n      ...modalState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const submitTicket = async() => {\r\n      await fetch('/api/user/tickets', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        },\r\n        body: JSON.stringify(modalState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok) {\r\n            setState({\r\n              ...state,\r\n              tickets: data.tickets\r\n            });\r\n            resetModals();\r\n          } else { \r\n            if (data.code === \"INVALID_REQUEST\") {\r\n              setErrors({\r\n                Request: {\r\n                  name: \"الطلب\",\r\n                  error: \"البيانات التي قمت بإدخالها غير مقبولة, الرجاء إعادة المحاولة لاحقاً.\",\r\n                  type: \"warning\"\r\n                }\r\n              })\r\n            } \r\n            else {\r\n              setErrors({\r\n                Server: {\r\n                  name: \"خطأ\",\r\n                  error: \"حدث خطأ أثناء معالجة الطلب, الرجاء المحاولة من جديد لاحقاً.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n\r\n    if (![\"طلب\", \"شكوى\", \"إقتراح\"].includes(modalState.type)) {\r\n      setErrors({\r\n        ...errors,\r\n        type: {\r\n          name: \"نوع التذكرة\",\r\n          error: \"نوع التذكرة غير مقبول, الرجاء تحديد نوع آخر.\",\r\n          type: \"danger\"\r\n        }\r\n      })\r\n    } else {\r\n      submitTicket();\r\n    }\r\n  }\r\n  /* New Ticket */\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: redirect.to,\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container mt-5 pt-5\">\r\n\r\n        <div className=\"container text-center mt-5\">\r\n          <span className=\"display-7\">التذاكر</span>\r\n          <hr/>\r\n          <div className=\"container-fluid text-right\">\r\n            <button onClick={() => {setModal(true)}} className=\"btn btn-sm btn-outline-grey\">\r\n              <i className=\"fa fa-hand-paper fa-lg ml-2\"/> تذكرة جديدة\r\n            </button>\r\n          </div>\r\n          <div className=\"table-responsive\">\r\n\r\n            <table className=\"table table-bordered mt-4\">\r\n              <thead>\r\n                <tr className=\"bg-light-grey\">\r\n                  <th className=\"table-header\" scope=\"col\">العنوان</th>\r\n                  <th className=\"table-header\" scope=\"col\">ID</th>\r\n                  <th className=\"table-header\" scope=\"col\">نوع التذكرة</th>\r\n                  <th className=\"table-header\" scope=\"col\">تاريخ الإنشاء</th>\r\n                  <th className=\"table-header\" scope=\"col\">آخر مشاركة</th>\r\n                  <th className=\"table-header\" scope=\"col\">الحالة</th>\r\n                </tr>\r\n              </thead>\r\n              {loadTickets()}\r\n            </table>\r\n          </div>\r\n          <div className=\"justify-content-center\">\r\n            {(state.tickets && state.limit < state.tickets.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n            {state.limit > 15 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* Ticket Modal */}\r\n      <Modal show={modal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">فتح تذكرة جديدة</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form id=\"ticketForm\" onSubmit={handleSubmit}>\r\n\r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-sm-12 mt-2\">\r\n                <label htmlFor=\"title\" className=\"font-weight-bold float-right\">* العنوان :</label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleChange} required id=\"title\" type=\"text\" placeholder=\"عنوان الـ(مشكلة/إقتراح/طلب)\" className={\"form-control col-sm-10 \" + (errors.title ? \"is-invalid\" : \"\")}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-4\">\r\n                <label htmlFor=\"email\" className=\"font-weight-bold float-right\">البريد الإلكتروني (إختياري) :</label>\r\n                <div className=\"input-group\">\r\n                  <input onChange={handleChange} id=\"email\" type=\"email\" placeholder=\"البريد الإلكتروني (إختياري)\" className={\"form-control col-sm-10 \" + (errors.email ? \"is-invalid\" : \"\")}/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-4\">\r\n                <label htmlFor=\"type\" className=\"font-weight-bold float-right\">* نوع التذكرة : </label>\r\n                <div className=\"input-group\">\r\n                  <select onChange={handleChange} required id=\"type\" className={\"custom-select col-sm-10 \" + (errors.type ? \"is-invalid\" : \"\")}>\r\n                    <option value=\"\" defaultValue>نوع التذكرة</option>\r\n                    <option value=\"طلب\" className=\"\">طلب</option>\r\n                    <option value=\"شكوى\" className=\"\">شكوى</option>\r\n                    <option value=\"إقتراح\" className=\"\">إقتراح</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"col-sm-12 mt-4\">\r\n                <label htmlFor=\"message\" className=\"font-weight-bold float-right\">* نص التذكرة : </label>\r\n                <div className=\"input-group\">\r\n                  <textarea onChange={handleChange} required id=\"message\" rows=\"12\" maxLength=\"600\" placeholder=\"وصف الـ(مشكلة/إقتراح/طلب)\" className={\"form-control col-sm-12 \" + (errors.message ? \"is-invalid\" : \"\")}/>\r\n                </div>\r\n                <div className=\"float-left font-weight-bold\" id=\"charCount\">600</div>\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button form=\"ticketForm\" type=\"submit\" variant=\"primary\">\r\n              فتح التذكرة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    \r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nexport const NewGroup = () => {\r\n\r\n  // Country/Cities\r\n  const [cities, setCities] = useState([]);\r\n  const [couponTypes, setTypes] = useState([]);\r\n\r\n  const [form, setForm] = useState(1);\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [state, setState] = useState({\r\n    company: '',\r\n    company_type: '',\r\n    coupons_num: 1,\r\n    coupon_price: 10,\r\n    coupon_code: '',\r\n    start: '',\r\n    expire: 0,\r\n    onsite: 1,\r\n    description: '',\r\n    country: '',\r\n    branches_num: 1,\r\n    branches: [],\r\n    images: []\r\n  });\r\n\r\n  const [uploaded, setUploaded] = useState(false);\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  const [balanceModal, setBalanceModal] = useState({view: false, user_balance: null});\r\n  \r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n    fetch('/api/authenticate/provider', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content_Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          var userData = JSON.parse(localStorage.maidan_user)\r\n          // Getting Cities Names (AR).\r\n          var elements = JSON.parse(localStorage.maidan_elements);\r\n          elements.forEach(element => {\r\n            if (element.key === 'country'){\r\n              if (element.values.country.ar === userData.country){\r\n                setCities(element.values.cities.ar)\r\n              }\r\n            }\r\n            if (element.key === 'coupon_types'){\r\n              setTypes(element.values.ar)\r\n            }\r\n          });\r\n\r\n          // Check Ads Images\r\n          var images = userData.ad_images || []\r\n          if (userData.main_ad_image) {\r\n            images.push(userData.main_ad_image);\r\n          }\r\n          if (images <= 0){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'صور الإعلان',\r\n                message: 'الرجاء التوجة للوحة التحكم الخاصة بك وإضافة صور الإعلانات قبل إضافة إعلان جديد.'\r\n              }\r\n            })\r\n          }\r\n\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n          \r\n        }\r\n      })\r\n    })\r\n\r\n    const SubmitState = async() => {\r\n      await fetch('/api/groups/create', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({...state, offset: new Date().getTimezoneOffset()})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'success',\r\n                title: 'إضافة إعلان',\r\n                message: 'تم إضافة الإعلان بنجاح, سيتم مراجعته من قبل الإدارة, قبل عرضه على المستخدمين.'\r\n              }\r\n            })\r\n            // We Will Display A Card Later On To Showcase Successful Submition\r\n          } else {\r\n            if (data.code === 'AUTH_ERROR'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACCESS_DENIED'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'حدث خطأ أثناء محاولة إضافة الإعلان, الرجاء المحاولة من جديد لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_TOKEN'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_AUTH_HEADER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_LOGGED_IN'){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء محاولة طلب آخر.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'MISSING_VALUES'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'بعض الخانات غير مرفقة, الرجاء إعادة المحاولة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_COMPANY'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'المستخدم الحالي لا ينتمي لأي شركة, الرجاء التواصل مع الإدارة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_COUNTRY'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'المستخدم الحالي لم يحدد الدولة, الرجاء التوجة لصفحة بيانات المستخدم, وتعيين الدولة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_IMAGES'){\r\n              document.getElementById('UploadBtn').disabled = false;\r\n              setErrors({\r\n                Images: {\r\n                  type: 'danger',\r\n                  name: 'خطأ',\r\n                  error: 'المستخدم الحالي لا يملك صورة رئيسية للإعلانات, الرجاء إدخال صورة في خانة الصور الفرعية.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (uploaded){\r\n      setUploaded(false);\r\n      SubmitState();\r\n    }\r\n  }, [uploaded])\r\n  /*eslint-enable */\r\n\r\n  const newGroupFormFirst = () => {\r\n\r\n    const handleNext = (e) => {\r\n      e.preventDefault();\r\n\r\n      const checkBalance = async() => {\r\n        await fetch(\"/api/groups/balance\", {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n            'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n          },\r\n          body: JSON.stringify({full_price: parseFloat(state.coupon_price*state.coupons_num)})\r\n        }).then(resp => {\r\n          resp.json().then(data => {\r\n            if (resp.ok) {\r\n              if (data.eligible) {\r\n                setForm(2);\r\n              } else {\r\n                setBalanceModal({view: true, user_balance: data.user_balance});\r\n              }\r\n  \r\n            } else {\r\n              if (data.code === 'AUTH_ERROR'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'غير مصرح',\r\n                    message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'ACCESS_DENIED'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'غير مصرح',\r\n                    message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'SERVER'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'NO_TOKEN'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_AUTH_HEADER'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'NOT_LOGGED_IN'){\r\n                localStorage.clear();\r\n                sessionStorage.clear();\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_REQUEST'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء محاولة طلب آخر.'\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          })\r\n        })\r\n      }\r\n      \r\n      // Validate Data.\r\n      if (!couponTypes.includes(state.coupon_type)){\r\n        setErrors({\r\n          ...errors,\r\n          coupon_type: {\r\n            name: \"نوع القسيمة\",\r\n            error: \"نوع القسيمة غير صحيح, الرجاء إدخال النوع الصحيح.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.coupons_num < 1) {\r\n        setErrors({\r\n          ...errors,\r\n          coupons_num: {\r\n            name: \"عدد القسائم\",\r\n            error: \"عدد القسائم يجب أن يكون 1 على الأقل\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.coupon_price < 10) {\r\n        setErrors({\r\n          ...errors,\r\n          coupon_price: {\r\n            name: \"قيمة القسيمة\",\r\n            error: \"قيمة القسيمة يجب أن تكون 10$ على الأقل.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.branches_num < 1) {\r\n        setErrors({\r\n          ...errors,\r\n          branches_num: {\r\n            name: \"عدد الفروع\",\r\n            error: \"عدد الفروع أقل من 1, الرجاء إدخال عدد الفورع بالشكل الصحيح.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.branches_num > 5) {\r\n        setErrors({\r\n          ...errors,\r\n          branches_num: {\r\n            name: \"عدد الفروع\",\r\n            error: \"عدد الفروع أكبر من 5, الرجاء إدخال عدد الفورع بالشكل الصحيح.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (new Date(state.start) < new Date(minDateToToday())) {\r\n        setErrors({\r\n          ...errors,\r\n          start: {\r\n            name: \"تاريح بداية القسائم\",\r\n            error: \"التاريخ المدخل غير صحيح, الرجاء إدخال التاريخ بدءاً من تاريخ اليوم.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.expire < 0) {\r\n        setErrors({\r\n          ...errors,\r\n          expire: {\r\n            name: \"صلاحية القسيمة\",\r\n            error: \"الرجاء إدخال قيمة الخانة 0 أو أكبر فقط.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.expire > 20) {\r\n        setErrors({\r\n          ...errors,\r\n          expire: {\r\n            name: \"صلاحية القسيمة\",\r\n            error: \"صلاحية القسيمة 30 يوم كحد أقصى\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else if (state.onsite < 1) {\r\n        setErrors({\r\n          ...errors,\r\n          onsite: {\r\n            name: \"فترة العرض\",\r\n            error: \"يجب أن تكون فترة العرض ليوم واحد على الأقل.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else {\r\n        setErrors({});\r\n        checkBalance();\r\n      }\r\n\r\n    }\r\n  \r\n    const handleChange = (e) => {\r\n      e.preventDefault();\r\n\r\n      // Reset Errors\r\n      setErrors({});\r\n  \r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.value\r\n      });\r\n    }\r\n\r\n    const handleBranchesNum = (e) => {\r\n      e.preventDefault();\r\n\r\n      // Edit Branches Array based On Value Of Branches Num.\r\n      var num = parseInt(e.target.value);\r\n      let loopList = [...Array(parseInt(num))]\r\n      let branches_list = []\r\n\r\n      loopList.forEach(_ => {\r\n        branches_list.push({city: '', name: '', map: ''})\r\n      });\r\n\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.value,\r\n        branches: branches_list\r\n      });\r\n\r\n    }\r\n\r\n    const minDateToToday = () => {\r\n      var today = new Date();\r\n\r\n      var dd = String(today.getDate());\r\n      var mm = String(today.getMonth() + 1);\r\n      var yy = today.getFullYear();\r\n\r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd}T00:00:00`;\r\n    }\r\n\r\n    return(\r\n      <form onSubmit={handleNext}>\r\n        \r\n        <p className=\"font-weight-lighter font-info text-muted text-right mt-4\">\r\n          <i className=\"fa fa-star-of-life fa-xs\"/> الحقول المسبوقة بعلامة * ضرورية.\r\n          <br/>\r\n          <i className=\"fa fa-star-of-life fa-xs\"/> عدد الفروع 5 كحد أقصى.\r\n          <br/>\r\n          <i className=\"fa fa-star-of-life fa-xs\"/> قيمة القسيمة لا تقل عن 10 دولار.\r\n          <br/>\r\n          <i className=\"fa fa-star-of-life fa-xs\"/> صلاحية القسيمة 10 أيام تلقائياً, بإمكانك إضافة 20 يوم إضافي.\r\n        </p>\r\n        \r\n        <div className=\"row mt-2\">\r\n          \r\n          <div className=\"form-group col-sm-12\">\r\n            <label htmlFor=\"coupon_type\" className=\"font-weight-bold float-right\">* نوع القسيمة : </label>\r\n            <div className=\"input-group\">\r\n              <select onChange={handleChange} required id=\"coupon_type\" defaultValue={state.coupon_type} className={\"custom-select col-sm-6 \" + (errors[\"coupon_type\"] ? \"is-invalid\" : \"\")}>\r\n                {state.coupon_type ? null : (<option value=\"\" defaultValue>نوع القسيمة</option>)}\r\n                {\r\n                  couponTypes.map((type, index) => (\r\n                    <option key={index} value={type}>{type}</option>\r\n                  ))\r\n                }\r\n              </select>\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n\r\n        <div className=\"row mt-2\">\r\n          \r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"coupons_num\" className=\"font-weight-bold float-right\">\r\n            * عدد القسائم : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input required id=\"coupons_num\" onChange={handleChange} type=\"number\" min=\"1\" defaultValue={state.coupons_num} className={\"form-control col-sm-6 \" + (errors[\"coupons_num\"] ? \"is-invalid\" : \"\")}/>\r\n            </div>\r\n          \r\n          </div>\r\n\r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"coupon_price\" className=\"font-weight-bold float-right\">\r\n            * قيمة القسيمة (دولار$) : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input required id=\"coupon_price\" onChange={handleChange} type=\"number\" defaultValue={state.coupon_price} min=\"10\" step=\"0.01\" className={\"form-control col-sm-6 \" + (errors['coupon_price'] ? \"is-invalid\" : \"\")}/>\r\n            </div>\r\n          \r\n          </div>\r\n          \r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"full_price\" className=\"font-weight-bold float-right\">\r\n            * القيمة الموازنة (دولار$) : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input disabled value={(state.coupons_num * state.coupon_price) || 10} type=\"number\" className=\"form-control col-sm-6\"/>\r\n            </div>\r\n          \r\n          </div>\r\n          \r\n        </div>\r\n\r\n        <div className=\"row mt-2\">\r\n          \r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"coupon_code\" className=\"font-weight-bold float-right\">\r\n              * رمز القسائم :  \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleChange} defaultValue={state.coupon_code} type=\"text\" required id=\"coupon_code\" placeholder=\"مثال : F10e\" className=\"form-control col-sm-6\"/>\r\n            </div>\r\n          \r\n          </div>\r\n          \r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"branches_num\" className=\"font-weight-bold float-right\">* عدد الفروع : </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleBranchesNum} id=\"branches_num\" type=\"number\" min=\"1\" max=\"5\" defaultValue={state.branches_num} className={\"form-control col-sm-6 \" + (errors[\"branches_num\"] ? \"is-invalid\" : \"\")}/>\r\n            </div>\r\n          \r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"row mt-2\">\r\n          \r\n          <div className=\"form-group col-sm-12\">\r\n            \r\n            <label htmlFor=\"description\" className=\"font-weight-bold float-right\">\r\n            * وصف الإعلان (300 حرف) : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <textarea onChange={handleChange} defaultValue={state.description} type=\"text\" required id=\"description\" maxLength=\"300\" placeholder=\"الإعلان يشمل الوجبات والمشروبات....\" className=\"form-control col-sm-6\"/>\r\n            </div>\r\n          \r\n          </div>\r\n        \r\n        </div>\r\n\r\n        <div className=\"row mt-2\">\r\n\r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"start\" className=\"font-weight-bold float-right\">\r\n              * تاريخ بداية القسائم : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input required id=\"start\" onChange={handleChange} defaultValue={state.start} type=\"datetime-local\" min={minDateToToday()} className={\"form-control col-sm-8 \" + (errors[\"start\"] ? \"is-invalid\" : \"\")}/>\r\n            </div>\r\n          \r\n          </div>   \r\n          \r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"expire\" className=\"font-weight-bold float-right\">\r\n              صلاحية القسيمة (بالأيام) : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input id=\"expire\" onChange={handleChange} defaultValue={state.expire} type=\"number\" min=\"0\" max=\"20\" className=\"form-control col-sm-3\"/>\r\n              <div className=\"input-group-append\">\r\n                <input type=\"text\" disabled value=\"+10 أيام\" className={\"form-control col-5 \" + (errors[\"expire\"] ? \"is-invalid\" : \"\")}/>\r\n              </div>\r\n            </div>\r\n          \r\n          </div>   \r\n          \r\n          <div className=\"form-group col-sm-4\">\r\n            \r\n            <label htmlFor=\"onsite\" className=\"font-weight-bold float-right\">\r\n              * فترة العرض (بالأيام) : \r\n            </label>\r\n            <div className=\"input-group\">\r\n              <input required id=\"onsite\" onChange={handleChange} type=\"number\" min=\"1\" defaultValue={state.onsite} className={\"form-control col-sm-6 \" + (errors[\"onsite\"] ? \"is-invalid\" : \"\")}/>\r\n            </div>\r\n          \r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"input-group justify-content-center mt-4\">\r\n          <button type=\"submit\" className=\"btn btn-md btn-outline-primary font-weight-bold\">التالي</button>\r\n        </div>\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  const newGroupFormSecond = () => {\r\n\r\n    const handleChange = (e) => {\r\n      e.preventDefault();\r\n\r\n      if (e.target.id.split(\"-\")[0] === \"city\" && !cities.includes(e.target.value)){\r\n        setErrors({\r\n          ...errors,\r\n          [e.target.id]: {\r\n            name: \"المدينة\",\r\n            error: \"المدينة غير صحيحة, الرجاء تحديد مدينة صحيحة.\",\r\n            type: \"warning\"\r\n          }\r\n        })\r\n      } else {\r\n        setErrors({});\r\n        // Get keys => NameSpace & ID\r\n        var keys = e.target.id.split('-')\r\n        let namespace = keys[0];\r\n        let id = keys[1];\r\n\r\n        // Keeping The State, & Changing Branches\r\n        let CurState = {...state}\r\n        let CurBranches = [...CurState.branches]\r\n\r\n        let TargetBranch = {...CurBranches[id], [namespace]: e.target.value}\r\n\r\n        CurBranches[id] = TargetBranch\r\n\r\n        setState({\r\n          ...state,\r\n          branches: CurBranches\r\n        });\r\n      }\r\n\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n\r\n      // Validate Data.\r\n      var validated = true;\r\n      if (state.branches.length < 1) {\r\n        validated = false;\r\n        setErrors({\r\n          ...errors,\r\n          'city-0': {\r\n            name: 'المدينة',\r\n            error: 'الرجاء إدخال المدينة للفرع 1',\r\n            type: 'warning'\r\n          }\r\n        })\r\n      }\r\n      for (let i = 0; i < state.branches.length; i++) {\r\n        if (!state.branches[i].city || state.branches[i].city === \"\") {\r\n          validated = false;\r\n          setErrors({\r\n            [`city-${i}`]: {\r\n              name: 'المدينة',\r\n              error: `الرجاء إدخال المدينة للفرع ${i+1}`,\r\n              type: 'warning'\r\n            }\r\n          });\r\n          break;\r\n        } else if (!state.branches[i].name || state.branches[i].name === \"\") {\r\n          validated = false;\r\n          setErrors({\r\n            [`name-${i}`]: {\r\n              name: 'إسم الفرع',\r\n              error: `الرجاء إدخال إسم الفرع للفرع ${i+1}`,\r\n              type: 'warning'\r\n            }\r\n          });\r\n          break;\r\n        } else if (!state.branches[i].map || state.branches[i].map === \"\") {\r\n          validated = false;\r\n          setErrors({\r\n            [`map-${i}`]: {\r\n              name: 'موقع الفرع',\r\n              error: `الرجاء إدخال موقع الفرع للفرع ${i+1}`,\r\n              type: 'warning'\r\n            }\r\n          });\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (validated) {\r\n        setUploaded(true);\r\n      }\r\n    }\r\n\r\n    return(\r\n      <form onSubmit={handleSubmit}>\r\n        <p className=\"font-weight-lighter font-info text-muted text-right mt-4\">\r\n          <i className=\"fa fa-star-of-life fa-xs\"/> الحقول المسبوقة بعلامة * ضرورية.\r\n        </p>\r\n\r\n        <div className=\"mt-2\">\r\n\r\n          {[...Array(parseInt(state.branches_num))].map((_, ind) => (\r\n            \r\n            <div key={ind}>\r\n              <p className=\"text-right font-weight-bold\">المدينة-الفرع ({ind+1}) : </p>\r\n\r\n              <div className=\"row mt-5\">\r\n                \r\n                <div className=\"form-group col-sm-4\">\r\n                  <label htmlFor={`city-${ind}`} className=\"font-weight-bold float-right\">* المدينة :</label>\r\n                  <div className=\"input-group\">\r\n                    <select required onChange={handleChange} defaultValue={state.branches[ind] && state.branches[ind].city} name=\"branches[]\" id={`city-${ind}`} className={\"custom-select font-weight-bold col-sm-8 \" + (errors[`city-${ind}`] ? \"is-invalid\" : \"\")}>\r\n                      {state.branches[ind] && state.branches[ind].city ? null : (<option value=\"\" defaultValue>حدد المدينة</option>)}\r\n                      {cities && cities.map((city, index) => (\r\n                        <option className=\"font-weight-bold\" key={index} value={city}>{city}</option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"form-group col-sm-4\">\r\n                  <label htmlFor={`name-${ind}`} className=\"font-weight-bold float-right\">* إسم الفرع :</label>\r\n                  <div className=\"input-group\">\r\n                    <input required onChange={handleChange} defaultValue={state.branches[ind] && state.branches[ind].name} type=\"text\" id={`name-${ind}`} className={\"form-control col-sm-8 \" + (errors[`name-${ind}`] ? 'is-invalid' : '')}/>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"form-group col-sm-10\">\r\n                  <label htmlFor={`map-${ind}`} className=\"float-right font-weight-bold\">* موقع الفرع (رابط Google Maps) : </label>\r\n                  <div className=\"input-group\">\r\n                    <input required onChange={handleChange} defaultValue={state.branches[ind] && state.branches[ind].map ? state.branches[ind].map : \"https://www.google.com/maps/place/\"} dir='ltr' id={`map-${ind}`}\r\n                     type=\"text\" className={\"form-control col-sm-8 \" + (errors[`map-${ind}`] ? 'is-invalid' : '')}/>\r\n                  </div>\r\n                </div>\r\n              \r\n              </div>\r\n\r\n              <hr/>\r\n            </div>\r\n\r\n          ))}\r\n\r\n        </div>\r\n        \r\n        <div className=\"input-group justify-content-center mt-4\">\r\n          <button type=\"submit\" className=\"btn btn-md btn-outline-success font-weight-bold\">إضافة الإعلان</button>\r\n          <button onClick={() => setForm(1)} className=\"btn btn-md btn-outline-grey font-weight-bold\">السابق</button>\r\n        </div>\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  const LoadForms = () => {\r\n\r\n    switch(form){\r\n      case 1:\r\n        return newGroupFormFirst();\r\n      case 2:\r\n        return newGroupFormSecond();\r\n      default:\r\n        return newGroupFormFirst();\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mt-5 pt-5 pb-5\">\r\n\r\n      <div className=\"container text-center mt-5\">\r\n        <span className=\"display-6 qsemh-turq shadow-text\">\r\n          إضافة مجموعة قسائم جديدة\r\n        </span>\r\n      </div>\r\n\r\n      <hr/>\r\n\r\n      <div className=\"container text-center mt-4\">\r\n        <div className=\"card shadow-md p-3 bg-light-grey\">\r\n          <p className=\"card-title text-info\">\r\n            <span className=\"display-7\">مجموعة جديدة : </span>\r\n            <span className=\"display-8 float-left text-dark\">({form}/2)</span>\r\n          </p>\r\n          <hr/>\r\n          <div className=\"container mb-2\">\r\n            {loadErrors()}\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {LoadForms()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Flash State Modal */}\r\n      <Modal show={balanceModal.view} onHide={() => {setBalanceModal({view: false, user_balance: null})}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">رصيد المعلن</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          <p className=\"font-weight-bold\">\r\n            رصيدك الحالي : {balanceModal.user_balance}$\r\n            <br/>\r\n            يجب أن يكون رصيدك أكبر من القيمة الموازنة ({state.coupon_price*state.coupons_num}$).\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={() => {setBalanceModal({view: false, user_balance: null})}}>\r\n              العودة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n    </div>\r\n  )\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport copy from 'copy-to-clipboard'\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nexport const RedeemCoupons = (props) => {\r\n\r\n  const URLQuery = new URLSearchParams(props.location.search)\r\n\r\n  const [QRCode, setQRCode] = useState(URLQuery.get('qrcode'));\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Access Token Validation\r\n  // const [token, setToken] = useState();\r\n\r\n  // Current Page State (code_input, validate, progress, view)\r\n  const [state, setState] = useState('code_input');\r\n\r\n  // View Coupon Information\r\n\tconst [info, setInfo] = useState({coupon: null, group: null})\r\n\t\r\n\t// Confirmation\r\n\tconst [confirmModal, setConfirmModal] = useState(false);\r\n\tconst [modalErrors, setModalErrors] = useState({});\r\n\r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n    fetch('/api/authenticate/associate', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n        \r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          else {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n              }\r\n            })\r\n          }\r\n          \r\n        }\r\n      })\r\n    })\r\n\r\n    if(QRCode){\r\n      fetch('/api/user/coupon/validate_provider', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({qr_code: QRCode})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setInfo({\r\n              coupon: data.coupon,\r\n              group: data.group\r\n            });\r\n            setState('view');\r\n          } else {\r\n            if (data.code === 'SERVER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_GROUP_COMPANY'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'القسيمة ينتمي لشركة أخرى غير شركة المستخدم الحالي.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_COUPON'){\r\n              setErrors({\r\n                qr_code: {\r\n                  name: 'رمز التعريف',\r\n                  error:`لا يوجد قسيمة يطابق رمز التعريف المدخل (${QRCode}), الرجاء إدخال رمز تعريف آخر.`,\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_PROVIDER'){\r\n              setErrors({\r\n                noProvider: {\r\n                  name: 'القسيمة',\r\n                  error: \"القسيمة لا يتضمن معلن, يبدو أن هناك خطأ ما, الرجاء التواصل مع الإدارة.\",\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }, [])\r\n  /*eslint-enable */\r\n\r\n  const loadCodeForm = () => {\r\n\r\n    const handleSubmit = (e) => {\r\n      e.preventDefault();\r\n\r\n      const ValidateQRCode = async() => {\r\n        await fetch('/api/user/coupon/validate_provider', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n            'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n          },\r\n          body: JSON.stringify({qr_code: QRCode})\r\n        }).then(resp => {\r\n          resp.json().then(data => {\r\n            if (resp.ok){\r\n              setInfo({\r\n                coupon: data.coupon,\r\n                group: data.group\r\n              });\r\n              setState('view');\r\n            } else {\r\n              if (data.code === 'SERVER'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                  }\r\n                })\r\n              }\r\n              if ([\r\n                'INVALID_AUTH_HEADER', \r\n                'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n                'ACCESS_DENIED', 'AUTH_ERROR'\r\n              ].includes(data.code)) {\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'INVALID_GROUP_COMPANY'){\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'القسيمة ينتمي لشركة أخرى غير شركة المستخدم الحالي.'\r\n                  }\r\n                })\r\n              }\r\n              if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n                localStorage.clear();\r\n                sessionStorage.clear();\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'NO_MATCH_COUPON'){\r\n                setErrors({\r\n                  qr_code: {\r\n                    name: 'رمز التعريف',\r\n                    error:`لا توجد قسيمة تطابق رمز التعريف المدخل (${QRCode}), الرجاء إدخال رمز تعريف آخر.`,\r\n                    type: 'warning'\r\n                  }\r\n                })\r\n              }\r\n              if (data.code === 'NO_PROVIDER'){\r\n                setErrors({\r\n                  noProvider: {\r\n                    name: 'القسيمة',\r\n                    error: \"القسيمة لا تتضمن معلن, يبدو أن هناك خطأ ما, الرجاء التواصل مع الإدارة.\",\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          })\r\n        })\r\n      }\r\n\r\n      ValidateQRCode();\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n      e.preventDefault();\r\n\r\n      setErrors({});\r\n\r\n      setQRCode(e.target.value);\r\n    }\r\n\r\n    return (\r\n      <form onSubmit={handleSubmit}>\r\n\r\n        <div className=\"container text-center\">\r\n\r\n          <span className=\"display-8 qsemh-turq\">\r\n            للإطلاع على بيانات القسيمة الرجاء إدخال رمز التعريف.\r\n          </span>\r\n\r\n        </div>\r\n\r\n        <hr/>\r\n\r\n        <div className=\"container mt-4\">\r\n\r\n          <div className=\"row\">\r\n\r\n            <div className=\"col-sm-4 text-right\">\r\n\r\n              <label htmlFor=\"qr_code\" className=\"font-weight-bold\">رمز التعريف : </label>\r\n              <div className=\"input-group\">\r\n                <input onChange={handleChange} required type=\"text\" id=\"qr_code\" placeholder=\"الرجاء إدخال رمز تعريف القسيمة\" className={\"form-control col-sm-12 \" + (errors['qr_code'] ? 'is-invalid' : '')}/>\r\n                <div className=\"input-group-append\">\r\n                  <button type=\"submit\" className=\"btn-sm btn-outline-dark font-weight-bold\">إدخال</button>\r\n                </div>\r\n              </div>\r\n              \r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </form>\r\n    )\r\n  }\r\n\r\n  const ConfirmationProgress = () => (\r\n    <div className=\"container text-center mt-5\">\r\n      <p className=\"text-info font-weight-bold\">الرجاء إنتظار تأكيد رمز التحقق</p>\r\n      <div className=\"spinner-border text-info display-8\" role=\"status\">\r\n        <span className=\"sr-only\">Loading...</span>\r\n      </div>\r\n    </div>\r\n\t)\r\n  \r\n  \r\n\tconst handleConfirm = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst RedeemCoupon = async() => {\r\n\t\t\tawait fetch('/api/user/coupon/redeem', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t\t'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({coupon_id: info.coupon.id})\r\n\t\t\t}).then(resp => {\r\n\t\t\t\tresp.json().then(data => {\r\n\t\t\t\t\tif (resp.ok){\r\n\t\t\t\t\t\tsetRedirect({\r\n\t\t\t\t\t\t\tredirect: true,\r\n\t\t\t\t\t\t\tflash: {\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\ttitle: 'إستخدام القسيمة',\r\n\t\t\t\t\t\t\t\tmessage: 'تم تأكيد إستخدام القسيمة بنجاح!'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (data.code === 'SERVER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب المعلن أولاً.'\r\n                }\r\n              })\r\n            }\r\n\t\t\t\t\t\tif (data.code === 'NO_MATCH_COUPON'){\r\n              setModalErrors({\r\n                coupon_id: {\r\n                  name: 'رمز التعريف',\r\n                  error:`لا يوجد قسيمة يطابق رمز التعريف المدخل (${QRCode}), الرجاء إدخال رمز تعريف آخر.`,\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n\t\t\t\t\t\tif (data.code === 'ONHOLD_COUPON'){\r\n\t\t\t\t\t\t\tsetModalErrors({\r\n\t\t\t\t\t\t\t\tonholdStatus: {\r\n\t\t\t\t\t\t\t\t\tname: 'حالة القسيمة',\r\n\t\t\t\t\t\t\t\t\terror: 'القسيمة معلق حالياً, لا يمكن إستخدام القسائم المعلقة.',\r\n\t\t\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.code === 'USED_COUPON'){\r\n\t\t\t\t\t\t\tsetModalErrors({\r\n\t\t\t\t\t\t\t\tonholdStatus: {\r\n\t\t\t\t\t\t\t\t\tname: 'حالة القسيمة',\r\n\t\t\t\t\t\t\t\t\terror: 'تم إستخدام القسيمة بالفعل, الرجاء محاولة إدخال قسيمة آخر!',\r\n\t\t\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.code === 'EXPIRED_COUPON'){\r\n\t\t\t\t\t\t\tsetModalErrors({\r\n\t\t\t\t\t\t\t\texpired: {\r\n\t\t\t\t\t\t\t\t\tname: 'حالة القسيمة',\r\n\t\t\t\t\t\t\t\t\terror: 'القسيمة منتهي الصلاحية!',\r\n\t\t\t\t\t\t\t\t\ttype: 'danger'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (data.code === 'CANCELED_COUPON'){\r\n\t\t\t\t\t\t\tsetModalErrors({\r\n\t\t\t\t\t\t\t\tcanceled: {\r\n\t\t\t\t\t\t\t\t\tname: 'حالة القسيمة',\r\n\t\t\t\t\t\t\t\t\terror: 'لقد تم إلغاء القسيمة, الرجاء التواصل مع الإدارة لمعرفة الأسباب.',\r\n\t\t\t\t\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tRedeemCoupon();\r\n\r\n\t}\r\n\r\n  const CouponInfo = () => {\r\n\r\n    const OpenBranchMap = (e) => {\r\n      e.preventDefault();\r\n      window.open(e.target.id)\r\n    }\r\n\r\n    const getStatus = (status) => {\r\n\r\n      let statuses = {\r\n        available: [\r\n          'text-success', 'ساري المفعول'\r\n        ],\r\n        onhold: [\r\n          'text-grey', 'في الإنتظار'\r\n        ],\r\n        expired: [\r\n          'text-danger', 'منتهي الصلاحية'\r\n        ],\r\n        used: [\r\n          'text-warning', 'مستخدم'\r\n        ],\r\n        canceled: [\r\n          'text-dark', 'ملغي'\r\n        ]\r\n      }\r\n  \r\n      return statuses[status]\r\n    }\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n      var s = target_date.getSeconds();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}:${(s>9?'':'0')+s}`\r\n    }\r\n\r\n    let status = getStatus(info.coupon.coupon_status)\r\n\r\n    return(\r\n      <div className=\"container text-center\">\r\n\r\n        <span className=\"display-8 qsemh-orange\">معلومات القسيمة</span>\r\n\r\n        <hr/>\r\n\r\n\t\t\t\t<p className=\"text-muted lead\">\r\n\t\t\t\t\t<i className=\"fa fa-star-of-life fa-s ml-2\"/>\r\n\t\t\t\t\tالرجاء الضغط على زر <span className=\"text-success font-weight-bold\"> تأكيد الإستخدام </span>\r\n\t\t\t\t\tفقط عند توافق الشروط, وتطبيق الخصم.\r\n\t\t\t\t</p>\r\n\r\n        <div className=\"table-responsive\">\r\n\r\n          <table className=\"table table-sm table-bordered mt-4\">\r\n            \r\n\t\t\t\t\t\t<tbody>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">الشركة</th>\r\n                <td className=\"table-header text-muted\">{info.group.company}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">النوع</th>\r\n                <td className=\"table-header text-muted\">{info.group.type}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">الدولة</th>\r\n                <td className=\"table-header text-muted\">{info.group.country}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">الفروع</th>\r\n                <td className=\"table-header\">\r\n                {info.group.branches.map((branch, index) => {\r\n                  if (info.group.branches.length === (index+1)){\r\n                    return(<span key={index}><Link className=\"text-info\" to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>.</span>)\r\n                  } else {\r\n                    return(<span key={index}><Link className=\"text-info\" to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>, </span>)\r\n                  }\r\n                })}\r\n                </td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">البداية</th>\r\n                <td dir='ltr' className=\"table-header text-muted\">{getDate(info.group.start_date)}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">الإنتهاء</th>\r\n                <td dir='ltr' className=\"table-header text-muted\">{getDate(info.group.expire_date)}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">QRCode</th>\r\n                <td className=\"table-header text-muted\">{info.coupon.qr_code}</td>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th className=\"th-w table-header text-dark\">الحالة</th>\r\n                <td className={`table-header ${status[0]}`}>{status[1]}</td>\r\n              </tr>\r\n\r\n\t\t\t\t\t\t\t<tr>\r\n                <th className=\"th-w table-header text-dark\">القيمة</th>\r\n                <td className=\"table-header text-muted\">{info.group.coupon_price}$ ({info.group.coupon_price*3.75} ريال سعودي)</td>\r\n              </tr>\r\n\r\n\t\t\t\t\t\t\t<tr className=\"mt-4\">\r\n                <th className=\"th-w table-header-lg text-dark\">الرمز</th>\r\n                <td className=\"table-header-lg\"><Link title=\"نسخ رمز القسيمة\" to=\"#\" onClick={() => {copy(info.coupon.coupon_code)}} className=\"text-primary\">{info.coupon.coupon_code}</Link></td>\r\n              </tr>\r\n\r\n            </tbody>\r\n          \r\n\t\t\t\t\t</table>\r\n\r\n        </div>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t<div className=\"container mt-4\">\r\n\r\n\t\t\t\t\t{\r\n            info.coupon && info.coupon.coupon_status === \"available\" ? (\r\n              <div className=\"justify-content-center\">\r\n                <button onClick={() => {setConfirmModal(true)}} className=\"btn btn-lg btn-success\">تأكيد الإستخدام</button>\r\n              </div>\r\n            ) : null\r\n          }\r\n\r\n\t\t\t\t\t<div className=\"justify-content-center\">\r\n\t\t\t\t\t\t<button onClick={() => {setRedirect({redirect: true, flash: null})}} className=\"btn btn-md btn-grey\">إلغاء</button>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n    )\r\n  }\r\n\r\n  const LoadContent = () => {\r\n    switch(state){\r\n      case 'code_input':\r\n        return loadCodeForm();\r\n      case 'progress':\r\n        return ConfirmationProgress();\r\n      case 'view':\r\n        return CouponInfo();\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n\t}\r\n\t\r\n\tconst loadModalErrors = () => {\r\n    if (Object.keys(modalErrors).length !== 0 && modalErrors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {modalErrors ? Object.entries(modalErrors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n\r\n      <div className=\"mt-5 pt-5\">\r\n        <div className=\"container\">\r\n          {loadErrors()}\r\n        </div>\r\n        {LoadContent()}\r\n      </div>\r\n\r\n\t\t\t{/* Confirm Redeem */}\r\n\t\t\t<Modal show={confirmModal} onHide={() => {setConfirmModal(false)}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تأكيد إستخدام القسيمة</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\t\t\t\t\t<div className=\"container mt-2\">\r\n\t\t\t\t\t\t{loadModalErrors()}\r\n\t\t\t\t\t</div>\r\n          <p className=\"mt-2 lead text-primary\">\r\n            الرجاء التأكد من المعلومات, وتطبيق الخصم على الفاتورة قبل تأكيد الإستخدام.\r\n          </p>\r\n\t\t\t\t\t<p className=\"mt-4 font-info text-muted\">\r\n\t\t\t\t\t\t<i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n\t\t\t\t\t\tعلماً أنه في حالة إساءة إستخدام هذه الميزة, ستتطبق عقوبات كما هو مذكور في <Link to=\"#\" onClick={() => window.open(\"/terms\")} className=\"text-danger\">الشروط والأحكام</Link>\r\n\t\t\t\t\t</p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n\t\t\t\t\t<div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={() => {setConfirmModal(false)}}>\r\n              إلغاء\r\n            </Button>\r\n\t\t\t\t\t\t<Button variant=\"outline-success\" onClick={handleConfirm}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nconst MyGroups = () => {\r\n\r\n  // User\r\n  const userData = localStorage.maidan_user\r\n  const [User, setUser] = useState(userData ? {...JSON.parse(userData)} : {});\r\n\r\n  const [groups, setGroups] = useState({groups: null, limit: 50});\r\n  const [associates, setAssociates] = useState({users: null, limit: 50});\r\n  const [coupons, setCoupons] = useState({coupons: null, limit: 50});\r\n  \r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  // Modals\r\n  const [deleteModal, setDeleteModal] = useState({view: false, group_id: null});\r\n  const [settingsModal, setSettingsModal] = useState(false);\r\n  const [settingState, setSettingState] = useState({});\r\n  const [imagesModal, setImagesModal] = useState(false);\r\n  const [imageState, setImageState] = useState([]);\r\n  \r\n  const [removeAssoc, setRemoveAssoc] = useState({view: false, id: null});\r\n  const [associationModal, setAccosiationModal] = useState({view: false, user: null});\r\n  const [searchUsers, setSearchUsers] = useState({});\r\n\r\n\r\n  const [balanceModal, setBalanceModal] = useState({view: false, user_balance: null});\r\n  \r\n  const [imgPreviewModal, setImgPreviewModal] = useState({view: false, image: null});\r\n  const [imgDeleteModal, setImgDeleteModal] = useState({view: false, image: null});\r\n\r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n    fetch(`/api/panel/user/groups/${User.uid}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups({\r\n            groups: data.groups,\r\n            limit: 50\r\n          });\r\n          setAssociates({\r\n            users: data.associates,\r\n            limit: 50\r\n          });\r\n          setCoupons({\r\n            coupons: data.coupons,\r\n            limit: 50\r\n          });\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n  /*eslint-enable */\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    setSettingState({\r\n      ...settingState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const Update = async() => {\r\n      await fetch(`/api/panel/user/groups/${User.uid}/${settingState.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({coupons_plus: settingState.coupons_plus})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setGroups({\r\n              ...groups,\r\n              groups: data.groups,\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if (data.code === 'AUTH_ERROR'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACCESS_DENIED'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_TOKEN'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_AUTH_HEADER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_LOGGED_IN'){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'معرف الإعلان',\r\n                  error: 'الإعلان غير موجود أو قد تم حذفه مسبقاً.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_YOURS'){\r\n              setErrors({\r\n                Company: {\r\n                  name: 'شركة الإعلان',\r\n                  error: 'أنت لا تملك صلاحية التعديل على هذا الإعلان.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إضافة قسائم للإعلان, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'EXPIRED'){\r\n              setErrors({\r\n                Expired: {\r\n                  name: 'تعديل الإعلان',\r\n                  error: 'لا يمكنك تعديل إعلان منتهي.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setErrors({\r\n                coupons_plus: {\r\n                  name: 'تعديل الإعلان',\r\n                  error: 'الرجاء إدخال جميع البيانات المطلوبة أولاً',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    const checkBalance = async() => {\r\n      await fetch(\"/api/groups/balance\", {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({full_price: settingState.coupon_price*(settingState.coupons_num+parseInt(settingState.coupons_plus))})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n  \r\n            if (data.eligible) {\r\n              Update();\r\n            } else {\r\n              setBalanceModal({view: true, user_balance: data.user_balance});\r\n            }\r\n  \r\n          } else {\r\n            if (data.code === 'AUTH_ERROR'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACCESS_DENIED'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_TOKEN'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_AUTH_HEADER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_LOGGED_IN'){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء محاولة طلب آخر.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    checkBalance();\r\n  }\r\n\r\n  const hideGroup = (e) => {\r\n    e.preventDefault();\r\n\r\n    const Hide = async() => {\r\n      await fetch(`/api/panel/user/groups/${User.uid}/${deleteModal.group_id}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setGroups({\r\n              ...groups,\r\n              groups: data.groups,\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if (data.code === 'AUTH_ERROR'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACCESS_DENIED'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_TOKEN'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_AUTH_HEADER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_LOGGED_IN'){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'معرف الإعلان',\r\n                  error: 'الإعلان الذي تحاول إخفائه غير موجود, أو قد تم حذفه مسبقاً.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_YOURS'){\r\n              setErrors({\r\n                Company: {\r\n                  name: 'شركة الإعلان',\r\n                  error: 'أنت لا تملك صلاحية التعديل على هذا الإعلان.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إزالة الإعلان, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_EXPIRED'){\r\n              setErrors({\r\n                Expired: {\r\n                  name: 'الإعلان',\r\n                  error: 'لا يمكنك إزالة إعلان غير منتهي.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    Hide();\r\n  }\r\n\r\n  /* Ads Images */\r\n\r\n  const handleImagesChange = (e) => {\r\n    let fileToUpload = e.target.files\r\n    let id = e.target.id\r\n\r\n    if (e.target.value) {\r\n\r\n      // Reset File Errors\r\n      let prev_errors = {...errors};\r\n      delete prev_errors['ImageSize']\r\n      delete prev_errors['Images']\r\n      setErrors(prev_errors)\r\n      \r\n      // Image Size Validation\r\n      let reader = new FileReader();\r\n\r\n      // Check File Type.\r\n      var filename = fileToUpload[0].name;\r\n\r\n      var ex = filename.split('.').reverse()[0];\r\n\r\n      let acceptedTypes = ['image/png', 'image/jpg', 'image/jpeg']\r\n      let acceptedEx = ['png', 'jpg', 'jpeg']\r\n\r\n      if (acceptedTypes.includes(fileToUpload[0].type) || acceptedEx.includes(ex)){\r\n        reader.readAsDataURL(fileToUpload[0]);\r\n\r\n        reader.onload = function(e) {\r\n\r\n          let image = new Image();\r\n          image.src = e.target.result;\r\n\r\n          // Validate Width & Height\r\n\r\n          image.onload = function() {\r\n            let height = this.height;\r\n            let width = this.width;\r\n            // Min Width : 800 Max Width : 1280\r\n            // Min Height : 450 Max Height 1280\r\n            if (width < 0 || height < 0){\r\n              fileToUpload[0].value = '';\r\n              setErrors({\r\n                ...errors,\r\n                ImageSize: {\r\n                  name: 'الصورة',\r\n                  error: `أبعاد الصورة (${fileToUpload[0].name}) غير مناسبة, الرجاء رفع صورة بالإبعاد التالية عل الأقل (450*800)`,\r\n                  type: 'warning'\r\n                }\r\n              });\r\n              // Reset Image\r\n              document.getElementById(id).src = null;\r\n              document.getElementById(`${id}-label`).textContent = '';\r\n            } else if (width > 12800 || height > 12800) {\r\n              fileToUpload[0].value = '';\r\n              setErrors({\r\n                ...errors,\r\n                ImageSize: {\r\n                  name: 'الصورة',\r\n                  error: `أبعاد الصورة أكبر من الحد المسموح, الرجاء إختيار صورة أصغر من (1280*1280)`,\r\n                  type: 'warning'\r\n                }\r\n              });\r\n              document.getElementById(id).src = null;\r\n              document.getElementById(`${id}-label`).textContent = '';\r\n            } else {\r\n              document.getElementById(id).src = URL.createObjectURL(fileToUpload[0]);\r\n              document.getElementById(`${id}-label`).textContent = filename;\r\n              \r\n              // Set Images\r\n              let images = imageState;\r\n              images.push(id);\r\n              setImageState(images)\r\n            }\r\n          }\r\n\r\n        }\r\n      } else {\r\n        setErrors({\r\n          ...errors,\r\n          imageType: {\r\n            name: \"الصورة\",\r\n            error: \"الرجاء إدخال صورة بالإمتدادات التالية فقط [png, jpg, jpeg]\",\r\n            type: \"danger\"\r\n          }\r\n        });\r\n        // Reset Images\r\n        document.getElementById(id).src = null;\r\n        document.getElementById(`${id}-label`).textContent = null;\r\n      }\r\n    \r\n    }\r\n  }\r\n\r\n  const handleImagesSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n\r\n    // Add images to formData\r\n    for (let i = 0; i < imageState.length; i++) {\r\n      let image = document.getElementById(imageState[i]).files[0];\r\n      formData.append(imageState[i], image);\r\n    }\r\n\r\n    const UploadImages = async() => {\r\n      await fetch('/api/images', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: formData\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            localStorage.setItem(\"maidan_user\", JSON.stringify(data.user));\r\n            setUser({...JSON.parse(localStorage.maidan_user)});\r\n            resetModals();\r\n          } else {\r\n            document.getElementById('UploadBtn').disabled = false;\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                ...errors,\r\n                ImageUpload: {\r\n                  name: 'الصورة',\r\n                  error: 'حدث خطأ أثناء محاولة رفع الصور للسيرفر, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_REQUEST'){\r\n              setErrors({\r\n                ...errors,\r\n                ImageUpload: {\r\n                  name: 'الصورة',\r\n                  error: 'يجب عليك تحديد الصور أولاً قبل محاولة رفعها.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n    document.getElementById('UploadBtn').disabled = true;\r\n    UploadImages();\r\n  }\r\n\r\n  const validateAdImages = (e) => {\r\n    e.preventDefault();\r\n\r\n    var images = User.ad_images || []\r\n    if (User.main_ad_image) {\r\n      images.push(User.main_ad_image);\r\n    }\r\n\r\n    if (images.length > 0){\r\n      window.location.href = \"/admin/groups/new\";\r\n    }\r\n    else {\r\n      setImagesModal(true);\r\n      setErrors({\r\n        ...errors,\r\n        ImagePrimary: {\r\n          name: 'صور الإعلان',\r\n          error: 'الرجاء إدخال صور الإعلان أولاً قبل إضافة إعلان جديد',\r\n          type: 'danger'\r\n        }\r\n      });\r\n    }\r\n    \r\n  }\r\n\r\n  const handleImageDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    const DeleteImage = async() => {\r\n      await fetch(`/api/images/${imgDeleteModal.image}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            localStorage.setItem(\"maidan_user\", JSON.stringify(data.user));\r\n            setUser({...JSON.parse(localStorage.maidan_user)});\r\n            setErrors({});\r\n          }\r\n          else {\r\n            if (data.code === \"MAIN_AD_IMAGE\") {\r\n              setErrors({\r\n                ImageDelete: {\r\n                  name: \"حذف الصورة\",\r\n                  error: \"لا يمكنك حذف الصورة الرئيسية, يمكنك فقط إستبدالها.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n            } else {\r\n              setErrors({\r\n                ImageDelete: {\r\n                  name: \"حذف الصورة\",\r\n                  error: \"حدث خطأ أثناء محاولة حذف الصورة.\",\r\n                  type: \"danger\"\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    DeleteImage();\r\n    // Reset Delete Modal\r\n    setImgDeleteModal({view: false, image: null});\r\n  }\r\n\r\n  /* Ads Images */\r\n\r\n  const LoadGroups = () => {\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n\r\n    const getStatus = (status) => {\r\n      let types = {\r\n        canceled: ['ملغي', 'warning'],\r\n        available: ['متوفر', 'success'],\r\n        expired: ['منتهي', 'danger'],\r\n        finished: ['إنتهى العرض', 'secondary']\r\n      }\r\n\r\n      return types[status]\r\n    }\r\n\r\n    const getDistributeType = (type) => {\r\n      let types = {\r\n        display: ['توزيع عشوائي', 'dark'],\r\n        request: ['عند الطلب', 'primary']\r\n      }\r\n\r\n      return types[type]\r\n    }\r\n\r\n    const handleSettings = (group) => {\r\n\r\n      setSettingState(group)\r\n      setSettingsModal(true);\r\n\r\n    }\r\n\r\n    const groups_patch = groups.groups && groups.groups.slice(0, groups.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          groups_patch ? groups_patch.map((group, index) => {\r\n            let status = getStatus(group.status)\r\n            let disType = getDistributeType(group.distribute_type)\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">\r\n                  <Link className=\"text-primary\" to={`/ads/${group.id}`}>{group.id}</Link>\r\n                </th>\r\n                <td className=\"table-header\">{group.coupon_code}</td>\r\n                <td className=\"table-header\">{group.coupons_num}</td>\r\n                <td className=\"table-header\">{group.coupon_price}$</td>\r\n                <td className=\"table-header\">{group.full_price}$</td>\r\n                <td className=\"table-header\">{group.coupons_left}</td>\r\n                <td className={`table-header text-${disType[1]}`}>{disType[0]}</td>\r\n                <td className={`table-header text-${status[1]}`}>{status[0]}</td>\r\n                <td className=\"table-header\">{group.views}</td>\r\n                {/* <td dir='ltr' className=\"table-header\">{getDate(group.start_date)}</td> */}\r\n                <td dir='ltr' className=\"table-header\">{getDate(group.expire_date)}</td>\r\n                {\r\n                  ['expired', 'finished', 'canceled'].includes(group.status) ? (\r\n                    <td className=\"table-body\">\r\n                      <button onClick={() => {setDeleteModal({view: true, group_id: group.id})}} className=\"btn btn-sm btn-outline-danger font-weight-bold\">إزالة</button>\r\n                    </td>\r\n                  ) : (\r\n                    <td className=\"table-body\">\r\n                      <button onClick={() => {handleSettings(group)}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">الإعدادات</button>\r\n                    </td>\r\n                  )\r\n                }\r\n            </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const LoadAssociates = () => {\r\n    \r\n    const associates_patch = associates.users && associates.users.slice(0, associates.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          associates_patch ? associates_patch.map((user, index) => {\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{user.id}</th>\r\n                <td className=\"table-header\">{user.username}</td>\r\n                <td className=\"table-header\">{user.email}</td>\r\n                <td className=\"table-header\">\r\n                  <button onClick={() => {setRemoveAssoc({view: true, id:user.id})}} className=\"btn btn-sm btn-outline-warning\">إزالة</button>\r\n                </td>\r\n            </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const LoadCoupons = () => {\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n    \r\n    const coupons_patch = coupons.coupons && coupons.coupons.slice(0, coupons.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          coupons_patch ? coupons_patch.map((coupon, index) => {\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{coupon.id}</th>\r\n                <td className=\"table-header\">\r\n                  <Link to={`/ads/${coupon.group_id}`} className=\"text-primary\">#{coupon.group_id}</Link>\r\n                </td>\r\n                <td className=\"table-header\">#{coupon.user_id}</td>\r\n                <td className=\"table-header\">{coupon.qr_code}</td>\r\n                <td className=\"table-header\">{coupon.coupon_price}$</td>\r\n                <td className=\"table-header\">#{coupon.matcher.id}</td>\r\n                <td className=\"table-header\">{coupon.matcher.username}</td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(coupon.redeem_date)}</td>\r\n            </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  /* Associates */\r\n\r\n  const fetchUsersResualts = async(e) => {\r\n    var value = e.target && e.target.value;\r\n    setAccosiationModal({\r\n      ...associationModal,\r\n      user: null\r\n    });\r\n    await fetch('/api/panel/search/associates', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({searchQuery: value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setErrors({});\r\n          if (data.length === 0 && value){\r\n            setErrors({\r\n              users: {\r\n                name: 'المستخدمين',\r\n                error: 'لا يوجد مستخدم يطابق البحث المدخل',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          setSearchUsers({\r\n            users: data.users,\r\n            length: data.length\r\n          });\r\n        } else {\r\n          setErrors({\r\n            users: {\r\n              name: 'خطأ',\r\n              error: 'حدث خطأ أثناء محاولة البحث عن المستخدم, الرجاء المحاولة من جديد لاحقاً.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleUserSelection = (id) => {\r\n\r\n    setErrors({}); // Reset Errors\r\n\r\n    // Remove Color from old Selected, and remove Selected Sign.\r\n    var oldElemnt = document.getElementById(`user-card-${associationModal.user}`);\r\n    var oldSelectedElement = document.getElementById(`user-select-${associationModal.user}`);\r\n    if (oldElemnt){\r\n      oldElemnt.classList.remove('bg-light-grey');\r\n      oldElemnt.classList.add('bg-white');\r\n    }\r\n    if (oldSelectedElement){\r\n      oldSelectedElement.classList.remove('fa-check-circle')\r\n    }\r\n\r\n    // Changing Color of new Selected, and add Selected Sign.\r\n    var newElemnt = document.getElementById(`user-card-${id}`);\r\n    var newSelectedElemnt = document.getElementById(`user-select-${id}`);\r\n    newElemnt.classList.remove('bg-white');\r\n    newElemnt.classList.add('bg-light-grey');\r\n    newSelectedElemnt.classList.add('fa-check-circle')\r\n\r\n    // Adding Selected User as `user` in `Accosiation`\r\n    setAccosiationModal({\r\n      ...associationModal,\r\n      user: id\r\n    });\r\n  }\r\n\r\n  const handleAssociateSubmit = () => {\r\n\r\n    const setAssociate = async() => {\r\n      await fetch(`/api/panel/association/${User.id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({accosiate: associationModal.user})\r\n      }).then(resp => {\r\n        resp.json().then(_ => {\r\n          if (resp.ok) {\r\n            resetModals();\r\n            window.location.reload()\r\n          } else {\r\n            setErrors({\r\n              users: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة تعيين المستخدم, الرجاء المحاولة من جديد لاحقاً.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (!associationModal.user){\r\n      setErrors({\r\n        Select: {\r\n          name: 'مستخدم مساعد',\r\n          error: 'الرجاء تحديد مستخدم قبل الضغط على زر التعيين.',\r\n          type: 'warning'\r\n        }\r\n      });\r\n    } else {\r\n      setAssociate();\r\n    }\r\n  }\r\n\r\n  const removeAssociate = async() => {\r\n    await fetch(`/api/panel/association/${User.id}/remove/${removeAssoc.id}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n    }).then(resp => {\r\n      resp.json().then(_ => {\r\n        if (resp.ok) {\r\n          resetModals();\r\n          window.location.reload()\r\n        } else {\r\n          setErrors({\r\n            Delete: {\r\n              name: 'إزالة المساعد',\r\n              error: 'حدث خطأ أثناء محاولة إزالة المساعد.',\r\n              type: 'danger'\r\n            }\r\n          })\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const AddLimit = (e) => {\r\n    e.preventDefault();\r\n    if (e.target.id === 'groups') {\r\n      \r\n      if (groups.limit < groups.groups.length){\r\n        let new_limit = groups.limit + 50;\r\n        setGroups({...groups, limit: new_limit})\r\n      }\r\n\r\n    } else if (e.target.id === 'coupons') {\r\n\r\n      if (coupons.limit < coupons.coupons.length){\r\n        let new_limit = coupons.limit + 50;\r\n        setCoupons({...coupons, limit: new_limit})\r\n      }\r\n\r\n    } else if (e.target.id === 'associates') {\r\n\r\n      if (associates.limit < associates.users.length){\r\n        let new_limit = associates.limit + 50;\r\n        setAssociates({...associates, limit: new_limit})\r\n      }\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  const ReduceLimit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.target.id === 'groups') {\r\n      \r\n      if (groups.limit > 50){\r\n        let new_limit = groups.limit - 50;\r\n        setGroups({...groups, limit: new_limit})\r\n      }\r\n\r\n    } else if (e.target.id === 'coupons') {\r\n      \r\n      if (coupons.limit > 50){\r\n        let new_limit = coupons.limit - 50;\r\n        setCoupons({...coupons, limit: new_limit})\r\n      }\r\n\r\n    } else if (e.target.id === 'associates') {\r\n      \r\n      if (associates.limit > 50){\r\n        let new_limit = associates.limit - 50;\r\n        setAssociates({...associates, limit: new_limit})\r\n      }\r\n\r\n    }\r\n    \r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset States\r\n    setErrors({});\r\n    setSettingState({});\r\n    setImageState([]);\r\n    setDeleteModal({view: false, group_id: null});\r\n    setRemoveAssoc({view: false, id: null});\r\n    setAccosiationModal({view: false, user: null});\r\n    setSearchUsers({});\r\n\r\n    // Reset Modals\r\n    setSettingsModal(false);\r\n    setImagesModal(false);\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n\r\n      <div className=\"container text-center mt-5 pt-5\">\r\n\r\n        <div className=\"container mt-4\">\r\n\r\n          <span className=\"display-7\">لوحة التحكم ({User.company})</span>\r\n          <div className=\"container-fluid text-center mt-4\">\r\n            <button className=\"btn btn-sm btn-outline-info fixed-width\" onClick={() => {setImagesModal(true)}}>صور الإعلان</button>\r\n            <button className=\"btn btn-sm btn-outline-grey fixed-width\" onClick={validateAdImages}>إعلان جديد</button>\r\n            <button className=\"btn btn-sm btn-outline-danger fixed-width\" onClick={() => {setAccosiationModal({view: true, user: null})}}>إضافة مساعد</button>\r\n            <Link className=\"btn btn-sm btn-outline-primary fixed-width\" to=\"/admin/redeem\">مطابقة قسيمة</Link>\r\n          </div>\r\n          <hr/>\r\n\r\n          <div className=\"container mt-4\">\r\n            <span className=\"display-8\">المساعدين</span>\r\n            <hr/>\r\n            <div className=\"table-responsive mt-4\">\r\n              <table className=\"table table-sm table-bordered\">\r\n                <thead>\r\n                  <tr className=\"bg-light-grey\">\r\n                    <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n                  </tr>\r\n                </thead>\r\n                {LoadAssociates()}\r\n              </table>\r\n              \r\n              <div className=\"justify-content-center\">\r\n                {(associates.users && associates.limit < associates.users.length) ? (<button id=\"associates\" onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n                {associates.limit > 50 ? (<button id=\"associates\" onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n              </div>\r\n              \r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"container mt-5\">\r\n            <span className=\"display-8\">الإعلانات</span>\r\n            <hr/>\r\n            <div className=\"table-responsive mt-4\">\r\n              <table className=\"table table-sm table-bordered\">\r\n                <thead>\r\n                  <tr className=\"bg-light-grey\">\r\n                    <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">رمز القسائم</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">العدد</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">القيمة</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">الموازنة</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">المتبقي</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">نوع التوزيع</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">الحالة</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">المشاهدات</th>\r\n                    {/* <th className=\"font-weight-bold\" scope=\"col\">البداية</th> */}\r\n                    <th className=\"font-weight-bold\" scope=\"col\">الصلاحية</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n                  </tr>\r\n                </thead>\r\n                {LoadGroups()}\r\n              </table>\r\n              \r\n              <div className=\"justify-content-center\">\r\n                {(groups.groups && groups.limit < groups.groups.length) ? (<button id=\"groups\" onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n                {groups.limit > 50 ? (<button id=\"groups\" onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n              </div>\r\n              \r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"container mt-5\">\r\n            <span className=\"display-8\">القسائم المستخدمة</span>\r\n            <hr/>\r\n            <div className=\"table-responsive mt-4\">\r\n              <table className=\"table table-sm table-bordered\">\r\n                <thead>\r\n                  <tr className=\"bg-light-grey\">\r\n                    <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">رقم الإعلان</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">معرف المستفيد</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">QRCode</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">القيمة</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">معرف المُطابِق</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">المُطابِق</th>\r\n                    <th className=\"font-weight-bold\" scope=\"col\">تاريخ المطابقة</th>\r\n                  </tr>\r\n                </thead>\r\n                {LoadCoupons()}\r\n              </table>\r\n              \r\n              <div className=\"justify-content-center\">\r\n                {(coupons.coupons && coupons.limit < coupons.coupons.length) ? (<button id=\"coupons\" onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n                {coupons.limit > 50 ? (<button id=\"coupons\" onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n              </div>\r\n              \r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* Add Associates Modal */}\r\n      <Modal show={associationModal.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعيين مساعدين</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n          <span className=\"font-weight-bold text-muted\">الرجاء إدخال إسم المستخدم أو البريد الإلكتروني وتحديده : </span>\r\n          <div className=\"mt-2\">\r\n            <p className=\"font-info text-muted\">\r\n              <i className=\"fa fa-star-of-life fa-s ml-1\"/> بإمكانك تعيين مستخدم واحد لكل مرة.\r\n              <br/>\r\n              <i className=\"fa fa-star-of-life fa-s ml-1\"/> الرجاء الإنتباه أثناء تعيين مساعد.\r\n            </p>\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n\r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-sm-8\">\r\n\r\n                <div className=\"input-group\">\r\n                  <input id=\"users\" onChange={fetchUsersResualts} type=\"text\" placeholder=\"إسم المستخدم/البريد\" className={\"form-control col-sm-12 \" + (errors['users'] ? 'is-invalid' : '')}/>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n          \r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n          \r\n          {\r\n            searchUsers.users ? (\r\n              \r\n              <div className=\"container mt-4 text-right\">\r\n                <span className=\"font-weight-bold\">المستخدمين ({searchUsers.length}) : </span>\r\n                {searchUsers.users.map(user => (\r\n                  <Link key={user.id} to=\"#\" onClick={() => {handleUserSelection(user.id)}}>\r\n                    <div id={`user-card-${user.id}`} className=\"card shadow bg-white mt-2\">\r\n                      <div className=\"card-body\">\r\n                        <i id={`user-select-${user.id}`} className=\"fa text-info float-left\"/>\r\n                        <p className=\"card-text font-weight-bold\">\r\n                          إسم المستخدم : {user.username}\r\n                        </p>\r\n                        <p className=\"card-text font-weight-bold\">\r\n                          البريد الإلكتروني : {user.email}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n              \r\n            ) : null\r\n          }\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"text-center\">\r\n            <p className=\"font-info font-weight-bold\">\r\n              المستخدم المساعد لديه صلاحية مطابقة القسائم.\r\n              <br/>\r\n              مطابقة القسائم دون إتباع <Link to=\"#\" onClick={() => window.open('/terms')} className=\"text-danger\"> الشروط والأحكام</Link> من طرف المساعدين قد تعرض المعلن لعواقب.\r\n            </p>\r\n          </div>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"secondary\" onClick={handleAssociateSubmit}>\r\n              تعيين\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Remove Associate Modal */}\r\n      <Modal show={removeAssoc.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إزالة المساعد (#{removeAssoc.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"font-weight-bold text-danger\">\r\n              هل أنت متأكد من إزالة المساعد ؟\r\n            </p>\r\n\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={removeAssociate}>\r\n              إزالة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal> \r\n\r\n      {/* Settings Modal */}\r\n      <Modal show={settingsModal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إعدادات الإعلان (#{settingState.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container text-right mt-4\">\r\n\r\n            <div className=\"container mt-2\">\r\n              {loadErrors()}\r\n            </div>\r\n\r\n            <form id=\"UpdateForm\" onSubmit={handleSubmit}>\r\n\r\n              <p className=\"font-info text-primary\">\r\n                <i className=\"fa fa-star-of-life fa-s ml-2\"/>\r\n                بإمكانك زيادة عدد القسائم الخاصة بعرضك.\r\n              </p>\r\n\r\n              <p className=\"info-weight text-muted\">\r\n                - عدد القسائم (حالياً) : {settingState.coupons_num}\r\n              </p>\r\n\r\n              <p className=\"info-weight text-muted\">\r\n                - عدد القسائم المتبقية (حالياً) : {settingState.coupons_left}\r\n              </p>\r\n\r\n              <p className=\"info-weight text-muted\">\r\n                - القيمة الإجمالية (حالياً) : {settingState.full_price} $\r\n              </p>\r\n\r\n              <div className=\"container mt-4\">\r\n                     \r\n                <div className=\"row mt-4\">\r\n                  \r\n                  <div className=\"col-sm-10\">\r\n                    \r\n                    <label htmlFor=\"coupons_plus\" className=\"font-weight-bold\">* عدد القسائم (الإضافية) : </label>\r\n                    <div className=\"input-group\">\r\n                      <input required onChange={handleChange} id=\"coupons_plus\" type=\"number\" min=\"0\" placeholder=\"القسائم الإضافية\" className={\"form-control col-sm-12 \" + (errors['coupons_plus'] ? 'is-invlaid' : '')}/>\r\n                    </div>\r\n                    \r\n                    <p className=\"font-sm text-muted\">\r\n                      <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                      يتم إضافة العدد المدخل أعلاه لعدد القسائم المسجلة مسبقاً, ويتم تحديث قيمة الموازنة بمجمل عدد القسائم.\r\n                    </p>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n              \r\n              </div>\r\n            \r\n            </form>\r\n            \r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button type='submit' form=\"UpdateForm\" variant=\"primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      \r\n      </Modal>\r\n\r\n      {/* Delete Modal */}\r\n      <Modal show={deleteModal.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إزالة الإعلان (#{deleteModal.group_id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"font-weight-bold text-danger\">\r\n              هل أنت متأكد من إزالة الإعلان ؟\r\n            </p>\r\n\r\n            <p className=\"font-info\">\r\n              سيتم إخفاء الإعلان من لوحة التحكم, لكن بيانات الإعلان ستبقى في السجلات.\r\n            </p>\r\n\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={hideGroup}>\r\n              إزالة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal> \r\n\r\n      {/* Images Modal */}\r\n      <Modal show={imagesModal && !imgDeleteModal.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل صور الإعلان</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form id=\"ImagesUpload\" onSubmit={handleImagesSubmit} encType=\"multipart/form-data\">\r\n        \r\n            <p className=\"font-weight-lighter font-info text-muted text-right mt-4\">\r\n              <i className=\"fa fa-star-of-life fa-xs\"/> يجب إضافة الصورة الرئيسية على الأقل.\r\n              <br/>\r\n              <i className=\"fa fa-star-of-life fa-xs\"/> أبعاد الصورة (450*800) على الأقل.\r\n            </p>\r\n\r\n            <div className=\"row mt-2 text-right\">\r\n\r\n              <div className=\"form-group col-sm-10\">\r\n                <label htmlFor=\"imagePrimary\" className=\"font-weight-bold float-right\">* صورة الإعلان الرئيسية : </label>\r\n                <div className=\"custom-file\">\r\n                  <input required={User.main_ad_image ? false : true} onChange={handleImagesChange} type=\"file\" className=\"custom-file-input\" id=\"imagePrimary\" name=\"imagePrimary\" accept=\"image/*\"/>\r\n                  <label id=\"imagePrimary-label\" className=\"custom-file-label col-sm-12\" htmlFor=\"imagePrimary\"/>\r\n                </div>\r\n                {\r\n                  User.main_ad_image ? (\r\n                    <div>\r\n                      <span className=\"float-right\">\r\n                        <Link to=\"#\" onClick={() => {setImgPreviewModal({view: true, image: User.main_ad_image})}} className=\"font-info text-primary\">إظهار الصورة الرئيسية</Link>\r\n                      </span>\r\n                    </div>\r\n                    ) : (\r\n                      <p className=\"font-info text-muted\">لا توجد صورة</p>\r\n                    )\r\n                }\r\n\r\n              </div>\r\n\r\n            </div>\r\n            \r\n            <div className=\"row mt-2 text-right\">\r\n\r\n              <div className=\"form-group col-sm-10\">\r\n                <label htmlFor=\"images1\" className=\"font-weight-bold float-right\">صورة الإعلان الفرعية : </label>\r\n                <div className=\"custom-file\">\r\n                  <input onChange={handleImagesChange} type=\"file\" className=\"custom-file-input\" id=\"images1\" name=\"images1\" accept=\"image/*\"/>\r\n                  <label id=\"images1-label\" className=\"custom-file-label col-sm-12\" htmlFor=\"images1\"/>\r\n                </div>\r\n                {\r\n                  User.ad_images && User.ad_images.length >= 1 ? (\r\n                    <div>\r\n                      <span className=\"float-right\">\r\n                        <Link to=\"#\" onClick={() => {setImgPreviewModal({view: true, image: User.ad_images[0]})}} className=\"font-info text-primary\">إظهار الصورة الفرعية 1</Link>\r\n                      </span>\r\n                      <span className=\"float-left\">\r\n                        <Link to=\"#\" onClick={() => {setImgDeleteModal({view: true, image: User.ad_images[0]})}} className=\"font-info text-danger\">حذف الصورة الفرعية 1</Link>\r\n                      </span>\r\n                    </div>\r\n                    ) : (\r\n                      <p className=\"font-info text-muted\">لا توجد صورة</p>\r\n                    )\r\n                }\r\n\r\n              </div>\r\n\r\n            </div>\r\n            \r\n            <div className=\"row mt-2 text-right\">\r\n\r\n              <div className=\"form-group col-sm-10\">\r\n                <label htmlFor=\"images2\" className=\"font-weight-bold float-right\">صورة الإعلان الفرعية : </label>\r\n                <div className=\"custom-file\">\r\n                  <input onChange={handleImagesChange} type=\"file\" className=\"custom-file-input\" id=\"images2\" name=\"images2\" accept=\"image/*\"/>\r\n                  <label id=\"images2-label\" className=\"custom-file-label col-sm-12\" htmlFor=\"images2\"/>\r\n                </div>\r\n                {\r\n                  User.ad_images && User.ad_images.length >= 2 ? (\r\n                    <div>\r\n                      <span className=\"float-right\">\r\n                        <Link to=\"#\" onClick={() => {setImgPreviewModal({view: true, image: User.ad_images[1]})}} className=\"font-info text-primary\">إظهار الصورة الفرعية 2</Link>\r\n                      </span>\r\n                      <span className=\"float-left\">\r\n                        <Link to=\"#\" onClick={() => {setImgDeleteModal({view: true, image: User.ad_images[1]})}} className=\"font-info text-danger\">حذف الصورة الفرعية 2</Link>\r\n                      </span>\r\n                    </div>\r\n                    ) : (\r\n                      <p className=\"font-info text-muted\">لا توجد صورة</p>\r\n                    )\r\n                }\r\n\r\n              </div>\r\n\r\n            </div>   \r\n            \r\n            <div className=\"row mt-2 text-right\">\r\n\r\n              <div className=\"form-group col-sm-10\">\r\n                <label htmlFor=\"images3\" className=\"font-weight-bold float-right\">صورة الإعلان الفرعية : </label>\r\n                <div className=\"custom-file\">\r\n                  <input onChange={handleImagesChange} type=\"file\" className=\"custom-file-input\" id=\"images3\" name=\"images3\" accept=\"image/*\"/>\r\n                  <label id=\"images3-label\" className=\"custom-file-label col-sm-12\" htmlFor=\"images3\"/>\r\n                </div>\r\n                {\r\n                  User.ad_images && User.ad_images.length >= 3 ? (\r\n                    <div>\r\n                      <span className=\"float-right\">\r\n                        <Link to=\"#\" onClick={() => {setImgPreviewModal({view: true, image: User.ad_images[2]})}} className=\"font-info text-primary\">إظهار الصورة الفرعية 3</Link>\r\n                      </span>\r\n                      <span className=\"float-left\">\r\n                        <Link to=\"#\" onClick={() => {setImgDeleteModal({view: true, image: User.ad_images[2]})}} className=\"font-info text-danger\">حذف الصورة الفرعية 3</Link>\r\n                      </span>\r\n                    </div>\r\n                    ) : (\r\n                      <p className=\"font-info text-muted\">لا توجد صورة</p>\r\n                    )\r\n                }\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button id=\"UploadBtn\" form=\"ImagesUpload\" type=\"submit\" variant=\"success\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal> \r\n      \r\n      {/* Open Image Modal */}\r\n      <Modal show={imgPreviewModal.view} onHide={() => {setImgPreviewModal({view: false, image: null})}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">عرض الصورة</Modal.Title>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body className=\"text-center\">\r\n          <div className=\"container\">\r\n            <div className=\"row justify-content-center\">\r\n              <div className=\"col-sm-12\">\r\n                <img src={`https://maidancom.s3.us-east-2.amazonaws.com/${imgPreviewModal.image}`} alt=\"img_preview\" className=\"img-fluid\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal.Body>\r\n\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={() => {setImgPreviewModal({view: false, image: null})}}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Delete Image Modal */}\r\n      <Modal show={imgDeleteModal.view} onHide={() => {setImgDeleteModal({view: false, image: null})}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">حذف الصورة</Modal.Title>\r\n        </Modal.Header>\r\n\r\n        <Modal.Body className=\"text-center\">\r\n          <div className=\"container\">\r\n            <p className=\"font-weight-bold text-danger\">\r\n              هل أنت متأكد من حذف الصورة؟\r\n            </p>\r\n            <div className=\"row mt-4 justify-content-center\">\r\n              <div className=\"col-sm-8\">\r\n                <img src={`https://maidancom.s3.us-east-2.amazonaws.com/${imgDeleteModal.image}`} alt=\"img_preview\" className=\"img-fluid\"/>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal.Body>\r\n\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={() => {setImgDeleteModal({view: false, image: null})}}>\r\n              إغلاق\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={handleImageDelete}>\r\n              حذف\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Balance Modal */}\r\n      <Modal show={balanceModal.view} onHide={() => {setBalanceModal({view: false, user_balance: null})}}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">رصيد المعلن</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <i className=\"fa fa-times-circle text-danger fa-3x\"/>\r\n          <p className=\"font-weight-bold\">\r\n            رصيدك الحالي : {balanceModal.user_balance}$\r\n            <br/>\r\n            يجب أن يكون رصيدك أكبر من القيمة الموازنة ({settingState.coupon_price*(parseInt(settingState.coupons_plus) + settingState.coupons_num)}$).\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={() => {setBalanceModal({view: false, user_balance: null})}}>\r\n              العودة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default MyGroups","import React, { useState } from 'react';\r\nimport { Link, Redirect, useParams } from 'react-router-dom';\r\nimport { useEffect } from 'react';\r\n\r\n\r\n\r\nexport const AdminViewGroup = () => {\r\n\r\n  const { gid } = useParams()\r\n  const [group, setGroup] = useState();\r\n  const [users, setUsers] = useState([]);\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n  \r\n\r\n  useEffect(() => {\r\n    fetch(`/api/groups/${gid}/admin`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroup(data.group);\r\n          setUsers(data.receivers);\r\n        } else {\r\n          console.log(data);\r\n          // Redirect To Home Page With Error\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_USER') {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID') {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الإعلان غير موجود أو قد تم حذفه'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [gid])\r\n\r\n\r\n  const OpenBranchMap = (e) => {\r\n    e.preventDefault();\r\n    window.open(e.target.id)\r\n  }\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  const loadCard = () => {\r\n    // Branch Configuration\r\n    const groupBranches = group && group.branches;\r\n    const lenGroupBranches = groupBranches.length;\r\n    // Images Configuration\r\n    const groupImages = group && group.images;\r\n    \r\n    return(\r\n      <div className=\"card hoverable bg-light-grey\">\r\n\r\n        <div className=\"card-body \">\r\n\r\n          <div className=\"row justify-content-center\">\r\n            \r\n            <div className=\"col-sm-10\">\r\n              <div className=\"carousel slide carousel-fade\" id=\"GroupCard\" data-ride=\"carousel\">\r\n\r\n                <div className=\"carousel-inner\">\r\n\r\n                  {groupImages.map((key, index) => {\r\n                    if (index === 0){\r\n                      return(\r\n                        <div key={index} className=\"carousel-item active\">\r\n                          <img className=\"img-fluid carousel-img\" loading=\"lazy\" src={`https://s3.us-east-2.amazonaws.com/maidancom/${key}`} alt={key} width=\"100%\"/>\r\n                        </div>\r\n                      )\r\n                    } else {\r\n                      return(\r\n                        <div key={index} className=\"carousel-item\">\r\n                          <img className=\"img-fluid carousel-img\" loading=\"lazy\" src={`https://s3.us-east-2.amazonaws.com/maidancom/${key}`} alt={key} width=\"100%\"/>\r\n                        </div>\r\n                      )\r\n                    }\r\n                  })}\r\n\r\n                </div>\r\n\r\n                <a className=\"carousel-control-prev\" href=\"#GroupCard\" role=\"button\" data-slide=\"prev\">\r\n                  {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n                  <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n                  <span className=\"sr-only\">التالي</span>\r\n                </a>\r\n                \r\n                <a className=\"carousel-control-next\" href=\"#GroupCard\" role=\"button\" data-slide=\"next\">\r\n                  {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n                  <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n                  <span className=\"sr-only\">السابق</span>\r\n                </a>\r\n\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className=\"row mt-4 justify-content-center\">\r\n\r\n            <div className=\"col-sm-10 text-right\">\r\n              <span className=\"text-muted font-weight-bold\"><i className=\"fa fa-fingerprint fa-s\"/> رمز القسيمة : {group.coupon_code}</span>\r\n            </div>\r\n\r\n            <div className=\"col-sm-6 text-right mt-4\">\r\n\r\n              <p className=\"text-dark font-weight-bold\"><i className=\"fa fa-utensils fa-s\"/> الشركة : {group.company}</p>\r\n\r\n              <p className=\"text-dark\"><i className=\"fa fa-receipt fa-s\"/> نوع القسيمة : {group.type}.</p>\r\n\r\n              <p className=\"text-dark\"><i className=\"fa fa-dollar-sign fa-s\"/> القيمة الموازنة : {group.full_price}$ ({parseFloat(group.full_price*3.75).toFixed(2)} ريال سعودي).</p>\r\n\r\n              <p className=\"text-dark\"><i className=\"fa fa-dollar-sign fa-s\"/> قيمة القسيمة : {group.coupon_price}$ ({parseFloat(group.coupon_price*3.75).toFixed(2)} ريال سعودي).</p>\r\n              \r\n              <p className=\"text-dark\"><i className=\"fa fa-coins fa-s\"/> عدد القسائم الكلي : {group.coupons_num} (قسائم/قسيمة).</p>\r\n\r\n              <p className=\"text-dark\"><i className=\"fa fa-database fa-s\"/> العدد المتبقي : {group.coupons_left} (قسائم/قسيمة).</p>\r\n\r\n            </div>\r\n\r\n            <div className=\"col-sm-4 text-right mt-md-4 col-gap\">\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-globe fa-s\"/> الدولة : </span>\r\n              <p className=\"text-dark\">{group.country}</p>\r\n\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-code-branch fa-s\"/> الفروع : </span>\r\n              <p className=\"text-dark\">\r\n                {groupBranches.map((branch, index) => {\r\n                  if (lenGroupBranches === (index+1)){\r\n                    return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>.</span>)\r\n                  } else {\r\n                    return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>, </span>)\r\n                  }\r\n                })}\r\n              </p>\r\n            \r\n            </div>\r\n\r\n            <div className=\"col-sm-10 text-right mt-2\">\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-comment-dots fa-s\"/> الوصف : </span>\r\n                <blockquote className=\"text-muted mt-2 blockquote text-right text-quote\">\r\n                  {group.description}\r\n                </blockquote>\r\n            </div>\r\n            \r\n            <div className=\"col-sm-10 text-right mt-2\">\r\n              <span className=\"text-dark font-weight-bold\"><i className=\"fa fa-calendar-times fa-s\"/> تواريخ مهمة : </span>\r\n              <p className=\"text-dark mt-2\">\r\n                * بداية الإعلان:\r\n                <br/>\r\n                <i className=\"font-weight-bold\" dir=\"ltr\">{getDate(group.start_date)}</i>\r\n              </p>\r\n\r\n              <p className=\"text-dark mt-2\">\r\n                * بداية التوزيع العشوائي:\r\n                <br/>\r\n                <i className=\"font-weight-bold\" dir=\"ltr\">{getDate(group.distribute_end_date)}</i>\r\n              </p>\r\n\r\n              <p className=\"text-dark mt-2\">\r\n                * الصلاحية:\r\n                <br/>\r\n                <i className=\"font-weight-bold\" dir=\"ltr\">{getDate(group.expire_date)}</i>\r\n              </p>\r\n\r\n              <p className=\"text-dark mt-2\">\r\n                * مدة البقاء في أبرز العروض (من الإدارة):\r\n                <br/>\r\n                <i className=\"font-weight-bold\" dir=\"ltr\">{getDate(group.display_expire_date)}</i>\r\n              </p>\r\n\r\n              <p className=\"text-dark mt-2\">\r\n                * مدة عرض الإعلان (من المعلن):\r\n                <br/>\r\n                <i className=\"font-weight-bold\" dir=\"ltr\">{getDate(group.on_site)}</i>\r\n              </p>\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const loadReceivers = () => {\r\n\r\n    return(\r\n      <tbody>\r\n        {users.map((user, index) => (\r\n          <tr className=\"\" key={index}>\r\n            <th className=\"table-header\">{user.id}</th>\r\n            <td className=\"table-body\">{user.username}</td>\r\n            <td className=\"table-body\">{user.email}</td>\r\n            <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n            <td className=\"table-body\">{user.qr_code} </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5\">\r\n\r\n      <div className=\"pt-4\">\r\n        \r\n        <div id=\"carousel-example-1z\" className=\"mt-5 pt-5 pr-md-2 pl-md-2 carousel slide carousel-fade\" data-ride=\"carousel\">\r\n\r\n          <ol className=\"carousel-indicators\">\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"0\" className=\"active\"></li>\r\n            <li data-target=\"#carousel-example-1z\" data-slide-to=\"1\"></li>\r\n            {/* <li data-target=\"#carousel-example-1z\" data-slide-to=\"2\"></li> */}\r\n          </ol>\r\n\r\n          <div className=\"carousel-inner\" role=\"listbox\">\r\n\r\n            <div className=\"carousel-item carousel-sitem active\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner1.png\"\r\n                alt=\"First slide\"/>\r\n            </div>\r\n\r\n            <div className=\"carousel-item carousel-sitem\">\r\n              <img loading=\"lazy\"  className=\"w-100 h-100 img-fluid\" src=\"https://sites.google.com/site/moh897/banner2.png\"\r\n                alt=\"Second slide\"/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <a className=\"carousel-control-prev\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"prev\">\r\n            {/* <span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-left carousel-control-prev-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">التالي</span>\r\n          </a>\r\n\r\n          <a className=\"carousel-control-next\" href=\"#carousel-example-1z\" role=\"button\" data-slide=\"next\">\r\n            {/* <span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span> */}\r\n            <i className=\"fa fa-arrow-alt-circle-right carousel-control-next-icons\" aria-hidden=\"true\"></i>\r\n            <span className=\"sr-only\">السابق</span>\r\n          </a>\r\n\r\n        </div> \r\n\r\n      </div>\r\n\r\n      <div className=\"mt-5 text-center container\">\r\n        <span className=\"display-6 shadow-text-sm qsemh-turq\">\r\n          الإعلان ({gid}#)\r\n        </span>\r\n        <hr/>\r\n        <div className=\"mt-4\">\r\n          <div className=\"row justify-content-center\">\r\n            <div className=\"col-sm-11\">\r\n              {group ? loadCard() : null}\r\n            </div>\r\n          </div>\r\n          \r\n        </div>\r\n      </div>\r\n        \r\n      <div className=\"container mt-5 text-center\">\r\n        <span className=\"display-7 qsemh-turq\">المستفيدين</span>\r\n        <hr/>\r\n        <div className=\"table-responsive mt-4\">\r\n    \r\n          <table className=\"table table-sm table-bordered\">\r\n            <thead>\r\n              <tr className=\"bg-light-grey\">\r\n                <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n                <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n                <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n                <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n                <th className=\"font-weight-bold\" scope=\"col\">QRCode</th>\r\n              </tr>\r\n            </thead>\r\n            {loadReceivers()}\r\n          </table>\r\n\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nconst ToProviderTable = () => {\r\n\r\n  const [requests, setRequests] = useState({requests: null, limit: 50});\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  // Modals\r\n  const [openImage, setOpenImage] = useState({open: false, image: null})\r\n\r\n  const [isOk, setOk] = useState({ok: false, id: null});\r\n  const [isBad, setBad] = useState({bad: false, id: null});\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/applications', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setRequests({\r\n            requests: data.requests,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const LoadRequests = () => {\r\n\r\n    const handleDownloadFile = async(e) => {\r\n      e.preventDefault();\r\n      let id = e.target.id;\r\n      // Disable Download Link To Prevent Multi-Calls\r\n      document.getElementById(id).classList.add('disabled');\r\n      await fetch(`/api/panel/files/${id}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json'\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            // Re-Enable Download Link.\r\n            document.getElementById(id).classList.remove('disabled');\r\n            // Download File\r\n            window.open(data.download_link);\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    const getStatus = (status) => {\r\n      let types = {\r\n        open: ['secondary', 'قيد المراجعة'],\r\n        close: ['dark', 'مغلق'],\r\n        rejected: ['danger', 'مرفوض'],\r\n        accepted: ['success', 'مقبول']\r\n      }\r\n\r\n      return types[status]\r\n    }\r\n\r\n    const requests_patch = requests.requests && requests.requests.slice(0, requests.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          requests_patch ? requests_patch.map((req, index) => {\r\n            let status = getStatus(req.status);\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{req.id}</th>\r\n                <td className=\"table-header\">{req.title}</td>\r\n                <td className=\"table-body\">{req.content}</td>\r\n                <td className=\"table-header\">{req.company_name}</td>\r\n                <td className=\"table-header\">\r\n                  {req.mainAdImage ? (\r\n                    <button onClick={() => {setOpenImage({open: true, image: req.mainAdImage})}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">إظهار الصورة</button>\r\n                  ) : 'غير مرفق'}\r\n                </td>\r\n                <td className=\"table-header\">\r\n                  <Link to=\"#\" id={req.providerAgreement} onClick={handleDownloadFile} className=\"text-primary font-weight-bold\">تحميل الملف</Link>\r\n                </td>\r\n                <td className={`table-header text-${status[0]}`}>{status[1]}</td>\r\n                {\r\n                  req.status === 'open' ? (\r\n                    <td className=\"table-header\">\r\n                      <button onClick={() => {setBad({bad: true, id: req.id})}} className=\"btn btn-sm btn-outline-danger font-weight-bold\">رفض</button>\r\n                      <button onClick={() => {setOk({ok: true, id: req.id})}} className=\"btn btn-sm btn-outline-success font-weight-bold\">قبول</button>\r\n                    </td>\r\n                  ) : (\r\n                    <td className=\"table-header text-grey\">غ.م</td>\r\n                  )\r\n                }\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (requests.limit < requests.requests.length){\r\n      let new_limit = requests.limit + 50;\r\n      setRequests({...requests, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (requests.limit > 50){\r\n      let new_limit = requests.limit - 50;\r\n      setRequests({...requests, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    // Reset State & Errors\r\n    setErrors({});\r\n    // Reset Modals\r\n    setOpenImage({open: false, image: null});\r\n    setOk({ok: false, id: null});\r\n    setBad({bad: false, id: null});\r\n  }\r\n\r\n  const handleApproved = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/applications/${isOk.id}/approve`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          // Reset Modals\r\n          resetModals();\r\n          // Update Requests\r\n          setRequests({\r\n            ...requests,\r\n            requests: data.requests\r\n          })\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة معالجة الطلب',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'معرف الطلب',\r\n                error: 'لا يوجد طلب يطابق المعرف المدخل',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_TYPE'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'نوع الطلب غير صحيح',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_USER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'المستخدم صاحب الطلب قد تم حذفه, أو لم يعد موجود.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n    \r\n  }\r\n\r\n  const handleReject = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/applications/${isBad.id}/reject`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          // Reset Modals\r\n          resetModals();\r\n          // Update Requests\r\n          setRequests({\r\n            ...requests,\r\n            requests: data.requests\r\n          })\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة معالجة الطلب',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'معرف الطلب',\r\n                error: 'لا يوجد طلب يطابق المعرف المدخل',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_TYPE'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'نوع الطلب غير صحيح',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">عنوان الطلب</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">نص الطلب</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم الشركة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">صورة الإعلانات الرئيسية</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">ملف إتفاقية المعلن</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">حالة الطلب</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">قبول / رفض</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadRequests()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(requests.requests && requests.limit < requests.requests.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {requests.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Open Image Modal */}\r\n      <Modal show={openImage.open} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">صورة الإعلان الرئيسية</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <div className=\"container\">\r\n            <img src={`https://maidancom.s3.us-east-2.amazonaws.com/${openImage.image}`} alt={openImage.image} className=\"img-fluid img-thumbnail\"/>\r\n          </div>\r\n          {/* <button className=\"btn btn-sm btn-outline-primary mt-2\">تحميل الصورة</button> */}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Bad Modal */}\r\n      <Modal show={isBad.bad} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">رفض الطلب (#{isBad.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-2\">\r\n          {loadErrors()}\r\n\r\n          <p className=\"font-weight-bold text-danger\">\r\n            هل أنت متأكد من رفض الطلب ؟\r\n          </p>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button onClick={handleReject} variant=\"danger\">\r\n              رفض\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n      {/* Ok Modal */}\r\n      <Modal show={isOk.ok} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">قبول الطلب (#{isOk.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-2\">\r\n          {loadErrors()}\r\n\r\n          <p className=\"font-weight-bold text-success\">\r\n            هل أنت متأكد من قبول الطلب ؟\r\n          </p>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button onClick={handleApproved} variant=\"success\">\r\n              قبول\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n   </div>\r\n  )\r\n}\r\n\r\n\r\nexport default ToProviderTable","import React, { useState, useEffect } from 'react';\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst DisabledUsers = () => {\r\n\r\n  const [users, setUsers] = useState({users: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Modals\r\n  const [modalState, setModalState] = useState({});\r\n\r\n  const [isActivate, setActivatingModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/users/disabled', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            users: data.users,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const handleActivate = (user) => {\r\n    setActivatingModal(true);\r\n    setModalState(user);\r\n  }\r\n\r\n  const LoadUsers = () => {\r\n\r\n    const users_patch = users.users && users.users.slice(0, users.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          users_patch ? users_patch.map((user, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{user.id}</th>\r\n              <td className=\"table-body\">{user.username}</td>\r\n              <td className=\"table-body\">{user.fullname}</td>\r\n              <td className=\"table-body\">{user.email}</td>\r\n              <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n              <td className=\"table-body\">{user.claimed_coupons}</td>\r\n              <td className=\"table-body\">{user.balance} $</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {handleActivate(user)}} className=\"btn btn-sm btn-success font-weight-bold\">تفعيل</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (users.limit < users.users.length){\r\n      let new_limit = users.limit + 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (users.limit > 50){\r\n      let new_limit = users.limit - 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  // Settings\r\n\r\n  const handleReActivate = (e) => {\r\n    e.preventDefault();\r\n\r\n    const ActivateUser = async() => {\r\n      await fetch(`/api/panel/users/${modalState.id}/reactivate`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تفعيل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_DISABLED'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'الحساب مفعل بالفعل, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    ActivateUser();\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset State, Errors\r\n    setErrors({});\r\n    setModalState({});\r\n\r\n    // Reset Modals\r\n    setActivatingModal(false);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n    \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">القسائم المملوكة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الرصيد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadUsers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(users.users && users.limit < users.users.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {users.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n\r\n      {/* Activate Modal */}\r\n      <Modal show={isActivate} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تفعيل المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container\">\r\n            <p className=\"text-info font-weight-bold\">\r\n              هل أنت متأكد من إعادة تفعيل المستخدم؟\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button onClick={handleReActivate} variant=\"success\">\r\n              تفعيل\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default DisabledUsers","import React, { useState, useEffect } from 'react';\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst InActiveUsers = () => {\r\n\r\n  const [users, setUsers] = useState({users: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Modals\r\n  const [modalState, setModalState] = useState({});\r\n\r\n  const [isActivate, setActivatingModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/users/inactive', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            users: data.users,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const handleSettings = (user) => {\r\n    setActivatingModal(true);\r\n    setModalState(user);\r\n  }\r\n\r\n  const LoadUsers = () => {\r\n\r\n    const users_patch = users.users && users.users.slice(0, users.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          users_patch ? users_patch.map((user, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{user.id}</th>\r\n              <td className=\"table-body\">{user.username}</td>\r\n              <td className=\"table-body\">{user.fullname}</td>\r\n              <td className=\"table-body\">{user.email}</td>\r\n              <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {handleSettings(user)}} className=\"btn btn-sm btn-success font-weight-bold\">تفعيل</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (users.limit < users.users.length){\r\n      let new_limit = users.limit + 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (users.limit > 50){\r\n      let new_limit = users.limit - 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  // Settings\r\n\r\n  const handleActivate = (e) => {\r\n    e.preventDefault();\r\n\r\n    const ActivateUser = async() => {\r\n      await fetch(`/api/panel/users/${modalState.id}/activate`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تفعيل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACTIVE'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'الحساب مفعل بالفعل, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    ActivateUser();\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset State, Errors\r\n    setErrors({});\r\n    setModalState({});\r\n\r\n    // Reset Modals\r\n    setActivatingModal(false);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n    \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadUsers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(users.users && users.limit < users.users.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {users.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n\r\n      {/* Activate Modal */}\r\n      <Modal show={isActivate} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تفعيل المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container\">\r\n            <p className=\"text-info font-weight-bold\">\r\n              هل أنت متأكد من تفعيل المستخدم؟\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button onClick={handleActivate} variant=\"success\">\r\n              تفعيل\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default InActiveUsers","import React, { useState, useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\n\r\nconst ElementsTable = () => {\r\n\r\n  const [elements, setElements] = useState({elements: null, limit: 50});\r\n  \r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  // Search Elements\r\n  const [search, setSearch] = useState();\r\n\r\n  // Edit/Add Modals\r\n  const [isCountry, setCountryModal] = useState(false);  \r\n  const [isNew, setNewModal] = useState(false);\r\n  const [countryState, setCountryState] = useState({});\r\n\r\n\r\n  const [isTypes, setTypesModal] = useState(false);\r\n  const [typeState, setTypeState] = useState({});\r\n\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/labels', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setElements({\r\n            elements: data.labels,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n\r\n  const handleSettings = (elem) => {\r\n    \r\n    if (elem.key === 'country'){\r\n      setCountryModal(true);\r\n      setCountryState({\r\n        id: elem.id,\r\n        label: elem.label,\r\n        name: elem.name,\r\n        country_ar: elem.values.country.ar,\r\n        country_en: elem.values.country.en,\r\n        cities_ar: elem.values.cities.ar,\r\n        cities_en: elem.values.cities.en,\r\n        telecode: elem.values.telecode,\r\n        description: elem.description\r\n      });\r\n    }\r\n    else if (elem.key === 'coupon_types'){\r\n      setTypesModal(true);\r\n      setTypeState({\r\n        id: elem.id,\r\n        label: elem.label,\r\n        name: elem.name,\r\n        key: elem.key,\r\n        description: elem.description,\r\n        values_ar: elem.values.ar,\r\n        values_en: elem.values.en,\r\n      });\r\n    }\r\n\r\n    \r\n  }\r\n\r\n  const SearchElements = async(e) => {\r\n    setSearch({\r\n      ...search,\r\n      [e.target.id]: e.target.value\r\n    })\r\n    await fetch('/api/panel/labels', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({...search, [e.target.id]: e.target.value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setElements({\r\n            ...elements,\r\n            elements: data.labels\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const LoadElements = () => {\r\n\r\n    const elements_patch = elements.elements && elements.elements.slice(0, elements.limit);\r\n\r\n    return(\r\n        <tbody>\r\n          <tr>\r\n            <th className=\"table-header font-weight-bold\">\r\n              #\r\n            </th>\r\n\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchElements} id=\"name\" type=\"text\" placeholder=\"النوع : \" className=\"form-contro\"/>\r\n            </td>\r\n\r\n            <td className=\"table-body\"/>\r\n\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchElements} id=\"label\" type=\"text\" placeholder=\"الإسم (المفتاح) : \" className=\"form-contro\"/>\r\n            </td>\r\n\r\n            <td className=\"table-body\"/>\r\n          </tr>\r\n          {\r\n            elements_patch ? elements_patch.map((elem, index) => {\r\n              \r\n              return(\r\n                <tr className=\"\" key={index}>\r\n                  <th className=\"table-header\">{index+1}</th>\r\n                  <td className=\"table-body\">{elem.name}</td>\r\n                  <td className=\"table-body\">{elem.description}</td>\r\n                  <td className=\"table-body\">{elem.label}</td>\r\n                  <td className=\"table-body\">\r\n                    <button onClick={() => {handleSettings(elem)}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">الإعدادات</button>\r\n                  </td>\r\n                </tr>\r\n              )\r\n            }) : null\r\n          }\r\n        </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (elements.limit < elements.elements.length){\r\n      let new_limit = elements.limit + 50;\r\n      setElements({...elements, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (elements.limit > 50){\r\n      let new_limit = elements.limit - 50;\r\n      setElements({...elements, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    // Reset All Modals & Element State\r\n    setCountryState({});\r\n    setTypeState({});\r\n    setErrors({});\r\n\r\n    setCountryModal(false);\r\n    setNewModal(false);\r\n    setTypesModal(false);\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  /* Modals Handlers */\r\n  const handleNewCountrySet = (e) => {\r\n    e.preventDefault();\r\n\r\n    setCountryState({\r\n      cities_ar: [],\r\n      cities_en: [],\r\n    });\r\n\r\n    setNewModal(true);\r\n  }\r\n\r\n  const handleEditCountrySubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const UpdateCountry = async() => {\r\n      await fetch(`/api/panel/country/${countryState.id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(countryState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setElements({\r\n              ...elements,\r\n              elements: data.labels,\r\n            });\r\n            // Reset Modals\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (countryState.label && countryState.label.length > 2){\r\n      setErrors({\r\n        label: {\r\n          name: 'الرمز الثنائي',\r\n          error: 'الرمز الثنائي للدولة يتكون من حرفين فقط (SA, AE, KW, BH), الرجاء إدخال رمز صحيح.',\r\n          type: 'danger'\r\n        }\r\n      })\r\n    } else {\r\n      UpdateCountry();\r\n    }\r\n\r\n  }\r\n\r\n  const handleNewCountrySubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const NewCountry = async() => {\r\n      await fetch('/api/panel/country', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(countryState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setElements({\r\n              ...elements,\r\n              elements: data.labels,\r\n            });\r\n            // Reset Modals\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (countryState.label && countryState.label.length > 2){\r\n      setErrors({\r\n        label: {\r\n          name: 'الرمز الثنائي',\r\n          error: 'الرمز الثنائي للدولة يتكون من حرفين فقط (SA, AE, KW, BH), الرجاء إدخال رمز صحيح.',\r\n          type: 'danger'\r\n        }\r\n      })\r\n    } else {\r\n      NewCountry();\r\n    }\r\n  }\r\n\r\n  const handleEditCouponTypeSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const UpdateCountry = async() => {\r\n      await fetch(`/api/panel/coupons/${typeState.id}`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(typeState)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setElements({\r\n              ...elements,\r\n              elements: data.labels,\r\n            });\r\n            // Reset Modals\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    UpdateCountry();\r\n  }\r\n\r\n  // Type Country\r\n\r\n  const handleCountryChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Clear Errors\r\n    setErrors({});\r\n\r\n    setCountryState({\r\n      ...countryState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n\r\n  }\r\n\r\n  const handleCitiesChange = (e) => {\r\n    e.preventDefault();\r\n    var key = e.target.id.split('-')[0];\r\n    var id = e.target.id.split('-')[1];\r\n\r\n    var citiesAr = [...countryState.cities_ar];\r\n    var citiesEn = [...countryState.cities_en];\r\n\r\n    if (key === \"cities_ar\") {\r\n      citiesAr[id] = e.target.value;\r\n\r\n    } else if (key === \"cities_en\") {\r\n      citiesEn[id] = e.target.value;\r\n    }\r\n\r\n    setCountryState({\r\n      ...countryState,\r\n      cities_ar: citiesAr,\r\n      cities_en: citiesEn\r\n    });\r\n\r\n  }\r\n\r\n  const handleNewCity = (e) => {\r\n    e.preventDefault();\r\n\r\n    var citiesAr = [...countryState.cities_ar];\r\n    var citiesEn = [...countryState.cities_en];\r\n\r\n    citiesAr.push(\"\");\r\n    citiesEn.push(\"\");\r\n\r\n    setCountryState({\r\n      ...countryState,\r\n      cities_ar: citiesAr,\r\n      cities_en: citiesEn\r\n    });\r\n\r\n  }\r\n\r\n  const handleDeleteCity = (id) => {\r\n\r\n    var citiesAr = [...countryState.cities_ar];\r\n    var citiesEn = [...countryState.cities_en];\r\n\r\n    citiesAr.splice(id, 1);\r\n    citiesEn.splice(id, 1);\r\n\r\n    // Change values of Elements in cities table\r\n    for (let i = 0; i < citiesAr.length; i++) {\r\n      document.getElementById(`cities_ar-${i}`).value = citiesAr[i];\r\n      document.getElementById(`cities_en-${i}`).value = citiesEn[i];\r\n    }\r\n\r\n    setCountryState({\r\n      ...countryState,\r\n      cities_ar: citiesAr,\r\n      cities_en: citiesEn\r\n    });\r\n  }\r\n\r\n  // Type CouponTypes\r\n\r\n  const handleCouponTypesChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setTypeState({\r\n      ...typeState,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const handleTypesChange = (e) => {\r\n    e.preventDefault();\r\n    var key = e.target.id.split('-')[0];\r\n    var id = e.target.id.split('-')[1];\r\n\r\n    var valuesAr = [...typeState.values_ar];\r\n    var valuesEn = [...typeState.values_en];\r\n\r\n    if (key === \"values_ar\") {\r\n      valuesAr[id] = e.target.value;\r\n\r\n    } else if (key === \"values_en\") {\r\n      valuesEn[id] = e.target.value;\r\n    }\r\n\r\n    setTypeState({\r\n      ...typeState,\r\n      values_ar: valuesAr,\r\n      values_en: valuesEn\r\n    });\r\n\r\n  }\r\n\r\n  const handleNewType = (e) => {\r\n    e.preventDefault();\r\n\r\n    var valuesAr = [...typeState.values_ar];\r\n    var valuesEn = [...typeState.values_en];\r\n\r\n    valuesAr.push(\"\");\r\n    valuesEn.push(\"\");\r\n\r\n    setTypeState({\r\n      ...typeState,\r\n      values_ar: valuesAr,\r\n      values_en: valuesEn\r\n    });\r\n\r\n  }\r\n\r\n  const handleDeleteType = (id) => {\r\n\r\n    var valuesAr = [...typeState.values_ar];\r\n    var valuesEn = [...typeState.values_en];\r\n\r\n    valuesAr.splice(id, 1);\r\n    valuesEn.splice(id, 1);\r\n\r\n    // Change values of Elements in Types table\r\n    for (let i = 0; i < valuesAr.length; i++) {\r\n      document.getElementById(`values_ar-${i}`).value = valuesAr[i];\r\n      document.getElementById(`values_en-${i}`).value = valuesEn[i];\r\n    }\r\n\r\n    setTypeState({\r\n      ...typeState,\r\n      values_ar: valuesAr,\r\n      values_en: valuesEn\r\n    });\r\n  }\r\n  \r\n  \r\n  /* Modals Handlers */\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">النوع</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الوصف</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم (المفتاح)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n          {LoadElements()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(elements.elements && elements.limit < elements.elements.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {elements.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n        <div className=\"float-right\">\r\n          <button onClick={handleNewCountrySet} className=\"btn btn-sm btn-outline-success font-weight-bold\">\r\n            <i className=\"fa fa-plus\"/> دولة جديدة\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* New Element Modal */}\r\n      <Modal show={isNew} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">دولة (مناطق) جديدة</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-4\">\r\n          {loadErrors()}\r\n\r\n          <form id=\"CountryForm\" onSubmit={handleNewCountrySubmit}>\r\n\r\n            <div className=\"container\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12 mt-2\">\r\n\r\n                  <div className=\"row\">\r\n\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"label\" className=\"font-weight-bold\">* الإسم (المفتاح) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"label\" type=\"text\" placeholder=\"المفتاح (الرمز الثنائي : SA)\" className={\"form-control col-sm-12 \" + (errors['label'] ? 'is-invalid' : '')}/>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"telecode\" className=\"font-weight-bold\">* الرقم الدولي (3 ارقام) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"telecode\" inputMode=\"tel\" type=\"text\" placeholder=\"الرقم الدولي : 966\" className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n                  \r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n\r\n                  <div className=\"row\">\r\n\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"country_ar\" className=\"font-weight-bold\">* إسم الدولة (AR) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"country_ar\" type=\"text\" placeholder=\"إسم الدولة\" className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"country_en\" className=\"font-weight-bold\">* إسم الدولة (EN) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"country_en\" dir='ltr' type=\"text\" placeholder=\"Country Name\" className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"description\" className=\"font-weight-bold\">الوصف (64 حرف) : </label>\r\n                  <div className=\"input-group\">\r\n                    <textarea onChange={handleCountryChange} id=\"description\" type=\"text\" placeholder=\"وصف موجز\" className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-4\">\r\n                  <label htmlFor=\"cities\" className=\"font-weight-bold\">* أسماء المدن : </label>\r\n                  <table className=\"table table-sm table-bordered\">\r\n                    <thead>\r\n                      <tr className=\"bg-white\">\r\n                        <th className=\"font-weight-bold\" scope=\"col\">#</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">إسم المدينة (AR)</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">إسم المدينة (EN)</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">حذف</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"text-center\">\r\n                      {\r\n                        countryState.cities_ar && countryState.cities_ar.map((_, index) => (\r\n                          <tr key={index}>\r\n                            <th className=\"table-header\">{index+1}</th>\r\n                            <td className=\"table-header\">\r\n                              <input id={`cities_ar-${index}`} onChange={handleCitiesChange} required placeholder=\"إسم المدينة\" defaultValue={countryState.cities_ar[index]} type=\"text\" className=\"col-sm-8\"/>\r\n                            </td>\r\n                            <td className=\"table-header\">\r\n                              <input id={`cities_en-${index}`} onChange={handleCitiesChange} dir='ltr' required placeholder=\"City name\" defaultValue={countryState.cities_en[index]} type=\"text\" className=\"col-sm-8\"/>\r\n                            </td>\r\n                            <td>\r\n                              <Link onClick={() => {handleDeleteCity(index)}} to=\"#\">\r\n                                <i className=\"fa fa-times text-danger fa-2x\"/>\r\n                              </Link>\r\n                            </td>\r\n                          </tr>\r\n                        ))\r\n                      }\r\n                    </tbody>\r\n                      \r\n                  </table>\r\n                  <div className=\"float-right\">\r\n                    <button onClick={handleNewCity} className=\"btn btn-sm btn-outline-primary font-weight-bold\">\r\n                      <i className=\"fa fa-plus\"/> مدينة جديدة\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"outline-success\" form=\"CountryForm\" type=\"submit\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Edit Country Modal */}\r\n      <Modal show={isCountry} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل لـ ({countryState.name})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-4\">\r\n          {loadErrors()}\r\n\r\n          <form id=\"CountryForm\" onSubmit={handleEditCountrySubmit}>\r\n\r\n            <div className=\"container\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12 mt-2\">\r\n                  \r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"label\" className=\"font-weight-bold\">* الإسم (المفتاح) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"label\" type=\"text\" placeholder=\"المفتاح (الرمز الثنائي : SA)\" defaultValue={countryState.label} className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"telecode\" className=\"font-weight-bold\">* الرقم الدولي (3 ارقام) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"telecode\" dir='ltr' inputMode=\"tel\" type=\"text\" placeholder=\"الرقم الدولي\" defaultValue={countryState.telecode} className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n\r\n                  <div className=\"row\">\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"country_ar\" className=\"font-weight-bold\">* إسم الدولة (AR) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"country_ar\" type=\"text\" placeholder=\"إسم الدولة\" defaultValue={countryState.country_ar} className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-sm-6\">\r\n                      <label htmlFor=\"country_en\" className=\"font-weight-bold\">* إسم الدولة (EN) : </label>\r\n                      <div className=\"input-group\">\r\n                        <input onChange={handleCountryChange} required id=\"country_en\" dir='ltr' type=\"text\" placeholder=\"Country Name\" defaultValue={countryState.country_en} className=\"form-control col-sm-12\"/>\r\n                      </div>\r\n                    </div>\r\n\r\n                  </div>\r\n\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"description\" className=\"font-weight-bold\">الوصف (64 حرف) : </label>\r\n                  <div className=\"input-group\">\r\n                    <textarea onChange={handleCountryChange} id=\"description\" type=\"text\" placeholder=\"وصف موجز\" defaultValue={countryState.description} className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-4\">\r\n                  <label htmlFor=\"cities\" className=\"font-weight-bold\">* أسماء المدن : </label>\r\n                  <table className=\"table table-sm table-bordered\">\r\n                    <thead>\r\n                      <tr className=\"bg-white\">\r\n                        <th className=\"font-weight-bold\" scope=\"col\">#</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">إسم المدينة (AR)</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">إسم المدينة (EN)</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">حذف</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"text-center\">\r\n                        {\r\n                          countryState.cities_ar && countryState.cities_ar.map((_, index) => (\r\n                            <tr key={index}>\r\n                              <th className=\"table-header\">{index+1}</th>\r\n                              <td className=\"table-header\">\r\n                                <input id={`cities_ar-${index}`} onChange={handleCitiesChange} required placeholder=\"إسم المدينة\" defaultValue={countryState.cities_ar[index]} type=\"text\" className=\"col-sm-8\"/>\r\n                              </td>\r\n                              <td className=\"table-header\">\r\n                                <input id={`cities_en-${index}`} onChange={handleCitiesChange} dir='ltr' required placeholder=\"City name\" defaultValue={countryState.cities_en[index]} type=\"text\" className=\"col-sm-8\"/>\r\n                              </td>\r\n                              <td>\r\n                                <Link onClick={() => {handleDeleteCity(index)}} to=\"#\">\r\n                                  <i className=\"fa fa-times text-danger fa-2x\"/>\r\n                                </Link>\r\n                              </td>\r\n                            </tr>\r\n                          ))\r\n                        }\r\n                    </tbody>\r\n                      \r\n                  </table>\r\n                  <div className=\"float-right\">\r\n                    <button onClick={handleNewCity} className=\"btn btn-sm btn-outline-primary font-weight-bold\">\r\n                      <i className=\"fa fa-plus\"/> مدينة جديدة\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"outline-success\" form=\"CountryForm\" type=\"submit\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Edit GroupTypes Modal */}\r\n      <Modal show={isTypes} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل لـ ({typeState.name})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-4\">\r\n          {loadErrors()}\r\n\r\n          <form id=\"GroupTypesForm\" onSubmit={handleEditCouponTypeSubmit}>\r\n\r\n            <div className=\"container\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"description\" className=\"font-weight-bold\">الوصف (64 حرف) : </label>\r\n                  <div className=\"input-group\">\r\n                    <textarea onChange={handleCouponTypesChange} id=\"description\" type=\"text\" placeholder=\"وصف موجز\" defaultValue={typeState.description} className=\"form-control col-sm-12\"/>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"col-sm-12 mt-4\">\r\n                  <label htmlFor=\"values\" className=\"font-weight-bold\">* أسماء أنواع القسائم : </label>\r\n                  <table className=\"table table-sm table-bordered\">\r\n                    <thead>\r\n                      <tr className=\"bg-white\">\r\n                        <th className=\"font-weight-bold\" scope=\"col\">#</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">إسم النوع (AR)</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">إسم النوع (EN)</th>\r\n                        <th className=\"font-weight-bold\" scope=\"col\">حذف</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody className=\"text-center\">\r\n                        {\r\n                          typeState.values_ar && typeState.values_ar.map((_, index) => (\r\n                            <tr key={index}>\r\n                              <th className=\"table-header\">{index+1}</th>\r\n                              <td className=\"table-header\">\r\n                                <input id={`values_ar-${index}`} onChange={handleTypesChange} required placeholder=\"إسم النوع\" defaultValue={typeState.values_ar[index]} type=\"text\" className=\"col-sm-8\"/>\r\n                              </td>\r\n                              <td className=\"table-header\">\r\n                                <input id={`values_en-${index}`} onChange={handleTypesChange} dir='ltr' required placeholder=\"Type name\" defaultValue={typeState.values_en[index]} type=\"text\" className=\"col-sm-8\"/>\r\n                              </td>\r\n                              <td>\r\n                                <Link onClick={() => {handleDeleteType(index)}} to=\"#\">\r\n                                  <i className=\"fa fa-times text-danger fa-2x\"/>\r\n                                </Link>\r\n                              </td>\r\n                            </tr>\r\n                          ))\r\n                        }\r\n                    </tbody>\r\n                      \r\n                  </table>\r\n                  <div className=\"float-right\">\r\n                    <button onClick={handleNewType} className=\"btn btn-sm btn-outline-primary font-weight-bold\">\r\n                      <i className=\"fa fa-plus\"/> نوع جديد\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"outline-success\" form=\"GroupTypesForm\" type=\"submit\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default ElementsTable","import React, { useState, useEffect } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nconst FilesTable = () => {\r\n\r\n  const [uploading, setUploading] = useState(false);\r\n  const [files, setFiles] = useState({files: null, limit: 50});\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  // Modals\r\n  const [state, setState] = useState({});\r\n  const [isNew, setNewModal] = useState(false);\r\n  const [isDelete, setDeleteModal] = useState({delete: false, id: null});\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/files', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setFiles({\r\n            files: data.files,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n    // Reset Errors\r\n\r\n    setErrors({});\r\n\r\n    setState({\r\n      ...state,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const SubmitFiles = async() => {\r\n      await fetch('/api/panel/files', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(state)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setFiles({\r\n              ...files,\r\n              files: data.files\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    // Check If Files Are Uploaded (Basic Method)\r\n    let error = false;\r\n    if (state.files){\r\n      for (let i=0;i<state.files.length;i++){\r\n        if (state.files[i].status === 'success'){\r\n          break;\r\n        } else {\r\n          if (i === (state.files.length - 1)){\r\n            setErrors({\r\n              Files: {\r\n                name: 'الملفات',\r\n                error: 'الرجاء إدخال الملفات',\r\n                type: 'danger'\r\n              }\r\n            })\r\n            error = true;\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      setErrors({\r\n        Files: {\r\n          name: 'الملفات',\r\n          error: 'الرجاء إدخال الملفات',\r\n          type: 'danger'\r\n        }\r\n      })\r\n      error = true;\r\n    }\r\n\r\n    if (!error){\r\n      SubmitFiles();\r\n    }\r\n  }\r\n\r\n  const handleFileChange = (e) => {\r\n    let target_file = e.target;\r\n    let filesToUpload = target_file.files;\r\n    // Reset File Names State\r\n    setState({\r\n      ...state,\r\n      files: []\r\n    });\r\n  \r\n    if (e.target.value) {\r\n      // Reset File Errors\r\n      let prev_errors = {...errors};\r\n      delete prev_errors['Files']\r\n      setErrors(prev_errors)\r\n\r\n      var i;\r\n      // Num Of Declined Files (MisType)\r\n      var declined = 0;\r\n\r\n      // Loop Through Files\r\n      for (i=0; i < filesToUpload.length; i++){\r\n        var filename = filesToUpload[i].name;\r\n        var ex = filename.split('.').reverse()[0];\r\n        let acceptedTypes = ['application/pdf', 'image/png', 'image/jpg'];\r\n        let acceptedEx = ['zip', 'rar', 'pdf', 'png', 'jpg', 'docs'];\r\n        if (acceptedTypes.includes(filesToUpload[i].type) || acceptedEx.includes(ex)){\r\n          // Nothing Happens\r\n        } else {\r\n          declined += 1\r\n        }\r\n      }\r\n      if (declined > 0){\r\n        setErrors({\r\n          Files: {\r\n            name: 'الملف',\r\n            error: 'الملفات التي تحاول رفعها تحتوي على ملف غير مدعوم, الرجاء رفع الملفات بالصيغ التالية (zip/rar/pdf/png/jpg)',\r\n            type: 'danger'\r\n          }\r\n        })\r\n      } else {\r\n        document.getElementById('FilesLabel').innerHTML = `(${filesToUpload.length}) Files Selected`;\r\n        // Display Upload Status\r\n        document.getElementById('uploadStatus').innerHTML = \"يتم رفع الملفات\"\r\n        setUploading(true);\r\n        UploadFiles();\r\n      }\r\n    }\r\n  }\r\n\r\n  const UploadFiles = async() => {\r\n    let formData = new FormData()\r\n    const files = document.getElementById('files').files;\r\n\r\n    // Loop Throw Files.\r\n    for (let i = 0; i < files.length; i++){\r\n      formData.append(`file${i}`, files[i])\r\n    }\r\n    \r\n    await fetch('/api/panel/files/upload', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: formData\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setState({\r\n            ...state,\r\n            files: data.files\r\n          })\r\n          // Update Status Display\r\n          document.getElementById('uploadStatus').innerHTML = \"تم رفع الملفات!\"\r\n          document.getElementById('uploadStatus').classList.add('text-success')\r\n          document.getElementById('uploadStatus').classList.remove('text-info')\r\n        } else {\r\n          // Update Status Display\r\n          document.getElementById('uploadStatus').innerHTML = \"حدث خطأ أثناء رفع الملفات\"\r\n          document.getElementById('uploadStatus').classList.add('text-danger')\r\n          document.getElementById('uploadStatus').classList.remove('text-info')\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    // Activate Submittion Button\r\n    setUploading(false);\r\n  }\r\n\r\n  const handleDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    const DeleteFile = async() => {\r\n      await fetch(`/api/panel/files/${e.target.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setFiles({\r\n              ...files,\r\n              files: data.files\r\n            })\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    DeleteFile();\r\n  }\r\n\r\n  const LoadFiles = () => {\r\n\r\n    const getType = (type) => {\r\n      let types = {\r\n        smallAds: 'صور الإعلانات الصغيرة',\r\n        carouselAds: \"صور الإعلان المتحرك\",\r\n        providersAgreement: \"ملفات إتفاقية المعلن\"\r\n      }\r\n\r\n      return types[type]\r\n    }\r\n\r\n    const handleDownload = async(e) => {\r\n      e.preventDefault();\r\n      await fetch(`/api/panel/files/${e.target.id}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          // Authorization\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            window.open(data.download_link)\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    const files_patch = files.files && files.files.slice(0, files.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          files_patch ? files_patch.map((file, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{index+1}</th>\r\n              <td className=\"table-body\">{file.file_name}</td>\r\n              <td className=\"table-body\">{file.original_name}</td>\r\n              <td className=\"table-body\">{getType(file.key)}</td>\r\n              <td className=\"table-body\">{file.description}</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {setDeleteModal({delete: true, id: file.id})}} className=\"btn btn-sm btn-outline-danger font-weight-bold\">حذف</button>\r\n                <button id={file.file_name} onClick={handleDownload} className=\"btn btn-sm btn-outline-success font-weight-bold\">تحميل</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (files.limit < files.files.length){\r\n      let new_limit = files.limit + 50;\r\n      setFiles({...files, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (files.limit > 50){\r\n      let new_limit = files.limit - 50;\r\n      setFiles({...files, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    // Reset All Modals & Files State\r\n    setState({names: []});\r\n    setErrors({});\r\n\r\n    setNewModal(false);\r\n    setDeleteModal({delete: false, id: null});\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم الملف</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الأصلي</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">نوع الملف</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">غرض الملف (الوصف)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadFiles()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(files.files && files.limit < files.files.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {files.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n        <div className=\"float-right\">\r\n          <button onClick={() => {setNewModal(true)}} className=\"btn btn-sm btn-outline-success\">\r\n            <i className=\"fa fa-plus\"/> ملف جديد\r\n          </button>\r\n        </div>\r\n      </div>\r\n    \r\n\r\n      {/* New Files Modal */}\r\n      <Modal show={isNew} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">ملفات جديدة</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n          {loadErrors()}\r\n\r\n          <form id=\"mainForm\" onSubmit={handleSubmit}>\r\n\r\n            <div className=\"container\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-8\">\r\n                  <label htmlFor=\"key\" className=\"font-weight-bold\">* نوع الملف : </label>\r\n                  <select onChange={handleChange} required name=\"key\" id=\"key\" className=\"custom-select col-sm-12\">\r\n                    <option value=\"\" defaultValue>حدد نوع الملف</option>\r\n                    <option value=\"smallAds\" defaultValue>صور الإعلانات الصغيرة</option>\r\n                    <option value=\"carouselAds\" defaultValue>صور الإعلان المتحرك</option>\r\n                    <option value=\"providersAgreement\" defaultValue>ملفات إتفاقية المعلن</option>\r\n                  </select>\r\n                </div>\r\n\r\n                <div className=\"col-sm-8 mt-4\">\r\n                  <label htmlFor=\"description\" className=\"font-weight-bold\">* غرض الملف (وصف 64 حرف) : </label>\r\n                  <div className=\"input-group\">\r\n                    <textarea onChange={handleChange} required id=\"description\" placeholder=\"وصف موجز\" className=\"form-control\"/>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n          <form encType=\"multipart/form-data\">\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"text-right\">\r\n                <p className=\"font-info text-muted font-weight-bold\">\r\n                  <i className=\"fa fa-star-of-life ml-2\"/> الملفات المقبولة : (png, jpg, zip, rar, pdf, docx)\r\n                </p>\r\n                <p className=\"font-info text-muted font-weight-bold\">\r\n                  <i className=\"fa fa-star-of-life ml-2\"/> الأبعاد الأمثل للإعلانات الصغيرة : (560x235).\r\n                </p>\r\n                <p className=\"font-info text-muted font-weight-bold\">\r\n                  <i className=\"fa fa-star-of-life ml-2\"/> الأبعاد الأمثل للإعلانات المتحركة : (1870x465).\r\n                </p>\r\n                <p className=\"font-info text-muted font-weight-bold\">\r\n                  <i className=\"fa fa-star-of-life ml-2\"/> لرفع مجموعة ملفات لإتفاقية المعلن, الرجاء ضغطها في ملف rar أو zip.\r\n                </p>\r\n              </div>\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                  <label htmlFor=\"files\" className=\"font-weight-bold float-right\">* أرفق الملفات : </label>\r\n                    <div className=\"custom-file\">\r\n                      <input required multiple type=\"file\" onChange={handleFileChange} id=\"files\" className={\"custom-file-input \" + (errors['Files'] ? 'is-invalid' : '')}/>\r\n                      <label id=\"FilesLabel\" className=\"custom-file-label col-sm-12\" htmlFor=\"files\"/>\r\n                    </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n            <p id=\"uploadStatus\" className=\"font-info qsemh-turq\"></p>\r\n            \r\n            {\r\n              state.files && state.files.length > 0 ? (\r\n                <div className=\"container text-right mt-4\">\r\n                  <span className=\"font-weight-bold\">الملفات : </span>\r\n\r\n                  <div className=\"mt-2\">\r\n                    {\r\n                      state.files.map((file, index) => (\r\n                        <p key={index} className=\"font-weight-bold font-info text-muted\">\r\n                          {file.name}\r\n                          {\r\n                            file.status === 'success' ? (\r\n                              <i title=\"مقبول\" className=\"fa fa-check-circle text-success fa-s mr-2\"/>\r\n                            ) : (\r\n                              <i title=\"خطأ, فشل رفع الملف\" className=\"fa fa-times-circle text-danger fa-s mr-2\"/>\r\n                            )\r\n                          }\r\n                        </p>\r\n                      ))\r\n                    }\r\n                  </div>\r\n                </div>\r\n                \r\n              ) : null\r\n            }\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button id=\"submitBtn\" disabled={uploading} type=\"submit\" variant=\"outline-success\"  form=\"mainForm\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Confirm Delete Modal */}\r\n      <Modal show={isDelete.delete} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تأكيد حذف الملف (#{isDelete.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n          {loadErrors()}\r\n\r\n          <p className=\"font-weight-bold text-danger\">\r\n            هل أنت متأكد من حذف الملف ؟\r\n          </p>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button id={isDelete.id} onClick={handleDelete} type=\"submit\" variant=\"danger\">\r\n              تأكيد وحذف\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default FilesTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nconst GroupsTable = () => {\r\n\r\n  // User\r\n  // const userData = localStorage.maidan_user\r\n  // const User = userData ? {...JSON.parse(userData)} : {};\r\n\r\n  const [groups, setGroups] = useState({groups: null, limit: 50});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  // Search Groups\r\n  const [search, setSearch] = useState();\r\n\r\n  // Modals\r\n  const [deleteModal, setDeleteModal] = useState({view: false, group_id: null})\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/groups', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups({\r\n            groups: data.groups,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const hideGroup = (e) => {\r\n    e.preventDefault();\r\n\r\n    const Hide = async() => {\r\n      await fetch(`/api/panel/groups/${deleteModal.group_id}`, {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setGroups({\r\n              ...groups,\r\n              groups: data.groups,\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if (data.code === 'AUTH_ERROR'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'ACCESS_DENIED'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'غير مصرح',\r\n                  message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_TOKEN'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'INVALID_AUTH_HEADER'){\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_LOGGED_IN'){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'معرف الإعلان',\r\n                  error: 'الإعلان الذي تحاول إخفائه غير موجود, أو قد تم حذفه مسبقاً.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_YOURS'){\r\n              setErrors({\r\n                Company: {\r\n                  name: 'شركة الإعلان',\r\n                  error: 'أنت لا تملك صلاحية التعديل على هذا الإعلان.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إزالة الإعلان, الرجاء المحاولة لاحقاً.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_EXPIRED'){\r\n              setErrors({\r\n                Expired: {\r\n                  name: 'الإعلان',\r\n                  error: 'لا يمكنك إزالة إعلان غير منتهي.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    Hide();\r\n  }\r\n\r\n  const SearchGroups = async(e) => {\r\n    setSearch({\r\n      ...search,\r\n      [e.target.id]: e.target.value\r\n    })\r\n    await fetch('/api/panel/groups', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({...search, [e.target.id]: e.target.value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups({\r\n            ...groups,\r\n            groups: data.groups\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const LoadGroups = () => {\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n\r\n    const getStatus = (status) => {\r\n      let types = {\r\n        canceled: ['ملغي', 'warning'],\r\n        available: ['متوفر', 'success'],\r\n        expired: ['منتهي', 'danger'],\r\n        finished: ['إنتهى العرض', 'secondary']\r\n      }\r\n\r\n      return types[status]\r\n    }\r\n\r\n    const getDistributeType = (type) => {\r\n      let types = {\r\n        display: ['توزيع عشوائي', 'dark'],\r\n        request: ['عند الطلب', 'primary']\r\n      }\r\n\r\n      return types[type]\r\n    }\r\n\r\n    const groups_patch = groups.groups && groups.groups.slice(0, groups.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"table-header font-weight-bold\">\r\n            #\r\n          </th>\r\n\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchGroups} id=\"name\" type=\"text\" placeholder=\"الشركة : \" className=\"form-contro\"/>\r\n          </td>\r\n\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n        </tr>\r\n        {\r\n          groups_patch ? groups_patch.map((group, index) => {\r\n            let status = getStatus(group.status)\r\n            let disType = getDistributeType(group.distribute_type)\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">\r\n                  <Link className=\"text-primary\" to={`/admin/ads/${group.id}`}>{group.id}</Link>\r\n                </th>\r\n                <td className=\"table-header\">{group.company}</td>\r\n                <td className=\"table-header\">{group.coupons_num}</td>\r\n                <td className=\"table-header\">{group.coupon_price}$</td>\r\n                <td className=\"table-header\">{group.full_price}$</td>\r\n                <td className=\"table-header\">{group.coupons_left}</td>\r\n                <td className={`table-header text-${disType[1]}`}>{disType[0]}</td>\r\n                <td className={`table-header text-${status[1]}`}>{status[0]}</td>\r\n                <td className=\"table-header\">{group.views}</td>\r\n                <td className=\"table-header\">{group.unique_views}</td>\r\n                {/* <td dir='ltr' className=\"table-header\">{getDate(group.start_date)}</td> */}\r\n                <td dir='ltr' className=\"table-header\">{getDate(group.expire_date)}</td>\r\n                <td className=\"table-body\">\r\n                  <button onClick={() => {setDeleteModal({view: true, group_id: group.id})}} className=\"btn btn-sm btn-outline-danger font-weight-bold\">إلغاء</button>\r\n                </td>\r\n            </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (groups.limit < groups.groups.length){\r\n      let new_limit = groups.limit + 50;\r\n      setGroups({...groups, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (groups.limit > 50){\r\n      let new_limit = groups.limit - 50;\r\n      setGroups({...groups, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset States\r\n    setErrors({});\r\n    setDeleteModal({view: false, group_id: null});\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n\r\n      <table className=\"table mt-2 table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الشركة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">العدد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">القيمة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الموازنة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">المتبقي</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">نوع التوزيع</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الحالة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">المشاهدات</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">المشاهدون</th>\r\n            {/* <th className=\"font-weight-bold\" scope=\"col\">تاريخ البداية</th> */}\r\n            <th className=\"font-weight-bold\" scope=\"col\">الصلاحية</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadGroups()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(groups.groups && groups.limit < groups.groups.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {groups.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Delete Modal */}\r\n      <Modal show={deleteModal.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إلغاء الإعلان (#{deleteModal.group_id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"font-weight-bold text-danger\">\r\n              هل أنت متأكد من إلغاء الإعلان ؟\r\n            </p>\r\n\r\n            <p className=\"font-info\">\r\n              سيتم إخفاء الإعلان من لوحة التحكم, لكن بيانات الإعلان ستبقى في السجلات.\r\n            </p>\r\n\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={hideGroup}>\r\n              إزالة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal> \r\n\r\n    \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default GroupsTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst SellsTable = () => {\r\n\r\n  const [offers, setOffers] = useState({offers: null, limit: 50});\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n  \r\n  // Modals\r\n  const [cancelModal, setCancelModal] = useState(false);\r\n  const [modalState, setModalState] = useState({offer_id: null});\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/offers', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setOffers({\r\n            offers: data.offers,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  /* Cancel Offers */\r\n\r\n  const handleCancel = (e) => {\r\n    e.preventDefault();\r\n\r\n    setCancelModal(true);\r\n    setModalState({offer_id: e.target.id});\r\n  }\r\n\r\n  const CancelOffer = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/offers/${modalState.offer_id}/cancel`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setOffers({\r\n            ...offers,\r\n            offers: data.offers\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة إلغاء العرض, الرجاء المحاولة لاحقاً',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'FINISHED_OFFER'){\r\n            setErrors({\r\n              Offer: {\r\n                name: 'العرض',\r\n                error: 'لقد تم شراء العرض بالفعل, لا يمكنك إلغاء العروض المكتملة.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              ID: {\r\n                name: 'معرف العرض',\r\n                error: 'لا يوجد عرض يطابق المعرف, الرجاء التأكد من العرض.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_COUPON'){\r\n            setErrors({\r\n              Coupon: {\r\n                name: 'العرض',\r\n                error: 'لا يوجد قسيمة يطابق المدرج في العرض!',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /* Cancel Offers */\r\n\r\n  const LoadOffers = () => {\r\n\r\n    const getStatus = (status) => {\r\n      if (status){\r\n        return ['success', 'تم الشراء']\r\n      }\r\n      return ['secondary', 'في الإنتظار']\r\n    }\r\n\r\n    const offers_patch = offers.offers && offers.offers.slice(0, offers.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          offers_patch ? offers_patch.map((offer, index) => {\r\n            let status = getStatus(offer.completed);\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{offer.id}</th>\r\n                <th className=\"table-header text-primary\">{offer.seller}</th>\r\n                <td className=\"table-header\">{offer.buyer || 'لم يتم الشراء بعد'}</td>\r\n                <td className=\"table-header text-primary\">{offer.price}$</td>\r\n                <td className=\"table-header\">{offer.coupon_price}$</td>\r\n                <td dir='ltr' className=\"table-header text-danger\">{getDate(offer.coupon_expire)}</td>\r\n                <td className={`table-header text-${status[0]}`}>{status[1]}</td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(offer.start_date)}</td>\r\n                <td dir='ltr' className=\"table-header\">{offer.end_date ? getDate(offer.end_date) : 'لم يتم الشراء بعد'}</td>\r\n                <td className=\"table-header\">\r\n                  <button id={offer.id} onClick={handleCancel} className=\"btn btn-sm btn-warning font-weight-bold\">إلغاء العرض</button>\r\n                </td>\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (offers.limit < offers.offers.length){\r\n      let new_limit = offers.limit + 50;\r\n      setOffers({...offers, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (offers.limit > 50){\r\n      let new_limit = offers.limit - 50;\r\n      setOffers({...offers, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset States\r\n    setModalState({offer_id: null});\r\n\r\n    // Reset Modals\r\n    setCancelModal(false);\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البائع</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">المشتري</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">السعر المعروض</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">قيمة القسيمة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الصلاحية</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">حالة العرض</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">تاريخ العرض</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">تاريخ الشراء</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadOffers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(offers.offers && offers.limit < offers.offers.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {offers.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n   \r\n      {/* Cancel Modal */}\r\n      <Modal show={cancelModal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إلغاء العرض ({modalState.offer_id}#)</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"text-warning font-weight-bold\">\r\n              هل أنت متأكد من إلغاء العرض ؟\r\n            </p>\r\n\r\n            <p className=\"text-info font-info\">\r\n              سيتم إعادة القسيمة, وإرسال تنبيه إلى المالك.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"warning\" onClick={CancelOffer}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default SellsTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\n\r\nconst AddGroupsTable = () => {\r\n\r\n  const [groups, setGroups] = useState({groups: null, limit: 50});\r\n\r\n  const [errors, setErrors] = useState({});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  // Modals\r\n  const [openImage, setOpenImage] = useState({open: false, image: []})\r\n  const [isBranches, setBranchesModal] = useState({view: false, branches: []});\r\n  const [state, setState] = useState({\r\n    display_time: 0,\r\n    distribute_time: 120,\r\n    coupon_type: null\r\n  });\r\n  const [isOk, setOk] = useState({ok: false, id: null, description: null});\r\n  const [isBad, setBad] = useState({bad: false, id: null});\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/new_groups', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups({\r\n            groups: data.groups,\r\n            limit: 50\r\n          });\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const LoadGroups = () => {\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n\r\n    const groups_patch = groups.groups && groups.groups.slice(0, groups.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          groups_patch ? groups_patch.map((group, index) => {\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{group.id}</th>\r\n                <td className=\"table-header\">{group.company}</td>\r\n                <td className=\"table-header\">{group.coupons_num}</td>\r\n                <td className=\"table-header\">{group.coupon_price}$</td>\r\n                <td className=\"table-header\">{group.full_price}$</td>\r\n                <td className='table-header text-secondary'>قيد المراجعة</td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(group.start_date)}</td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(group.expire_date)}</td>\r\n                <td className=\"table-header\">\r\n                  <button onClick={() => setBranchesModal({view: true, branches: group.branches})} className=\"btn btn-sm btn-outline-primary\">الفروع</button>\r\n                </td>\r\n                <td className=\"table-header\">\r\n                  <button onClick={() => setOpenImage({open: true, image: group.images})} className=\"btn btn-sm btn-outline-primary\">الصور</button>\r\n                </td>\r\n                <td className=\"table-body\">\r\n                  <button onClick={() => setBad({bad: true, id: group.id})} className=\"btn btn-sm btn-outline-danger font-weight-bold\">رفض</button>\r\n                  <button onClick={() => setOk({ok: true, id: group.id, description: group.description})} className=\"btn btn-sm btn-outline-success font-weight-bold\">قبول</button>\r\n                </td>\r\n            </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const OpenBranchMap = (e) => {\r\n    e.preventDefault();\r\n    window.open(e.target.id)\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (groups.limit < groups.groups.length){\r\n      let new_limit = groups.limit + 50;\r\n      setGroups({...groups, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (groups.limit > 50){\r\n      let new_limit = groups.limit - 50;\r\n      setGroups({...groups, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setState({\r\n      ...state,\r\n      [e.target.id]: e.target.value\r\n    })\r\n  }\r\n\r\n  const handleReject = async(e) => {\r\n    e.preventDefault();\r\n    await fetch(`/api/panel/groups/${isBad.id}/cancel`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups({\r\n            ...groups,\r\n            groups: data.groups\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const handleApproved = async(e) => {\r\n    e.preventDefault();\r\n    await fetch(`/api/panel/groups/${isOk.id}/approve`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify(state)\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setGroups({\r\n            ...groups,\r\n            groups: data.groups\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const resetModals = () => {\r\n    // Reset All Modals & Element State\r\n    setState({\r\n      display_time: 0,\r\n      distribute_time: 120,\r\n      coupon_type: null\r\n    });\r\n    setErrors({});\r\n\r\n    setOpenImage({open: false, image: []});\r\n    setBranchesModal({view: false, branches: []});\r\n    setOk({ok: false, id: null, description: null});\r\n    setBad({bad: false, id: null});\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الشركة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">العدد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">القيمة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الموازنة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الحالة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البداية</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الصلاحية</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الفروع</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الصور</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">قبول / رفض</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadGroups()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(groups.groups && groups.limit < groups.groups.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {groups.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Ok Modal */}\r\n      <Modal show={isOk.ok} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">قبول الإعلان (#{isOk.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-2\">\r\n          {loadErrors()}\r\n\r\n          <form id=\"MainForm\" onSubmit={handleApproved}>\r\n\r\n            <div className=\"container text-right\">\r\n              <span className=\"font-weight-bold\">وصف الإعلان : </span>\r\n              <blockquote className=\"mt-2 info-weight\">\r\n                {isOk.description}\r\n              </blockquote>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                {/* <div className=\"col-sm-10 mt-2\">\r\n                  <label htmlFor=\"display_time\" className=\"font-weight-bold\">* مدة عرضة في الصفحة الرئيسية (بالساعات) : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleChange} required id=\"display_time\" type=\"number\" min=\"0\" defaultValue=\"0\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                  <p className=\"font-info text-muted\">إتركه 0 إذا أردت أن يتم إحتسابه تلقائياً</p>\r\n                </div> */}\r\n\r\n                <div className=\"col-sm-10 mt-2\">\r\n                  <label htmlFor=\"distribute_time\" className=\"font-weight-bold\">* مدة نهاية التوزيع (بالدقائق) : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleChange} required id=\"distribute_time\" type=\"number\" min=\"1\" defaultValue=\"120\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                  <p className=\"font-info text-muted\">ساعتين إفتراضياً</p>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"outline-success\" form=\"MainForm\" type=\"submit\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n      {/* Open Image Modal */}\r\n      <Modal show={openImage.open} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">صورة الإعلان الرئيسية</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <div className=\"container\">\r\n            <div className=\"row justify-content-center\">\r\n              {openImage.image.map((img, index) => {\r\n                if (img){\r\n                  return(\r\n                    <div key={index} className=\"col-sm-6\">\r\n                      <img src={`https://maidancom.s3.us-east-2.amazonaws.com/${img}`} alt={`img-${index}`} className=\"img-fluid img-thumbnail\"/>\r\n                    </div>\r\n                  )\r\n                }\r\n              })}\r\n            </div>\r\n          </div>\r\n          {/* <button className=\"btn btn-sm btn-outline-primary mt-2\">تحميل الصورة</button> */}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Branches Modal */}\r\n      <Modal show={isBranches.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">الفروع</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <p className=\"text-dark\">\r\n            {isBranches.branches.map((branch, index) => {\r\n              if (isBranches.branches.length === (index+1)){\r\n                return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>.</span>)\r\n              } else {\r\n                return(<span key={index}><Link to=\"#\" id={branch.map} onClick={OpenBranchMap}>{branch.city}-{branch.name}</Link>, </span>)\r\n              }\r\n            })}\r\n          </p>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {/* Bad Modal */}\r\n      <Modal show={isBad.bad} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">رفض الإعلان (#{isBad.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-2\">\r\n          {loadErrors()}\r\n\r\n          <p className=\"font-weight-bold text-danger\">\r\n            هل أنت متأكد من رفض الإعلان ؟\r\n          </p>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button onClick={handleReject} variant=\"danger\">\r\n              رفض\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default AddGroupsTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst AddSellsTable = () => {\r\n\r\n  const [offers, setOffers] = useState({offers: null, limit: 50});\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n  \r\n  // Modals\r\n  const [cancelModal, setCancelModal] = useState(false);\r\n  const [acceptModal, setAcceptModal] = useState(false);\r\n  const [modalState, setModalState] = useState({offer_id: null});\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/offers/invalid', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setOffers({\r\n            offers: data.offers,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const getDate = (seconds) => {\r\n    var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n    var sloppy_date = new Date(date);\r\n    var tzOffset = sloppy_date.getTimezoneOffset();\r\n    \r\n    var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n    var yy = target_date.getFullYear();\r\n    var mm = target_date.getMonth() + 1;\r\n    var dd = target_date.getDate();\r\n\r\n    var h = target_date.getHours();\r\n    var m = target_date.getMinutes();\r\n\r\n    return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n  }\r\n\r\n  /* Cancel Offers */\r\n\r\n  const handleCancel = (e) => {\r\n    e.preventDefault();\r\n\r\n    setCancelModal(true);\r\n    setModalState({offer_id: e.target.id});\r\n  }\r\n\r\n  const CancelOffer = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/offers/invalid/${modalState.offer_id}/cancel`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setOffers({\r\n            ...offers,\r\n            offers: data.offers\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة إلغاء العرض, الرجاء المحاولة لاحقاً',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'FINISHED_OFFER'){\r\n            setErrors({\r\n              Offer: {\r\n                name: 'العرض',\r\n                error: 'لقد تم شراء العرض بالفعل, لا يمكنك إلغاء العروض المكتملة.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              ID: {\r\n                name: 'معرف العرض',\r\n                error: 'لا يوجد عرض يطابق المعرف, الرجاء التأكد من العرض.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_COUPON'){\r\n            setErrors({\r\n              Coupon: {\r\n                name: 'العرض',\r\n                error: 'لا يوجد قسيمة يطابق المدرج في العرض!',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  /* Cancel Offers */\r\n\r\n  /* Accept Offers */\r\n\r\n  const handleAccept = (e) => {\r\n    e.preventDefault();\r\n\r\n    setAcceptModal(true);\r\n    setModalState({offer_id: e.target.id});\r\n  }\r\n\r\n  const AcceptOffer = async(e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/offers/${modalState.offer_id}/validate`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setOffers({\r\n            ...offers,\r\n            offers: data.offers\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة قبول العرض, الرجاء المحاولة لاحقاً',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'FINISHED_OFFER'){\r\n            setErrors({\r\n              Offer: {\r\n                name: 'العرض',\r\n                error: 'لقد تم شراء العرض بالفعل, لا يمكنك قبول العروض المكتملة مسبقاً.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              ID: {\r\n                name: 'معرف العرض',\r\n                error: 'لا يوجد عرض يطابق المعرف, الرجاء التأكد من العرض.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_COUPON'){\r\n            setErrors({\r\n              Coupon: {\r\n                name: 'العرض',\r\n                error: 'لا توجد قسيمة تطابق المعرف المدرج في العرض!',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n  /* Accept Offers */\r\n\r\n  const LoadOffers = () => {\r\n\r\n    const getStatus = (status) => {\r\n      if (status){\r\n        return ['success', 'تم الشراء']\r\n      }\r\n      return ['secondary', 'في الإنتظار']\r\n    }\r\n\r\n    const offers_patch = offers.offers && offers.offers.slice(0, offers.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          offers_patch ? offers_patch.map((offer, index) => {\r\n            let status = getStatus(offer.completed);\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{offer.id}</th>\r\n                <th className=\"table-header text-primary\">{offer.seller}</th>\r\n                <td className=\"table-header text-primary\">{offer.price}$</td>\r\n                <td className=\"table-header\">{offer.coupon_price}$</td>\r\n                <td dir='ltr' className=\"table-header text-danger\">{getDate(offer.coupon_expire)}</td>\r\n                <td className={`table-header text-${status[0]}`}>{status[1]}</td>\r\n                <td dir='ltr' className=\"table-header\">{getDate(offer.start_date)}</td>\r\n                <td className=\"table-header\">\r\n                  <button id={offer.id} onClick={handleCancel} className=\"btn btn-sm btn-outline-danger font-weight-bold\">رفض</button>\r\n                  <button id={offer.id} onClick={handleAccept} className=\"btn btn-sm btn-outline-success font-weight-bold\">قبول</button>\r\n                </td>\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (offers.limit < offers.offers.length){\r\n      let new_limit = offers.limit + 50;\r\n      setOffers({...offers, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (offers.limit > 50){\r\n      let new_limit = offers.limit - 50;\r\n      setOffers({...offers, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset States\r\n    setModalState({offer_id: null});\r\n\r\n    // Reset Modals\r\n    setCancelModal(false);\r\n    setAcceptModal(false);\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البائع</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">السعر المعروض</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">قيمة القسيمة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الصلاحية</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">حالة العرض</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">تاريخ العرض</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">قبول / رفض</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadOffers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(offers.offers && offers.limit < offers.offers.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {offers.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n   \r\n      {/* Cancel Modal */}\r\n      <Modal show={cancelModal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إلغاء العرض ({modalState.offer_id}#)</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"text-warning font-weight-bold\">\r\n              هل أنت متأكد من إلغاء العرض ؟\r\n            </p>\r\n\r\n            <p className=\"text-info font-info\">\r\n              سيتم إعادة القسيمة, وإرسال تنبيه إلى المالك.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"warning\" onClick={CancelOffer}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n\r\n      {/* Cancel Modal */}\r\n      <Modal show={acceptModal} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">قبول العرض ({modalState.offer_id}#)</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"text-primary font-weight-bold\">\r\n              هل أنت متأكد من قبول العرض ؟\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"success\" onClick={AcceptOffer}>\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default AddSellsTable","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst TicketsTable = () => {\r\n\r\n  const [tickets, setTickets] = useState({tickets: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/tickets', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setTickets({\r\n            tickets: data.tickets,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n  const LoadTickets = () => {\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n      date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n  \r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n  \r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n  \r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n  \r\n    const getStatus = (status) => {\r\n      let statuses = {\r\n        open: [\"في إنتظار الرد\", \"info\"],\r\n        waiting: [\"تم الرد\", \"success\"],\r\n        closed: [\"مغلق\", \"dark\"]\r\n      }\r\n  \r\n      return statuses[status]\r\n    }\r\n\r\n    const tickets_patch = tickets.tickets && tickets.tickets.slice(0, tickets.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          tickets_patch ? tickets_patch.map((ticket, index) => {\r\n            let status = getStatus(ticket.status);\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">\r\n                  <Link className=\"text-primary\" to={`/user/tickets/${ticket.id}`}>{ticket.title}</Link>\r\n                </th>\r\n                <th className=\"table-header\">#{ticket.id}</th>\r\n                <th className=\"table-header\">{ticket.user.username}</th>\r\n                <th className=\"table-header\">#{ticket.user.id}</th>\r\n                <th className=\"table-header text-secondary\">{ticket.type}</th>\r\n                <th dir='ltr' className=\"table-header\">{getDate(ticket.created)}</th>\r\n                <th dir='ltr' className=\"table-header\">{ticket.last_activity}</th>\r\n                <th className={`table-header text-${status[1]}`}>{status[0]}</th>\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (tickets.limit < tickets.tickets.length){\r\n      let new_limit = tickets.limit + 50;\r\n      setTickets({...tickets, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (tickets.limit > 50){\r\n      let new_limit = tickets.limit - 50;\r\n      setTickets({...tickets, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">العنوان</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">صاحب التذكرة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">المستخدم (ID)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">نوع التذكرة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">تاريخ الإنشاء</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">آخر مشاركة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الحالة</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadTickets()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(tickets.tickets && tickets.limit < tickets.tickets.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {tickets.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n   </div>\r\n  )\r\n}\r\n\r\n\r\nexport default TicketsTable","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n// Panels{Users}\r\nimport ToProviderTable from '../Panels/ToProviderTable';\r\nimport DisabledUsers from '../Panels/DisabledUsers';\r\nimport InActiveUsers from '../Panels/InActiveUsers';\r\n\r\n\r\n// Panels{Labels}\r\nimport ElementsTable from '../Panels/ElementsTable';\r\nimport FilesTable from '../Panels/FilesTable';\r\n\r\n// Panels{Groups/Offers}\r\nimport GroupsTable from '../Panels/Groups';\r\nimport SellsTable from '../Panels/Sells';\r\nimport AddGroupsTable from '../Panels/AddGroupTable';\r\nimport AddSellsTable from '../Panels/AddSellsTable';\r\nimport TicketsTable from '../Panels/Tickets';\r\n\r\n\r\n\r\nexport const AdminPanel = () => {\r\n\r\n  const [subActive, setSubActive] = useState({});\r\n  const [permissions, setPermissions] = useState({});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  useEffect(() => {\r\n    // Authenticate Current User.\r\n    fetch(\"/api/panel/user/admins\", {\r\n      method: 'Get',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setPermissions(data.permissions);\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    // Tree Menu\r\n    var toggler = document.getElementsByClassName(\"caret\");\r\n    var i;\r\n\r\n    for (i = 0; i < toggler.length; i++) {\r\n      toggler[i].addEventListener(\"click\", function() {\r\n        this.parentElement.querySelector(\".nested\").classList.toggle(\"active\");\r\n        this.classList.toggle(\"caret-down\");\r\n      });\r\n    }\r\n  }, [])\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  const handleSubTableSwitch = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Activate Element's Table\r\n    setSubActive({\r\n      [e.target.id]: true\r\n    })\r\n\r\n    // Reset All Elements to Normal Color\r\n    var toggler = document.getElementsByClassName('tabs-links');\r\n    var i;\r\n    for (i=0;i < toggler.length; i++){\r\n      toggler[i].classList.remove('text-dark');\r\n      toggler[i].classList.add('text-primary');\r\n    }\r\n\r\n    // Change Color of Selected Element.\r\n    document.getElementById(e.target.id).classList.add('text-dark')\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container-fluid mt-5 pt-5\">\r\n\r\n        <div className=\"card bg-light-grey shadow-sm p-5\">\r\n\r\n          <div className=\"text-center\">\r\n            <span className=\"display-7\">لوحة التحكم</span>\r\n          </div>\r\n\r\n          <hr/>\r\n\r\n          <div className=\"card-body mt-5\">\r\n\r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-sm-3 mt-5\">\r\n                \r\n                <ul id=\"myULs\" className=\"text-right font-weight-bold\">\r\n                  \r\n                  <li className=\"mt-5\">\r\n                    <span className=\"caret caret-down display-9\">لوحة التحكم</span>\r\n                    <ul className=\"nested active\">\r\n                      {\r\n                        permissions.TICKETS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Tickets\" to=\"#\" onClick={handleSubTableSwitch}>التذاكر</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.TO_PROVIDER ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Applications\" to=\"#\" onClick={handleSubTableSwitch}>طلبات تحويل الحساب لمعلن</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.DISABLED_USERS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Disabled\" to=\"#\" onClick={handleSubTableSwitch}>الحسابات الموقوفة</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.NEW_USERS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Newbie\" to=\"#\" onClick={handleSubTableSwitch}>الحسابات الجديدة</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.ADS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Groups\" to=\"#\" onClick={handleSubTableSwitch}>الإعلانات</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.ADS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"AddGroup\" to=\"#\" onClick={handleSubTableSwitch}>طلبات إضافة الإعلان</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.OFFERS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Sells\" to=\"#\" onClick={handleSubTableSwitch}>العروض</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.OFFERS ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"AddSells\" to=\"#\" onClick={handleSubTableSwitch}>طلبات إضافة العروض</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.FILES ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Files\" to=\"#\" onClick={handleSubTableSwitch}>الملفات</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                      {\r\n                        permissions.DATA ? (\r\n                          <li>\r\n                            <Link className=\"tabs-links\" id=\"Elements\" to=\"#\" onClick={handleSubTableSwitch}>بيانات الإدخال</Link>\r\n                          </li>\r\n                        ) : null\r\n                      }\r\n                    </ul>\r\n                  </li>\r\n\r\n                </ul>\r\n\r\n              </div>\r\n\r\n              <div className=\"col-sm-9 mt-5\">\r\n\r\n                <div className=\"text-center\">\r\n                  {\r\n                    subActive.Tickets ? <TicketsTable/> : null\r\n                  }\r\n                  {\r\n                    subActive.Applications ? <ToProviderTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Disabled ? <DisabledUsers/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Newbie ? <InActiveUsers/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Groups ? <GroupsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Sells ? <SellsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.AddGroup ? <AddGroupsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.AddSells ? <AddSellsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Elements ? <ElementsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Files ? <FilesTable/> : null\r\n                  }\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\n\r\n\r\nconst Histories = () => {\r\n\r\n  const [histories, setHistories] = useState({histories: null, limit: 50});\r\n  const [types, setTypes] = useState([]);\r\n  const [errors, setErrors] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n\r\n  // Filters\r\n  const [filters, setFilters] = useState({\r\n    search: null,\r\n    entity_type: null,\r\n    record_type: null,\r\n    record_state: null,\r\n    start_date: null,\r\n    end_date: null\r\n  });\r\n  \r\n  // Extractor\r\n  const [extractor, setExtractor] = useState({view: false, records: \"\"});\r\n\r\n  /*eslint-disable */\r\n  //suppress all warnings between comments\r\n  useEffect(() => {\r\n    // Fetch History Data\r\n    fetch('/api/histories', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setErrors({}); // reset Errors\r\n          setHistories({\r\n            ...histories,\r\n            histories: data.histories,\r\n            limit: 50\r\n          })\r\n          if (data.histories.length === 0) {\r\n            setErrors({\r\n              NotFound: {\r\n                name: \"السجلات\",\r\n                error: \"لا توجد سجلات حالياً\",\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n        } else {\r\n          if (data.code === \"SERVER\") {\r\n            setErrors({\r\n              Server: {\r\n                name: \"خطأ\",\r\n                error: \"حدث خطأ أثناء إستخراج السجلات\",\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    });\r\n  }, [])\r\n  /*eslint-enable */\r\n  \r\n  const LoadFilters = () => {\r\n\r\n    const handleChange = (e) => {\r\n      e.preventDefault();\r\n      setErrors({});\r\n      if (e.target.id === \"entity_type\") {\r\n        document.getElementById(\"record_type\").value = '';\r\n        // Types\r\n        var Users = [\r\n          {name: \"تسجيل الدخول\", value: \"تسجيل الدخول\"},\r\n          {name: \"تسجيل الخروج\", value: \"تسجيل الخروج\"},\r\n          {name: \"طلب تغيير كلمة المرور\", value: \"طلب تغيير كلمة المرور\"},\r\n          {name: \"تغيير كلمة المرور\", value: \"تغيير كلمة المرور\"},\r\n          {name: \"تغيير الإسم الشخصي\", value: \"تغيير الإسم الشخصي\"},\r\n          {name: \"تغيير الدولة والمدينة\", value: \"تغيير الدولة والمدينة\"},\r\n          {name: \"تغيير الصورة الشخصية\", value: \"تغيير الصورة الشخصية\"},\r\n          {name: \"تغيير البريد الإلكتروني\", value: \"تغيير البريد الإلكتروني\"},\r\n          {name: \"تغيير إسم شركة المعلن\", value: \"تغيير إسم الشركة\"},\r\n          {name: \"طلب تحويل الحساب لمعلن\", value: \"طلب تحويل الحساب لمعلن\"},\r\n          {name: \"طلب الحصول على القسيمة (التوزيع العشوائي)\", value: \"طلب الحصول على القسيمة (التوزيع العشوائي)\"},\r\n          {name: \"طلب الحصول على القسيمة (طلب مباشر)\", value: \"طلب الحصول على القسيمة (طلب مباشر)\"},\r\n          {name: \"إهداء القسيمة\", value: \"إهداء القسيمة\"},\r\n          {name: \"إستقبال القسيمة (هدية)\", value: \"إستقبال القسيمة\"},\r\n          {name: \"محاولة بيع القسيمة\", value: \"محاولة بيع القسيمة\"},\r\n          {name: \"بيع القسيمة\", value: \"بيع القسيمة\"},\r\n          {name: \"محاولة شراء القسيمة\", value: \"محاولة شراء القسيمة\"},\r\n          {name: \"شراء القسيمة\", value: \"شراء القسيمة\"},\r\n          {name: \"محاولة إلغاء العرض\", value: \"محاولة إلغاء العرض\"},\r\n          {name: \"طلب إضافة رصيد بالبايبال\", value: \"طلب إضافة رصيد بالبايبال\"},\r\n          {name: \"طلب إضافة رصيد بالتحويل البنكي\", value: \"طلب إضافة رصيد بالتحويل البنكي\"},\r\n          {name: \"طلب إضافة رصيد بالتحويل البنكي مقبول\", value: \"طلب إضافة رصيد بالتحويل البنكي مقبول\"},\r\n          {name: \"طلب إضافة رصيد بالتحويل البنكي مرفوض\", value: \"طلب إضافة رصيد بالتحويل البنكي مرفوض\"},\r\n          {name: \"تعديل بيانات المستخدم (الإدارة)\", value: \"تعديل بيانات المستخدم\"},\r\n          {name: \"سحب رتبة المستخدم\", value: \"سحب رتبة المستخدم\"},\r\n          {name: \"ترقية رتبة المستخدم\", value: \"ترقية رتبة المستخدم\"},\r\n          {name: \"تفعيل التحقق من رصيد المعلن\", value: \"تفعيل التحقق من رصيد المعلن\"},\r\n          {name: \"إلغاء تفعيل التحقق من رصيد المعلن\", value: \"إلغاء تفعيل التحقق من رصيد المعلن\"},\r\n        ];\r\n        var Groups = [\r\n          {name: \"إضافة إعلان جديد\", value: \"إضافة إعلان جديد\"},\r\n          {name: \"إنتهاء التوزيع العشوائي\", value: \"إنتهاء التوزيع العشوائي\"},\r\n          {name: \"إنتهاء صلاحية الإعلان\", value: \"إنتهاء صلاحية الإعلان\"},\r\n          {name: \"إنتهاء فترة عرض الإعلان\", value: \"إنتهاء فترة عرض الإعلان\"},\r\n          {name: \"إنتهاء عدد قسائم الإعلان\", value: \"إنتهاء عدد قسائم الإعلان\"},\r\n          {name: \"إضافة قسائم جديدة للإعلان\", value: \"إضافة قسائم جديدة للإعلان\"}\r\n        ];\r\n        var Coupons = [\r\n          {name: 'إستلام القسيمة (توزيع عشوائي)', value: 'إستلام القسيمة (توزيع عشوائي)'},\r\n          {name: 'إستلام القسيمة (طلب مباشر)', value: 'إستلام القسيمة (طلب مباشر)'},\r\n          {name: 'عرض القسيمة للبيع', value: 'عرض القسيمة للبيع'},\r\n          {name: 'شراء عرض القسيمة', value: 'شراء عرض القسيمة'},\r\n          {name: 'إنتقال القسيمة (إهداء)', value: 'إنتقال القسيمة (إهداء)'},\r\n          {name: 'محاولة مطابقة القسيمة', value: 'محاولة مطابقة القسيمة'},\r\n        ];\r\n\r\n        if (e.target.value === \"Users\") {\r\n          setTypes(Users);\r\n        }\r\n        else if (e.target.value === \"Groups\") {\r\n          setTypes(Groups);\r\n        }\r\n        else if (e.target.value === \"Coupons\") {\r\n          setTypes(Coupons);\r\n        }\r\n\r\n        setFilters({\r\n          ...filters,\r\n          [e.target.id]: e.target.value,\r\n          record_type: null,\r\n        });\r\n\r\n      } else {\r\n        setFilters({\r\n          ...filters,\r\n          [e.target.id]: e.target.value\r\n        });\r\n      }\r\n    }\r\n\r\n    const handleFilters = (e) => {\r\n      e.preventDefault();\r\n\r\n      const SearchFilters = async() => {\r\n        await fetch('/api/histories', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Accept': 'application/json',\r\n            'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n          },\r\n          body: JSON.stringify({...filters, offset: new Date().getTimezoneOffset()})\r\n        }).then(resp => {\r\n          resp.json().then(data => {\r\n            if (resp.ok){\r\n              setErrors({}); // reset Errors\r\n              setHistories({\r\n                ...histories,\r\n                histories: data.histories\r\n              })\r\n              if (data.histories.length === 0) {\r\n                setErrors({\r\n                  NotFound: {\r\n                    name: \"السجلات\",\r\n                    error: \"لا توجد سجلات تطابق البحث المدخل.\",\r\n                    type: 'warning'\r\n                  }\r\n                })\r\n              }\r\n            } else {\r\n              if (data.code === \"SERVER\"){\r\n                setErrors({\r\n                  Server: {\r\n                    name: \"خطأ\",\r\n                    error: \"حدث خطأ أثناء فلترة السجلات\",\r\n                    type: 'danger'\r\n                  }\r\n                })\r\n              }\r\n              if ([\r\n                'INVALID_AUTH_HEADER', \r\n                'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n                'ACCESS_DENIED', 'AUTH_ERROR'\r\n              ].includes(data.code)) {\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                  }\r\n                })\r\n              }\r\n              if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n                localStorage.clear();\r\n                sessionStorage.clear();\r\n                setRedirect({\r\n                  redirect: true,\r\n                  flash: {\r\n                    type: 'error',\r\n                    title: 'خطأ',\r\n                    message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                  }\r\n                })\r\n              }\r\n            }\r\n          })\r\n        })\r\n      }\r\n\r\n      if (filters.start_date > filters.end_date){\r\n        setErrors({\r\n          ...errors,\r\n          dates: {\r\n            name: 'التواريخ',\r\n            error: 'تاريخ البداية أكبر من تاريخ النهاية, الرجاء إعادة إدخال التواريخ.',\r\n            type: 'warning'\r\n          }\r\n        })\r\n      } else {\r\n        console.log(filters)\r\n        SearchFilters();\r\n      }\r\n    }\r\n\r\n    const handleExtracting = async(e) => {\r\n      e.preventDefault();\r\n      await fetch('/api/histories/extract', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({...filters, offset: new Date().getTimezoneOffset()})\r\n      }).then(resp => {\r\n        resp.json().then(data_ => {\r\n          if (resp.ok) {\r\n            setExtractor({\r\n              view: true,\r\n              records: data_.records\r\n            })\r\n          } else {\r\n            if (data_.code === \"SERVER\"){\r\n              setErrors({\r\n                Server: {\r\n                  name: \"خطأ\",\r\n                  error: \"حدث خطأ أثناء فلترة السجلات\",\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data_.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data_.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    return(\r\n      <div>\r\n\r\n        <div className=\"row justify-content-right\">\r\n\r\n          <div className=\"col-sm-8\">\r\n            \r\n            <label htmlFor=\"search\" className=\"form-label font-weight-bold float-right\">البحث : </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleChange} id=\"search\" type=\"text\" placeholder=\"البحث عبر الكلمات المفتاحية\" title=\"البحث عبر الـ (ID) أو الكلمات المفتاحية\" className=\"form-control col-sm-6 col-md-12\"/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <div className=\"col-sm-4\">\r\n            \r\n            <label htmlFor=\"search_id\" className=\"form-label font-weight-bold float-right\">معرف المرتبط : </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleChange} id=\"search_id\" type=\"text\" placeholder=\"البحث عبر الـ (ID)\" title=\"البحث عبر الـ (ID) أو الكلمات المفتاحية\" className=\"form-control col-sm-6 col-md-12\"/>\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"row mt-3 justify-content-right\">\r\n\r\n          <div className=\"col-sm-4\">\r\n            <label htmlFor=\"entity_type\" className=\"form-label font-weight-bold float-right\">نوع المرتبط : </label>\r\n            <div className=\"input-group\">\r\n              <select onChange={handleChange} id=\"entity_type\" className=\"custom-select col-sm-6 col-md-12\">\r\n                <option className=\"font-weight-bold\" value=\"\" defaultValue>نوع المرتبط</option>\r\n                <option value=\"Users\">المستخدمين</option>\r\n                <option value=\"Groups\">الإعلانات</option>\r\n                <option value=\"Coupons\">القسائم</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-sm-4\">\r\n            <label htmlFor=\"record_type\" className=\"form-label font-weight-bold float-right\">نوع السجل : </label>\r\n            <div className=\"input-group\">\r\n              <select onChange={handleChange} id=\"record_type\" className=\"custom-select col-sm-6 col-md-12\">\r\n                <option className=\"font-weight-bold\" value=\"\" defaultValue>نوع السجل</option>\r\n                {\r\n                  types.length > 0 ? (\r\n                    <optgroup label=\"أنواع السجلات للمستخدمين\">\r\n                      {types.map((type, ind) => (\r\n                        <option key={ind} value={type.value}>{type.name}</option>\r\n                      ))}\r\n                    </optgroup>\r\n                  ) : (\r\n                    <option disabled value=\"\">--- الرجاء تحديد نوع المرتبط ---</option>\r\n                  )\r\n                }\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-sm-4\">\r\n            <label htmlFor=\"record_state\" className=\"form-label font-weight-bold float-right\">حالة السجل : </label>\r\n            <div className=\"input-group\">\r\n              <select onChange={handleChange} id=\"record_state\" className=\"custom-select col-sm-6 col-md-12\">\r\n                <option className=\"font-weight-bold\" value=\"\" defaultValue>حالة السجل</option>\r\n                <option value=\"succeed\">نجاح</option>\r\n                <option value=\"failed\">خطأ</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"row mt-3 justify-content-right\">\r\n\r\n          <div className=\"col-sm-6\">\r\n            <label htmlFor=\"start_date\" className=\"form-label font-weight-bold float-right\">التاريخ (البداية): </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleChange} id=\"start_date\" type=\"datetime-local\" className={\"form-control col-sm-6 col-md-12 \" + (errors['dates'] ? 'is-invalid' : '')}/>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-sm-6\">\r\n            <label htmlFor=\"end_date\" className=\"form-label font-weight-bold float-right\">التاريخ (النهاية) : </label>\r\n            <div className=\"input-group\">\r\n              <input onChange={handleChange} id=\"end_date\" type=\"datetime-local\" className={\"form-control col-sm-6 col-md-12 \" + (errors['dates'] ? 'is-invalid' : '')}/>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"mt-4 text-center\">\r\n          <button onClick={handleFilters} className=\"btn btn-md btn-primary\">البحث في السجلات</button>\r\n          <button onClick={handleExtracting} className=\"btn btn-md btn-outline-dark\">إستخراج السجلات</button>\r\n          <p>\r\n            <Link to=\"#\" onClick={() => {window.location.reload()}} className=\"font-info text-primary\">إعادة تعيين البحث</Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const LoadHistories = () => {\r\n\r\n    const histories_patch = histories.histories && histories.histories.slice(0, histories.limit);\r\n\r\n    const getType = (entity_type) => {\r\n      let types = {\r\n        Users: 'مستخدم',\r\n        Groups: 'إعلان',\r\n        Coupons: 'قسيمة',\r\n        Offers: 'عرض',\r\n      }\r\n\r\n      return types[entity_type]\r\n    }\r\n\r\n    const getStatus = (status, rec, err) => {\r\n      let statuses = {\r\n        succeed: [`تم ${rec} بنجاح.`, \"fa-check-circle\", \"text-success\"],\r\n        failed: [err, \"fa-times-circle\", \"text-danger\"]\r\n      }\r\n\r\n      return statuses[status]\r\n    }\r\n\r\n    const getDate = (seconds) => {\r\n      var date = new Date(1970, 0, 1);\r\n    date.setSeconds(seconds);\r\n      var sloppy_date = new Date(date);\r\n      var tzOffset = sloppy_date.getTimezoneOffset();\r\n      \r\n      var target_date = new Date(sloppy_date.getTime() - tzOffset * 60 * 1000);\r\n\r\n      var yy = target_date.getFullYear();\r\n      var mm = target_date.getMonth() + 1;\r\n      var dd = target_date.getDate();\r\n\r\n      var h = target_date.getHours();\r\n      var m = target_date.getMinutes();\r\n\r\n      return `${yy}-${(mm>9?'':'0')+mm}-${(dd>9?'':'0')+dd} ${(h>9?'':'0')+h}:${(m>9?'':'0')+m}`\r\n    }\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          histories_patch ? histories_patch.map((history, index) => {\r\n            var entity_type = getType(history.entity_type);\r\n            var status = getStatus(history.record_state, history.record_type, history.error_message);\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">#{history.id}</th>\r\n                <td className=\"table-header text-info\">{entity_type}</td>\r\n                <td className=\"table-header\">#{history.entity_id}</td>\r\n                <td className=\"table-body text-primary\">{history.record_type}</td>\r\n                <td className=\"table-body wordWrap\">{history.record}</td>\r\n                <td title={status[0]} className=\"wordWrap tooltips table-body\">\r\n                  <i className={`fa ${status[1]} fa-lg ${status[2]}`}/>\r\n                </td>\r\n                <td dir='ltr' className=\"table-body\">{getDate(new Date(history.date))}</td>\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (histories.limit < histories.histories.length){\r\n      let new_limit = histories.limit + 50;\r\n      setHistories({...histories, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (histories.limit > 50){\r\n      let new_limit = histories.limit - 50;\r\n      setHistories({...histories, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    \r\n    setExtractor({view: false, records: \"\"});\r\n  }\r\n\r\n  const downloadRecords = () => {\r\n    var element = document.createElement('a');\r\n    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(extractor.records));\r\n    element.setAttribute('download', 'records.txt');\r\n\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pt-5 pb-5\">\r\n\r\n      <div className=\"container text-center mt-5 pt-5\">\r\n\r\n        <div className=\"container mt-4\">\r\n\r\n          <span className=\"display-6\">السجلات</span>\r\n          <hr/>\r\n\r\n          {LoadFilters()}\r\n\r\n          <div className=\"container mt-4\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"table-responsive mt-2\">\r\n      \r\n            <table className=\"table mt-4 table-sm table-bordered\">\r\n              <thead>\r\n                <tr className=\"bg-light-grey\">\r\n                  <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n                  <th className=\"font-weight-bold\" scope=\"col\">نوع المرتبط</th>\r\n                  <th className=\"font-weight-bold\" scope=\"col\">المرتبط (ID)</th>\r\n                  <th className=\"font-weight-bold\" scope=\"col\">نوع السجل</th>\r\n                  <th className=\"font-weight-bold\" scope=\"col\">السجل</th>\r\n                  <th className=\"font-weight-bold\" scope=\"col\">حالة السجل</th>\r\n                  <th className=\"font-weight-bold\" scope=\"col\">التاريخ</th>\r\n                </tr>\r\n              </thead>\r\n              {LoadHistories()}\r\n            </table>\r\n            <div className=\"justify-content-center\">\r\n              {(histories.histories && histories.limit < histories.histories.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n              {histories.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n\r\n      {/* Data Extractor Modal */}\r\n      <Modal show={extractor.view} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">السجلات المستخرجة</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"text-center\">\r\n          <textarea className=\"form-control\" cols=\"30\" rows=\"10\">\r\n            {extractor.records}\r\n          </textarea>\r\n          <div className=\"container mt-2\">\r\n            <Link to=\"#\" onClick={downloadRecords}>تحميل السجلات</Link>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n   \r\n\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default Histories","import React, { useState, useEffect } from 'react';\r\n\r\n// Phone Input\r\nimport { getCountryCallingCode } from 'react-phone-number-input';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst AdminsTable = () => {\r\n\r\n  const [basic, setBasicData] = useState([]);\r\n\r\n  const [users, setUsers] = useState({users: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Search Users\r\n  const [search, setSearch] = useState();  \r\n\r\n  // Modals\r\n  const [state, setState] = useState({\r\n    amount: 0,\r\n    access_level: null,\r\n    company_name: null,\r\n    username: null,\r\n    phone: null,\r\n    pre_phone: null,\r\n    country: null\r\n  });\r\n  \r\n  const [modalState, setModalState] = useState({});\r\n\r\n  const [isSetting, setSettingModal] = useState(false);\r\n  const [isPermissions, setPermissionsModal] = useState(false);\r\n  const [isDelete, setDeletingModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/admins', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            users: data.users,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    });\r\n\r\n    // Fetch basic Data\r\n    let basicData = JSON.parse(localStorage.maidan_elements);\r\n    setBasicData(basicData);\r\n  }, [])\r\n\r\n\r\n  const handleSettings = (id, user) => {\r\n\r\n    if (id === 'S'){\r\n      setSettingModal(true);\r\n      setModalState(user);\r\n      setState({\r\n        ...state,\r\n        username: user.username,\r\n        phone: user.phone.slice(4),\r\n        pre_phone: user.phone.substring(0, 4),\r\n        country: user.country\r\n      })\r\n    }\r\n    if (id === 'P'){\r\n      setPermissionsModal(true);\r\n      setModalState(user);\r\n    }\r\n    if (id === 'D'){\r\n      setDeletingModal(true);\r\n      setModalState(user);\r\n    }\r\n  }\r\n\r\n  const SearchUsers = async(e) => {\r\n    setSearch({\r\n      ...search,\r\n      [e.target.id]: e.target.value\r\n    })\r\n    await fetch('/api/panel/admins', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({...search, [e.target.id]: e.target.value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          })\r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const LoadUsers = () => {\r\n\r\n    const users_patch = users.users && users.users.slice(0, users.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"table-header font-weight-bold\">\r\n            #\r\n          </th>\r\n\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"username\" type=\"text\" placeholder=\"إسم المستخدم : \" className=\"form-contro\"/>\r\n          </td>\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"fullname\" type=\"text\" placeholder=\"الإسم الكامل : \" className=\"form-contro\"/>\r\n          </td>\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"email\" type=\"email\" placeholder=\"البريد : \" className=\"form-contro\"/>\r\n          </td>\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"phone\" type=\"text\" inputMode=\"tel\" placeholder=\"رقم الجوال : \" className=\"form-contro\"/>\r\n          </td>\r\n\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n        </tr>\r\n        {\r\n          users_patch ? users_patch.map((user, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{user.id}</th>\r\n              <td className=\"table-body\">{user.username}</td>\r\n              <td className=\"table-body\">{user.fullname}</td>\r\n              <td className=\"table-body\">{user.email}</td>\r\n              <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n              <td className=\"table-body\">{user.claimed_coupons}</td>\r\n              <td className=\"table-body\">{user.balance} $</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {handleSettings('S', user)}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">البيانات</button>\r\n                <button onClick={() => {handleSettings('P', user)}} className=\"btn btn-sm btn-outline-info font-weight-bold\">الصلاحيات</button>\r\n                <button onClick={() => {handleSettings('D', user)}} className=\"btn btn-sm btn-danger font-weight-bold\">إيقاف</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  // Settings\r\n\r\n  const handleDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    const DeleteUser = async() => {\r\n      await fetch(`/api/panel/admins/${modalState.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'الحساب موقوف بالفعل, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    DeleteUser();\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (users.limit < users.users.length){\r\n      let new_limit = users.limit + 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (users.limit > 50){\r\n      let new_limit = users.limit - 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const handleSettingsChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setErrors({});\r\n\r\n    if (e.target.id === 'pre_phone'){\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.name,\r\n        country: e.target.title\r\n      });\r\n\r\n      document.getElementById('pre_phone_selector').innerText = e.target.name;\r\n    } else {\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.value\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const handleSettingsSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SubmitSettings = async() => {\r\n      await fetch(`/api/panel/admins/${modalState.id}/settings`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(state)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)) {\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID') {\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"USERNAME_TAKEN\") {\r\n              setErrors({\r\n                username: {\r\n                  name: 'إسم المستخدم',\r\n                  error: 'إسم المستخدم مسجل مسبقاً, الرجاء إدخال إسم مستخدم آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"PHONE_TAKEN\") {\r\n              setErrors({\r\n                fullPhone: {\r\n                  name: 'رقم الجوال',\r\n                  error: 'رقم الجوال مسجل مسبقاً, الرجاء إدخال رقم جوال آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"INVALID_REQUEST\") {\r\n              setErrors({\r\n                request: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (state.amount < -modalState.balance) {\r\n      setErrors({\r\n        amount: {\r\n          name: \"الرصيد\",\r\n          error: `الرجاء إدخال رصيد أكبر من ${modalState.balance}- (القيمة السالبة لرصيد المستخدم الحالي)`,\r\n          type: \"warning\"\r\n        }\r\n      })\r\n    }\r\n    else if (!state.pre_phone) {\r\n      setErrors({\r\n        ...errors,\r\n        pre_phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'خانة الدولة غير محددة, الرجاء إختيار الدولة.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else if (state.phone[0] !== \"5\" || state.phone.length !== 9){\r\n      setErrors({\r\n        ...errors,\r\n        phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'رقم الجوال يجب أن يبدأ بـ 5 ويجب أن يتكون من 9 أرقام.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      SubmitSettings();\r\n    }\r\n  }\r\n\r\n  const handlePermissionsSubmit = (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Fetch Permissions & its state.\r\n    var permissionsBox = document.getElementsByName(\"permissions\");\r\n    var permissionsList = []\r\n    for (var i=0; i<permissionsBox.length; i++){\r\n      var s = permissionsBox[i];\r\n      if (s.checked){\r\n        permissionsList.push(s.id);\r\n      };\r\n    }\r\n    \r\n    const UpdatePermissions = async() => {\r\n      await fetch(`/api/panel/user/${modalState.id}/permissions`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({permissions: permissionsList})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NOT_ADMIN'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم ليس من ضمن الإدارة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    UpdatePermissions();\r\n  }\r\n\r\n  const BackToNormalUser = async() => {\r\n    await fetch(`/api/panel/user/${modalState.id}/downgrade`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              ID: {\r\n                name: 'المستخدم',\r\n                error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset State, Errors\r\n    setErrors({});\r\n    setModalState({});\r\n    setState({\r\n      amount: 0,\r\n      company_name: null,\r\n      username: null,\r\n      phone: null,\r\n      pre_phone: null,\r\n      country: null\r\n    });\r\n\r\n\r\n    // Reset Modals\r\n    setSettingModal(false);\r\n    setPermissionsModal(false);\r\n    setDeletingModal(false);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">القسائم المملوكة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الرصيد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadUsers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(users.users && users.limit < users.users.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {users.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Settings Modal */}\r\n      <Modal show={isSetting} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل بيانات المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handleSettingsSubmit} id=\"mainForm\">\r\n\r\n            <div className=\"container text-right\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الإنتباه عند تغيير بيانات المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                  <label htmlFor=\"username\" className=\"font-weight-bold\">* إسم المستخدم :</label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"username\" defaultValue={modalState.username} type=\"text\" placeholder=\"إسم المستخدم\" className={\"form-control col-sm-10 \" + (errors.username ? 'is-invalid' : '')}/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"phone\" className=\"ml-sm-4 font-weight-bold\">* رقم الجوال : </label>\r\n                  <div className=\"input-group\">\r\n\r\n                    <input onChange={handleSettingsChange} dir='ltr' defaultValue={modalState.phone ? modalState.phone.slice(4) : null } required id=\"phone\" type=\"text\" placeholder=\"5xxxxxxxx\" className={\"form-control col-sm-8 \" + (errors.phone || errors.fullPhone ? \"is-invalid\" : '')}/>\r\n                    \r\n                    <div className=\"btn-group\">\r\n                      <Link dir='ltr' id=\"pre_phone_selector\" className={\"form-control btn-white dropdown-toggle \" + (errors.pre_phone || errors.fullPhone ? 'is-invalid' : '')} data-toggle=\"dropdown\" to=\"#\">{modalState.phone ? modalState.phone.substring(0,4) : null}</Link>\r\n                      <ul className=\"dropdown-menu font-weight-bold\">\r\n                        {\r\n                          basic.map((data, index) => {\r\n                            if (data.key === 'country'){\r\n                              return(\r\n                                <li key={index}>\r\n                                  <Link to=\"#\" className=\"text-dark ml-2\" id=\"pre_phone\" name={`+${data.values.telecode}`} title={data.values.country.ar} onClick={handleSettingsChange}>\r\n                                    {getCountryCallingCode(data.label)}+ <img src={`http://catamphetamine.gitlab.io/country-flag-icons/3x2/${data.label}.svg`} width=\"24\" alt={data.label}/>\r\n                                  </Link>\r\n                                </li>\r\n                              )\r\n                            }\r\n                          })\r\n                        }\r\n                      </ul>\r\n                    </div>\r\n\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"country\" className=\"font-weight-bold\">* الدولة :</label>\r\n                  <div className=\"input-group\">\r\n                    <select onChange={handleSettingsChange} id=\"country\" required defaultValue={modalState.country} className=\"custom-select col-sm-10\">\r\n                      {basic.map((data, index) => {\r\n                        if (data.key === 'country'){\r\n                          return(\r\n                            <option key={index} value={data.values.country.ar}>{data.values.country.ar}</option>\r\n                          )\r\n                        }\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* (إضافة/إزالة) الرصيد $ : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"amount\" type=\"number\" min={-modalState.balance} step=\"0.01\" defaultValue={0} placeholder=\"رصيد المستخدم\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"container text-right mt-2\">\r\n                  <p className=\"info-weight\">\r\n                    - رصيد {modalState.username} الحالي : {modalState.balance}$\r\n                  <br/>\r\n                    - رصيد {modalState.username} بعد التعديل : {parseFloat(parseFloat(modalState.balance) + parseFloat(state.amount)).toFixed(2)}$\r\n                  </p>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type='submit' form=\"mainForm\" variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      \r\n      </Modal>\r\n      \r\n      {/* Permissions Modal */}\r\n      <Modal show={isPermissions} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تغيير صلاحية المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handlePermissionsSubmit} id=\"permissionsForm\">\r\n\r\n            <div className=\"container\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الحذر عند تغيير مستوى صلاحية المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container text-right mt-4\">\r\n\r\n              <p className=\"text-primary font-weight-bold\">\r\n                الصلاحيات : \r\n              </p>\r\n\r\n              <div className=\"row\">\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"TO_PROVIDER\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.TO_PROVIDER ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"TO_PROVIDER\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة طلبات التحويل لمعلن.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"DISABLED_USERS\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.DISABLED_USERS ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"DISABLED_USERS\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة الحسابات الموقوفة.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"NEW_USERS\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.NEW_USERS ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"NEW_USERS\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    تفعيل الحسابات الجديدة.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"ADS\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.ADS ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"ADS\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة إعلانات وطلبات إضافة الإعلانات للمعلنين.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"OFFERS\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.OFFERS ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"OFFERS\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة عروض قسائم المستخدمين.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"TICKETS\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.TICKETS ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"TICKETS\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة التذاكر.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"FILES\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.FILES ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"FILES\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة الملفات.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-2 text-right\">\r\n                  <input name=\"permissions\" id=\"DATA\" type=\"checkbox\" defaultChecked={modalState.permissions && modalState.permissions.DATA ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"DATA\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    متابعة بيانات الإدخال.\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-5\">\r\n                  \r\n                  <Link onClick={BackToNormalUser} className=\"btn btn-md btn-outline-danger font-weight-bold\">سحب رتبة الإداري</Link>\r\n                  <p className=\"text-danger font-info\">\r\n                    * سيتم تعيين المستخدم لمستفيد عادي, وإلغاء جميع صلاحياته.\r\n                  </p>\r\n\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type=\"submit\" form='permissionsForm' variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n      \r\n      {/* Delete Modal */}\r\n      <Modal show={isDelete} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إيقاف المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container\">\r\n            <p className=\"text-danger font-weight-bold\">\r\n              هل أنت متأكد من إيقاف المستخدم؟\r\n            </p>\r\n            <p className=\"text-dark font-info\">\r\n              يمكنك إعادة تفعيل المستخدم, عبر لوحة الحسابات الموقوفة.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button onClick={handleDelete} variant=\"danger\">\r\n              إيقاف\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default AdminsTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Phone Input\r\nimport { getCountryCallingCode } from 'react-phone-number-input';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst ProvidersTable = () => {\r\n\r\n  const [basic, setBasicData] = useState([]);\r\n\r\n  const [users, setUsers] = useState({users: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Search Users\r\n  const [search, setSearch] = useState();  \r\n\r\n  // Modals\r\n  const [state, setState] = useState({\r\n    amount: 0,\r\n    company_name: null,\r\n    username: null,\r\n    phone: null,\r\n    pre_phone: null,\r\n    country: null\r\n  });\r\n  \r\n  const [modalState, setModalState] = useState({});\r\n\r\n  const [isSetting, setSettingModal] = useState(false);\r\n  const [isRaise, setRaiseModal] = useState(false);\r\n  const [isDelete, setDeletingModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/providers', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            users: data.users,\r\n            limit: 50\r\n          });\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    });\r\n\r\n    // Fetch basic Data\r\n    let basicData = JSON.parse(localStorage.maidan_elements);\r\n    setBasicData(basicData);\r\n  }, [])\r\n\r\n  const handleSettings = (id, user) => {\r\n\r\n    if (id === 'S'){\r\n      setSettingModal(true);\r\n      setModalState(user);\r\n      setState({\r\n        ...state,\r\n        username: user.username,\r\n        phone: user.phone.slice(4),\r\n        pre_phone: user.phone.substring(0, 4),\r\n        country: user.country\r\n      })\r\n    }\r\n    if (id === 'R'){\r\n      setRaiseModal(true);\r\n      setModalState(user);\r\n    }\r\n    if (id === 'D'){\r\n      setDeletingModal(true);\r\n      setModalState(user);\r\n    }\r\n  }\r\n\r\n  const SearchUsers = async(e) => {\r\n    setSearch({\r\n      ...search,\r\n      [e.target.id]: e.target.value\r\n    })\r\n    await fetch('/api/panel/providers', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({...search, [e.target.id]: e.target.value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  } \r\n\r\n  const LoadUsers = () => {\r\n\r\n    const users_patch = users.users && users.users.slice(0, users.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        <tr>\r\n            <th className=\"table-header font-weight-bold\">\r\n              #\r\n            </th>\r\n\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"username\" type=\"text\" placeholder=\"إسم المستخدم : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"fullname\" type=\"text\" placeholder=\"الإسم الكامل : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"email\" type=\"email\" placeholder=\"البريد : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"phone\" type=\"text\" inputMode=\"tel\" placeholder=\"رقم الجوال : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"company\" type=\"text\" placeholder=\"الشركة : \" className=\"\"/>\r\n            </td>\r\n\r\n            <td className=\"table-body\"/>\r\n            <td className=\"table-body\"/>\r\n            <td className=\"table-body\"/>\r\n          </tr>\r\n        {\r\n          users_patch ? users_patch.map((user, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{user.id}</th>\r\n              <td className=\"table-body\">{user.username}</td>\r\n              <td className=\"table-body\">{user.fullname}</td>\r\n              <td className=\"table-body\">{user.email}</td>\r\n              <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n              <td className=\"table-body\">{user.company}</td>\r\n              <td className=\"table-body\">{user.owned_groups}</td>\r\n              <td className=\"table-body\">{user.balance} $</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {handleSettings('S', user)}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">البيانات</button>\r\n                <button onClick={() => {handleSettings('R', user)}} className=\"btn btn-sm btn-outline-info font-weight-bold\">الصلاحيات</button>\r\n                <button onClick={() => {handleSettings('D', user)}} className=\"btn btn-sm btn-danger font-weight-bold\">إيقاف</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  // Settings\r\n\r\n  const handleDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    const DeleteUser = async() => {\r\n      await fetch(`/api/panel/providers/${modalState.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'الحساب موقوف بالفعل, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    DeleteUser();\r\n  }\r\n\r\n  const handleSettingsChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setErrors({});\r\n\r\n    if (e.target.id === 'pre_phone'){\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.name,\r\n        country: e.target.title\r\n      });\r\n\r\n      document.getElementById('pre_phone_selector').innerText = e.target.name;\r\n    } else {\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.value\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const handleSettingsSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SubmitSettings = async() => {\r\n      await fetch(`/api/panel/providers/${modalState.id}/settings`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(state)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)) {\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID') {\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"USERNAME_TAKEN\") {\r\n              setErrors({\r\n                username: {\r\n                  name: 'إسم المستخدم',\r\n                  error: 'إسم المستخدم مسجل مسبقاً, الرجاء إدخال إسم مستخدم آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"PHONE_TAKEN\") {\r\n              setErrors({\r\n                fullPhone: {\r\n                  name: 'رقم الجوال',\r\n                  error: 'رقم الجوال مسجل مسبقاً, الرجاء إدخال رقم جوال آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"INVALID_REQUEST\") {\r\n              setErrors({\r\n                request: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (state.amount < -modalState.balance) {\r\n      setErrors({\r\n        amount: {\r\n          name: \"الرصيد\",\r\n          error: `الرجاء إدخال رصيد أكبر من ${modalState.balance}- (القيمة السالبة لرصيد المستخدم الحالي)`,\r\n          type: \"warning\"\r\n        }\r\n      })\r\n    }\r\n    else if (!state.pre_phone) {\r\n      setErrors({\r\n        ...errors,\r\n        pre_phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'خانة الدولة غير محددة, الرجاء إختيار الدولة.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else if (state.phone[0] !== \"5\" || state.phone.length !== 9){\r\n      setErrors({\r\n        ...errors,\r\n        phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'رقم الجوال يجب أن يبدأ بـ 5 ويجب أن يتكون من 9 أرقام.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      SubmitSettings();\r\n    }\r\n  }\r\n\r\n  const handleCompanySubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    var elem = document.getElementById('check_balance');\r\n\r\n    const SubmitCompany = async() => {\r\n      await fetch(`/api/panel/providers/${modalState.id}/company`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify({...state, check_balance: elem.checked ? true : false})\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    SubmitCompany();\r\n  }\r\n\r\n  const BackToNormalUser = async() => {\r\n    await fetch(`/api/panel/user/${modalState.id}/downgrade`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          });\r\n          resetModals();\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              ID: {\r\n                name: 'المستخدم',\r\n                error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (users.limit < users.users.length){\r\n      let new_limit = users.limit + 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (users.limit > 50){\r\n      let new_limit = users.limit - 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset State, Errors\r\n    setErrors({});\r\n    setModalState({});\r\n    setState({\r\n      amount: 0,\r\n      company_name: null,\r\n      username: null,\r\n      phone: null,\r\n      pre_phone: null,\r\n      country: null\r\n    });\r\n\r\n    // Reset Modals\r\n    setSettingModal(false);\r\n    setRaiseModal(false);\r\n    setDeletingModal(false);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-2\">\r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الشركة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعلانات المملوكة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الرصيد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadUsers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(users.users && users.limit < users.users.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {users.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Settings Modal */}\r\n      <Modal show={isSetting} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل بيانات المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handleSettingsSubmit} id=\"mainForm\">\r\n\r\n            <div className=\"container text-right\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الإنتباه عند تغيير بيانات المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                  <label htmlFor=\"username\" className=\"font-weight-bold\">* إسم المستخدم :</label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"username\" defaultValue={modalState.username} type=\"text\" placeholder=\"إسم المستخدم\" className={\"form-control col-sm-10 \" + (errors.username ? 'is-invalid' : '')}/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"phone\" className=\"ml-sm-4 font-weight-bold\">* رقم الجوال : </label>\r\n                  <div className=\"input-group\">\r\n\r\n                    <input onChange={handleSettingsChange} dir='ltr' defaultValue={modalState.phone ? modalState.phone.slice(4) : null } required id=\"phone\" type=\"text\" placeholder=\"5xxxxxxxx\" className={\"form-control col-sm-8 \" + (errors.phone || errors.fullPhone ? \"is-invalid\" : '')}/>\r\n                    \r\n                    <div className=\"btn-group\">\r\n                      <Link dir='ltr' id=\"pre_phone_selector\" className={\"form-control btn-white dropdown-toggle \" + (errors.pre_phone || errors.fullPhone ? 'is-invalid' : '')} data-toggle=\"dropdown\" to=\"#\">{modalState.phone ? modalState.phone.substring(0,4) : null}</Link>\r\n                      <ul className=\"dropdown-menu font-weight-bold\">\r\n                        {\r\n                          basic.map((data, index) => {\r\n                            if (data.key === 'country'){\r\n                              return(\r\n                                <li key={index}>\r\n                                  <Link to=\"#\" className=\"text-dark ml-2\" id=\"pre_phone\" name={`+${data.values.telecode}`} title={data.values.country.ar} onClick={handleSettingsChange}>\r\n                                    {getCountryCallingCode(data.label)}+ <img src={`http://catamphetamine.gitlab.io/country-flag-icons/3x2/${data.label}.svg`} width=\"24\" alt={data.label}/>\r\n                                  </Link>\r\n                                </li>\r\n                              )\r\n                            }\r\n                          })\r\n                        }\r\n                      </ul>\r\n                    </div>\r\n\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"country\" className=\"font-weight-bold\">* الدولة :</label>\r\n                  <div className=\"input-group\">\r\n                    <select onChange={handleSettingsChange} id=\"country\" required defaultValue={modalState.country} className=\"custom-select col-sm-10\">\r\n                      {basic.map((data, index) => {\r\n                        if (data.key === 'country'){\r\n                          return(\r\n                            <option key={index} value={data.values.country.ar}>{data.values.country.ar}</option>\r\n                          )\r\n                        }\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* (إضافة/إزالة) الرصيد $ : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"amount\" type=\"number\" min={-modalState.balance} step=\"0.01\" defaultValue={0} placeholder=\"رصيد المستخدم\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"container text-right mt-2\">\r\n                  <p className=\"info-weight\">\r\n                    - رصيد {modalState.username} الحالي : {modalState.balance}$\r\n                  <br/>\r\n                    - رصيد {modalState.username} بعد التعديل : {parseFloat(parseFloat(modalState.balance) + parseFloat(state.amount)).toFixed(2)}$\r\n                  </p>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type='submit' form=\"mainForm\" variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      \r\n      </Modal>\r\n      \r\n      {/* Raise Modal */}\r\n      <Modal show={isRaise} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تغيير صلاحية المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handleCompanySubmit} id=\"mainForm\">\r\n\r\n            <div className=\"container\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الحذر عند تغيير إسم شركة المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-10\">\r\n                  <label htmlFor=\"company_name\" className=\"font-weight-bold\">* إسم الشركة : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required defaultValue={modalState.company} id=\"company_name\" type=\"text\" placeholder=\"(فقط للمعلن)\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 form-check mt-4 text-right\">\r\n                  <input name=\"check_balance\" id=\"check_balance\" type=\"checkbox\" defaultChecked={modalState.check_balance ? true : false} className=\"form-check-input\"/>\r\n                  <label htmlFor=\"check_balance\" className=\"form-check-label font-weight-bold mr-4\">\r\n                    التحقق من الرصيد قبل إضافة إعلان\r\n                  </label>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-4\">\r\n                  \r\n                  <Link to=\"#\" onClick={BackToNormalUser} className=\"btn btn-md btn-outline-danger font-weight-bold\">سحب رتبة المعلن</Link>\r\n                  <p className=\"text-danger font-info\">\r\n                    * سيتم تعيين المستخدم لمستفيد عادي, وإلغاء جميع صلاحياته.\r\n                  </p>\r\n\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type=\"submit\" form='mainForm' variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n      \r\n      {/* Delete Modal */}\r\n      <Modal show={isDelete} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إيقاف المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container\">\r\n            <p className=\"text-danger font-weight-bold\">\r\n              هل أنت متأكد من إيقاف المستخدم؟\r\n            </p>\r\n            <p className=\"text-dark font-info\">\r\n              يمكنك إعادة تفعيل المستخدم, عبر لوحة الحسابات الموقوفة.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button onClick={handleDelete} variant=\"danger\">\r\n              إيقاف\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default ProvidersTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Phone Input\r\nimport { getCountryCallingCode } from 'react-phone-number-input';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst AssociatesTable = () => {\r\n\r\n  const [basic, setBasicData] = useState([]);\r\n\r\n  const [users, setUsers] = useState({users: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Search Users\r\n  const [search, setSearch] = useState();  \r\n\r\n  // Modals\r\n  const [state, setState] = useState({\r\n    amount: 0,\r\n    company_name: null,\r\n    username: null,\r\n    phone: null,\r\n    pre_phone: null,\r\n    country: null\r\n  });\r\n  \r\n  const [modalState, setModalState] = useState({});\r\n\r\n  const [isSetting, setSettingModal] = useState(false);\r\n  const [isRemove, setRemoveModal] = useState(false);\r\n  const [isDelete, setDeletingModal] = useState(false);\r\n\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/associates', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            users: data.users,\r\n            limit: 50\r\n          });\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    });\r\n\r\n    // Fetch basic Data\r\n    let basicData = JSON.parse(localStorage.maidan_elements);\r\n    setBasicData(basicData);\r\n  }, [])\r\n\r\n  const handleSettings = (id, user) => {\r\n\r\n    if (id === 'S'){\r\n      setSettingModal(true);\r\n      setModalState(user);\r\n      setState({\r\n        ...state,\r\n        username: user.username,\r\n        phone: user.phone.slice(4),\r\n        pre_phone: user.phone.substring(0, 4),\r\n        country: user.country\r\n      })\r\n    }\r\n    if (id === 'R'){\r\n      setRemoveModal(true);\r\n      setModalState(user);\r\n    }\r\n    if (id === 'D'){\r\n      setDeletingModal(true);\r\n      setModalState(user);\r\n    }\r\n  }\r\n\r\n  const SearchUsers = async(e) => {\r\n    setSearch({\r\n      ...search,\r\n      [e.target.id]: e.target.value\r\n    })\r\n    await fetch('/api/panel/providers', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({...search, [e.target.id]: e.target.value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  } \r\n\r\n  const LoadUsers = () => {\r\n\r\n    const users_patch = users.users && users.users.slice(0, users.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        <tr>\r\n            <th className=\"table-header font-weight-bold\">\r\n              #\r\n            </th>\r\n\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"username\" type=\"text\" placeholder=\"إسم المستخدم : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"fullname\" type=\"text\" placeholder=\"الإسم الكامل : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"email\" type=\"email\" placeholder=\"البريد : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"phone\" type=\"text\" inputMode=\"tel\" placeholder=\"رقم الجوال : \" className=\"\"/>\r\n            </td>\r\n            <td className=\"table-body\">\r\n              <input onChange={SearchUsers} id=\"company\" type=\"text\" placeholder=\"الشركة : \" className=\"\"/>\r\n            </td>\r\n\r\n            <td className=\"table-body\"/>\r\n            <td className=\"table-body\"/>\r\n            <td className=\"table-body\"/>\r\n          </tr>\r\n        {\r\n          users_patch ? users_patch.map((user, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{user.id}</th>\r\n              <td className=\"table-body\">{user.username}</td>\r\n              <td className=\"table-body\">{user.fullname}</td>\r\n              <td className=\"table-body\">{user.email}</td>\r\n              <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n              <td className=\"table-body\">{user.company}</td>\r\n              <td className=\"table-body\">{user.balance} $</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {handleSettings('S', user)}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">البيانات</button>\r\n                <button onClick={() => {handleSettings('R', user)}} className=\"btn btn-sm btn-outline-warning font-weight-bold\">إزالة كمساعد</button>\r\n                <button onClick={() => {handleSettings('D', user)}} className=\"btn btn-sm btn-danger font-weight-bold\">إيقاف</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  // Settings\r\n\r\n  const handleDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    const DeleteUser = async() => {\r\n      await fetch(`/api/panel/providers/${modalState.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'الحساب موقوف بالفعل, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    DeleteUser();\r\n  }\r\n\r\n  const handleSettingsChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setErrors({});\r\n\r\n    if (e.target.id === 'pre_phone'){\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.name,\r\n        country: e.target.title\r\n      });\r\n\r\n      document.getElementById('pre_phone_selector').innerText = e.target.name;\r\n    } else {\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.value\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const handleSettingsSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SubmitSettings = async() => {\r\n      await fetch(`/api/panel/providers/${modalState.id}/settings`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(state)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)) {\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID') {\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"USERNAME_TAKEN\") {\r\n              setErrors({\r\n                username: {\r\n                  name: 'إسم المستخدم',\r\n                  error: 'إسم المستخدم مسجل مسبقاً, الرجاء إدخال إسم مستخدم آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"PHONE_TAKEN\") {\r\n              setErrors({\r\n                fullPhone: {\r\n                  name: 'رقم الجوال',\r\n                  error: 'رقم الجوال مسجل مسبقاً, الرجاء إدخال رقم جوال آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"INVALID_REQUEST\") {\r\n              setErrors({\r\n                request: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (state.amount < -modalState.balance) {\r\n      setErrors({\r\n        amount: {\r\n          name: \"الرصيد\",\r\n          error: `الرجاء إدخال رصيد أكبر من ${modalState.balance}- (القيمة السالبة لرصيد المستخدم الحالي)`,\r\n          type: \"warning\"\r\n        }\r\n      })\r\n    }\r\n    else if (!state.pre_phone) {\r\n      setErrors({\r\n        ...errors,\r\n        pre_phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'خانة الدولة غير محددة, الرجاء إختيار الدولة.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else if (state.phone[0] !== \"5\" || state.phone.length !== 9){\r\n      setErrors({\r\n        ...errors,\r\n        phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'رقم الجوال يجب أن يبدأ بـ 5 ويجب أن يتكون من 9 أرقام.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      SubmitSettings();\r\n    }\r\n  }\r\n\r\n  const removeAssociate = async() => {\r\n    await fetch(`/api/panel/association/remove/${modalState.id}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok) {\r\n          resetModals();\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"NO_USER\") {\r\n            setErrors({\r\n              Delete: {\r\n                name: 'إزالة المساعد',\r\n                error: 'حدث خطأ أثناء محاولة إزالة المساعد, المستخدم غير موجود',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === \"SERVER\") { \r\n            setErrors({\r\n              Delete: {\r\n                name: 'إزالة المساعد',\r\n                error: 'حدث خطأ أثناء محاولة إزالة المساعد.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (users.limit < users.users.length){\r\n      let new_limit = users.limit + 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (users.limit > 50){\r\n      let new_limit = users.limit - 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset State, Errors\r\n    setErrors({});\r\n    setModalState({});\r\n    setState({\r\n      amount: 0,\r\n      company_name: null,\r\n      username: null,\r\n      phone: null,\r\n      pre_phone: null,\r\n      country: null\r\n    });\r\n\r\n    // Reset Modals\r\n    setSettingModal(false);\r\n    setRemoveModal(false);\r\n    setDeletingModal(false);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-2\">\r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الشركة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الرصيد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadUsers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(users.users && users.limit < users.users.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {users.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Settings Modal */}\r\n      <Modal show={isSetting} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل بيانات المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handleSettingsSubmit} id=\"mainForm\">\r\n\r\n            <div className=\"container text-right\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الإنتباه عند تغيير بيانات المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                  <label htmlFor=\"username\" className=\"font-weight-bold\">* إسم المستخدم :</label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"username\" defaultValue={modalState.username} type=\"text\" placeholder=\"إسم المستخدم\" className={\"form-control col-sm-10 \" + (errors.username ? 'is-invalid' : '')}/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"phone\" className=\"ml-sm-4 font-weight-bold\">* رقم الجوال : </label>\r\n                  <div className=\"input-group\">\r\n\r\n                    <input onChange={handleSettingsChange} dir='ltr' defaultValue={modalState.phone ? modalState.phone.slice(4) : null } required id=\"phone\" type=\"text\" placeholder=\"5xxxxxxxx\" className={\"form-control col-sm-8 \" + (errors.phone || errors.fullPhone ? \"is-invalid\" : '')}/>\r\n                    \r\n                    <div className=\"btn-group\">\r\n                      <Link dir='ltr' id=\"pre_phone_selector\" className={\"form-control btn-white dropdown-toggle \" + (errors.pre_phone || errors.fullPhone ? 'is-invalid' : '')} data-toggle=\"dropdown\" to=\"#\">{modalState.phone ? modalState.phone.substring(0,4) : null}</Link>\r\n                      <ul className=\"dropdown-menu font-weight-bold\">\r\n                        {\r\n                          basic.map((data, index) => {\r\n                            if (data.key === 'country'){\r\n                              return(\r\n                                <li key={index}>\r\n                                  <Link to=\"#\" className=\"text-dark ml-2\" id=\"pre_phone\" name={`+${data.values.telecode}`} title={data.values.country.ar} onClick={handleSettingsChange}>\r\n                                    {getCountryCallingCode(data.label)}+ <img src={`http://catamphetamine.gitlab.io/country-flag-icons/3x2/${data.label}.svg`} width=\"24\" alt={data.label}/>\r\n                                  </Link>\r\n                                </li>\r\n                              )\r\n                            }\r\n                          })\r\n                        }\r\n                      </ul>\r\n                    </div>\r\n\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"country\" className=\"font-weight-bold\">* الدولة :</label>\r\n                  <div className=\"input-group\">\r\n                    <select onChange={handleSettingsChange} id=\"country\" required defaultValue={modalState.country} className=\"custom-select col-sm-10\">\r\n                      {basic.map((data, index) => {\r\n                        if (data.key === 'country'){\r\n                          return(\r\n                            <option key={index} value={data.values.country.ar}>{data.values.country.ar}</option>\r\n                          )\r\n                        }\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* (إضافة/إزالة) الرصيد $ : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"amount\" type=\"number\" min={-modalState.balance} step=\"0.01\" defaultValue={0} placeholder=\"رصيد المستخدم\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"container text-right mt-2\">\r\n                  <p className=\"info-weight\">\r\n                    - رصيد {modalState.username} الحالي : {modalState.balance}$\r\n                  <br/>\r\n                    - رصيد {modalState.username} بعد التعديل : {parseFloat(parseFloat(modalState.balance) + parseFloat(state.amount)).toFixed(2)}$\r\n                  </p>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type='submit' form=\"mainForm\" variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      \r\n      </Modal>\r\n      \r\n      {/* Remove Associate Modal */}\r\n      <Modal show={isRemove} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إزالة المساعد (#{modalState.id})</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container mt-4\">\r\n            \r\n            <p className=\"font-weight-bold text-danger\">\r\n              هل أنت متأكد من إزالة المساعد ؟\r\n            </p>\r\n\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button variant=\"danger\" onClick={removeAssociate}>\r\n              إزالة\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal> \r\n\r\n      {/* Delete Modal */}\r\n      <Modal show={isDelete} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إيقاف المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container\">\r\n            <p className=\"text-danger font-weight-bold\">\r\n              هل أنت متأكد من إيقاف المستخدم؟\r\n            </p>\r\n            <p className=\"text-dark font-info\">\r\n              يمكنك إعادة تفعيل المستخدم, عبر لوحة الحسابات الموقوفة.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button onClick={handleDelete} variant=\"danger\">\r\n              إيقاف\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default AssociatesTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Phone Input\r\nimport { getCountryCallingCode } from 'react-phone-number-input';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n\r\nconst UsersTable = () => {\r\n\r\n  const [basic, setBasicData] = useState([]);\r\n\r\n  const [users, setUsers] = useState({users: null, limit: 50});\r\n\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null});\r\n  const [errors, setErrors] = useState({});\r\n\r\n  // Search Users\r\n  const [search, setSearch] = useState();  \r\n\r\n  // Modals\r\n  const [state, setState] = useState({\r\n    amount: 0,\r\n    access_level: null,\r\n    company_name: null,\r\n    username: null,\r\n    phone: null,\r\n    pre_phone: null,\r\n    country: null\r\n  });\r\n  \r\n  const [modalState, setModalState] = useState({});\r\n\r\n  const [isSetting, setSettingModal] = useState(false);\r\n  const [isRaise, setRaiseModal] = useState(false);\r\n  const [isDelete, setDeletingModal] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/users', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            users: data.users,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    // Fetch basic Data\r\n    let basicData = JSON.parse(localStorage.maidan_elements);\r\n    setBasicData(basicData);\r\n  }, [])\r\n\r\n  const handleSettings = (id, user) => {\r\n\r\n    if (id === 'S'){\r\n      setSettingModal(true);\r\n      setModalState(user);\r\n      setState({\r\n        ...state,\r\n        username: user.username,\r\n        phone: user.phone.slice(4),\r\n        pre_phone: user.phone.substring(0, 4),\r\n        country: user.country\r\n      })\r\n    }\r\n    if (id === 'R'){\r\n      setRaiseModal(true);\r\n      setModalState(user);\r\n    }\r\n    if (id === 'D'){\r\n      setDeletingModal(true);\r\n      setModalState(user);\r\n    }\r\n  }\r\n\r\n  const SearchUsers = async(e) => {\r\n    setSearch({\r\n      ...search,\r\n      [e.target.id]: e.target.value\r\n    })\r\n    await fetch('/api/panel/users', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({...search, [e.target.id]: e.target.value})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setUsers({\r\n            ...users,\r\n            users: data.users\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  const LoadUsers = () => {\r\n\r\n    const users_patch = users.users && users.users.slice(0, users.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        <tr>\r\n          <th className=\"table-header font-weight-bold\">\r\n            #\r\n          </th>\r\n\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"username\" type=\"text\" placeholder=\"إسم المستخدم : \" className=\"form-contro\"/>\r\n          </td>\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"fullname\" type=\"text\" placeholder=\"الإسم الكامل : \" className=\"form-contro\"/>\r\n          </td>\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"email\" type=\"email\" placeholder=\"البريد : \" className=\"form-contro\"/>\r\n          </td>\r\n          <td className=\"table-body\">\r\n            <input onChange={SearchUsers} id=\"phone\" type=\"text\" inputMode=\"tel\" placeholder=\"رقم الجوال : \" className=\"form-contro\"/>\r\n          </td>\r\n\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n          <td className=\"table-body\"/>\r\n        </tr>\r\n        {\r\n          users_patch ? users_patch.map((user, index) => (\r\n            <tr className=\"\" key={index}>\r\n              <th className=\"table-header\">{user.id}</th>\r\n              <td className=\"table-body\">{user.username}</td>\r\n              <td className=\"table-body\">{user.fullname}</td>\r\n              <td className=\"table-body\">{user.email}</td>\r\n              <td dir='ltr' className=\"table-body\">{user.phone}</td>\r\n              <td className=\"table-body\">{user.claimed_coupons}</td>\r\n              <td className=\"table-body\">{user.balance} $</td>\r\n              <td className=\"table-body\">\r\n                <button onClick={() => {handleSettings('S', user)}} className=\"btn btn-sm btn-outline-grey font-weight-bold\">البيانات</button>\r\n                <button onClick={() => {handleSettings('R', user)}} className=\"btn btn-sm btn-outline-info font-weight-bold\">الصلاحيات</button>\r\n                <button onClick={() => {handleSettings('D', user)}} className=\"btn btn-sm btn-danger font-weight-bold\">إيقاف</button>\r\n              </td>\r\n            </tr>\r\n          )) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (users.limit < users.users.length){\r\n      let new_limit = users.limit + 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (users.limit > 50){\r\n      let new_limit = users.limit - 50;\r\n      setUsers({...users, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  // Settings\r\n\r\n  const handleDelete = (e) => {\r\n    e.preventDefault();\r\n\r\n    const DeleteUser = async() => {\r\n      await fetch(`/api/panel/users/${modalState.id}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        }\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'DISABLED'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'الحساب موقوف بالفعل, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    DeleteUser();\r\n  }\r\n\r\n  const handleSettingsChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setErrors({});\r\n\r\n    if (e.target.id === 'pre_phone'){\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.name,\r\n        country: e.target.title\r\n      });\r\n\r\n      document.getElementById('pre_phone_selector').innerText = e.target.name;\r\n    } else {\r\n      setState({\r\n        ...state,\r\n        [e.target.id]: e.target.value\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  const handleSettingsSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SubmitSettings = async() => {\r\n      await fetch(`/api/panel/users/${modalState.id}/settings`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(state)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)) {\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID') {\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"USERNAME_TAKEN\") {\r\n              setErrors({\r\n                username: {\r\n                  name: 'إسم المستخدم',\r\n                  error: 'إسم المستخدم مسجل مسبقاً, الرجاء إدخال إسم مستخدم آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"PHONE_TAKEN\") {\r\n              setErrors({\r\n                fullPhone: {\r\n                  name: 'رقم الجوال',\r\n                  error: 'رقم الجوال مسجل مسبقاً, الرجاء إدخال رقم جوال آخر.',\r\n                  type: 'warning'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === \"INVALID_REQUEST\") {\r\n              setErrors({\r\n                request: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة تعديل الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (state.amount < -modalState.balance) {\r\n      setErrors({\r\n        amount: {\r\n          name: \"الرصيد\",\r\n          error: `الرجاء إدخال رصيد أكبر من ${modalState.balance}- (القيمة السالبة لرصيد المستخدم الحالي)`,\r\n          type: \"warning\"\r\n        }\r\n      })\r\n    }\r\n    else if (!state.pre_phone) {\r\n      setErrors({\r\n        ...errors,\r\n        pre_phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'خانة الدولة غير محددة, الرجاء إختيار الدولة.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else if (state.phone[0] !== \"5\" || state.phone.length !== 9){\r\n      setErrors({\r\n        ...errors,\r\n        phone: {\r\n          name: 'رقم الجوال',\r\n          error: 'رقم الجوال يجب أن يبدأ بـ 5 ويجب أن يتكون من 9 أرقام.',\r\n          type: 'warning'\r\n        }\r\n      })\r\n    }\r\n    else {\r\n      SubmitSettings();\r\n    }\r\n  }\r\n\r\n  const handleRaiseSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    const SubmitRaise = async() => {\r\n      await fetch(`/api/panel/users/${modalState.id}/access_level`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Accept': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n        },\r\n        body: JSON.stringify(state)\r\n      }).then(resp => {\r\n        resp.json().then(data => {\r\n          if (resp.ok){\r\n            setUsers({\r\n              ...users,\r\n              users: data.users\r\n            });\r\n            resetModals();\r\n          } else {\r\n            if ([\r\n              'INVALID_AUTH_HEADER', \r\n              'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n              'ACCESS_DENIED', 'AUTH_ERROR'\r\n            ].includes(data.code)) {\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n              localStorage.clear();\r\n              sessionStorage.clear();\r\n              setRedirect({\r\n                redirect: true,\r\n                flash: {\r\n                  type: 'error',\r\n                  title: 'خطأ',\r\n                  message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'NO_MATCH_ID'){\r\n              setErrors({\r\n                ID: {\r\n                  name: 'المستخدم',\r\n                  error: 'المستخدم غير موجود, أو قد تم حذفه مسبقاً, الرجاء إعادة تحديث الصفحة.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n            if (data.code === 'SERVER'){\r\n              setErrors({\r\n                Server: {\r\n                  name: 'خطأ',\r\n                  error: 'حدث خطأ أثناء محاولة إيقاف الحساب, الرجاء المحاولة من جديد.',\r\n                  type: 'danger'\r\n                }\r\n              })\r\n            }\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    if (state.access_level === \"PROVIDER\" && !state.company_name) {\r\n      setErrors({\r\n        company_name: {\r\n          name: \"إسم الشركة\",\r\n          error: \"الرجاء إدخال إسم الشركة قبل التأكيد.\",\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } else if (state.access_level !== \"PROVIDER\" && state.company_name) {\r\n      setErrors({\r\n        company_name: {\r\n          name: \"إسم الشركة\",\r\n          error: \"لا يمكن إضافة إسم شركة عند ترقية المستخدم لرتبة غير المعلن.\",\r\n          type: 'warning'\r\n        }\r\n      })\r\n    } else {\r\n      SubmitRaise();\r\n    }\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n\r\n    // Reset Modals\r\n    setSettingModal(false);\r\n    setRaiseModal(false);\r\n    setDeletingModal(false);\r\n\r\n    // Reset State, Errors\r\n    setErrors({});\r\n    setModalState({});\r\n    setState({\r\n      amount: 0,\r\n      access_level: null,\r\n      company_name: null,\r\n      username: null,\r\n      phone: null,\r\n      pre_phone: null,\r\n      country: null\r\n    });\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }} />\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n    \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">ID</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">القسائم المملوكة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الرصيد</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإعدادات</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadUsers()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(users.users && users.limit < users.users.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {users.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n    \r\n      {/* Settings Modal */}\r\n      <Modal show={isSetting} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تعديل بيانات المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handleSettingsSubmit} id=\"mainForm\">\r\n\r\n            <div className=\"container text-right\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الإنتباه عند تغيير بيانات المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-12\">\r\n                  <label htmlFor=\"username\" className=\"font-weight-bold\">* إسم المستخدم :</label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"username\" defaultValue={modalState.username} type=\"text\" placeholder=\"إسم المستخدم\" className={\"form-control col-sm-10 \" + (errors.username ? 'is-invalid' : '')}/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"phone\" className=\"ml-sm-4 font-weight-bold\">* رقم الجوال : </label>\r\n                  <div className=\"input-group\">\r\n\r\n                    <input onChange={handleSettingsChange} dir='ltr' defaultValue={modalState.phone ? modalState.phone.slice(4) : null } required id=\"phone\" type=\"text\" placeholder=\"5xxxxxxxx\" className={\"form-control col-sm-8 \" + (errors.phone || errors.fullPhone ? \"is-invalid\" : '')}/>\r\n                    \r\n                    <div className=\"btn-group\">\r\n                      <Link dir='ltr' id=\"pre_phone_selector\" className={\"form-control btn-white dropdown-toggle \" + (errors.pre_phone || errors.fullPhone ? 'is-invalid' : '')} data-toggle=\"dropdown\" to=\"#\">{modalState.phone ? modalState.phone.substring(0,4) : null}</Link>\r\n                      <ul className=\"dropdown-menu font-weight-bold\">\r\n                        {\r\n                          basic.map((data, index) => {\r\n                            if (data.key === 'country'){\r\n                              return(\r\n                                <li key={index}>\r\n                                  <Link to=\"#\" className=\"text-dark ml-2\" id=\"pre_phone\" name={`+${data.values.telecode}`} title={data.values.country.ar} onClick={handleSettingsChange}>\r\n                                    {getCountryCallingCode(data.label)}+ <img src={`http://catamphetamine.gitlab.io/country-flag-icons/3x2/${data.label}.svg`} width=\"24\" alt={data.label}/>\r\n                                  </Link>\r\n                                </li>\r\n                              )\r\n                            }\r\n                          })\r\n                        }\r\n                      </ul>\r\n                    </div>\r\n\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"country\" className=\"font-weight-bold\">* الدولة :</label>\r\n                  <div className=\"input-group\">\r\n                    <select onChange={handleSettingsChange} id=\"country\" required defaultValue={modalState.country} className=\"custom-select col-sm-10\">\r\n                      {basic.map((data, index) => {\r\n                        if (data.key === 'country'){\r\n                          return(\r\n                            <option key={index} value={data.values.country.ar}>{data.values.country.ar}</option>\r\n                          )\r\n                        }\r\n                      })}\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-12 mt-3\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* (إضافة/إزالة) الرصيد $ : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} required id=\"amount\" type=\"number\" min={-modalState.balance} step=\"0.01\" defaultValue={0} placeholder=\"رصيد المستخدم\" className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"container text-right mt-2\">\r\n                  <p className=\"info-weight\">\r\n                    - رصيد {modalState.username} الحالي : {modalState.balance}$\r\n                  <br/>\r\n                    - رصيد {modalState.username} بعد التعديل : {parseFloat(parseFloat(modalState.balance) + parseFloat(state.amount)).toFixed(2)}$\r\n                  </p>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type='submit' form=\"mainForm\" variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      \r\n      </Modal>\r\n      \r\n      {/* Raise Modal */}\r\n      <Modal show={isRaise} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">تغيير صلاحية المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <form onSubmit={handleRaiseSubmit} id=\"mainForm\">\r\n\r\n            <div className=\"container\">\r\n              <p className=\"info-weight text-muted\">\r\n                <i className=\"fa fa-star-of-life fa-xs ml-2\"/>\r\n                الرجاء الحذر عند تغيير مستوى صلاحية المستخدم.\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"container mt-4\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-10\">\r\n                  <label htmlFor=\"access_level\" className=\"font-weight-bold\">* صلاحية المستخدم : </label>\r\n                  <div className=\"input-group\">\r\n                    <select onChange={handleSettingsChange} required id=\"access_level\" defaultValue={modalState.access_level} className=\"custom-select font-weight-bold col-sm-10\">\r\n                      <option className=\"font-weight-bold text-info\" value=\"USER\">مستخدم</option>\r\n                      <option className=\"font-weight-bold text-secondary\" value=\"PROVIDER\">معلن</option>\r\n                      <option className=\"font-weight-bold text-danger\" value=\"ADMIN\">إداري</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col-sm-10 mt-2\">\r\n                  <label htmlFor=\"company_name\" className=\"font-weight-bold\">إسم الشركة : </label>\r\n                  <div className=\"input-group\">\r\n                    <input onChange={handleSettingsChange} id=\"company_name\" type=\"text\" placeholder=\"(فقط للمعلن)\" className={\"form-control col-sm-10 \" + (errors.company_name ? \"is-invalid\" : '')}/>\r\n                  </div>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button type=\"submit\" form='mainForm' variant=\"outline-primary\">\r\n              تأكيد\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n      \r\n      {/* Delete Modal */}\r\n      <Modal show={isDelete} onHide={resetModals}>\r\n        \r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">إيقاف المستخدم ({modalState.username}) : </Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center\">\r\n\r\n          <div className=\"container mt-2\">\r\n            {loadErrors()}\r\n          </div>\r\n\r\n          <div className=\"container\">\r\n            <p className=\"text-danger font-weight-bold\">\r\n              هل أنت متأكد من إيقاف المستخدم؟\r\n            </p>\r\n            <p className=\"text-dark font-info\">\r\n              يمكنك إعادة تفعيل المستخدم, عبر لوحة الحسابات الموقوفة.\r\n            </p>\r\n          </div>\r\n\r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"outline-grey\" onClick={resetModals}>\r\n              إغلاق\r\n            </Button>\r\n            <Button onClick={handleDelete} variant=\"danger\">\r\n              إيقاف\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default UsersTable","import React, { useState, useEffect } from 'react';\r\n\r\n// Modals\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nconst BalanceRequests = () => {\r\n\r\n  const [requests, setRequests] = useState({requests: null, limit: 50});\r\n\r\n  const [state, setState] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n  const [errors, setErrors] = useState({});\r\n  const [isOk, setOk] = useState(false);\r\n  const [isBad, setBad] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/panel/balance/requests', {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          setRequests({\r\n            requests: data.requests,\r\n            limit: 50\r\n          })\r\n        } else {\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n  }, [])\r\n\r\n\r\n  const LoadRequests = () => {\r\n\r\n    const handleAR = (request, status) => {\r\n\r\n      setState(request);\r\n\r\n      if (status === 'A'){\r\n        setOk(true);\r\n      } else {\r\n        setBad(true)\r\n      }\r\n\r\n    }\r\n\r\n    const getMethod = (status) => {\r\n      let types = {\r\n        paypal: ['بايبال', 'primary'],\r\n        bank: ['تحويل بنكي', 'secondary'],\r\n        mada: ['مدى', 'primary']\r\n      }\r\n\r\n      return types[status]\r\n    }\r\n\r\n    const getStatus = (verified) => {\r\n\r\n      if (verified) {\r\n        return ['موثق', 'primary']\r\n      }\r\n      return ['غير موثق', 'secondary']\r\n    }\r\n\r\n    const requests_patch = requests.requests && requests.requests.slice(0, requests.limit);\r\n\r\n    return(\r\n      <tbody>\r\n        {\r\n          requests_patch ? requests_patch.map((req, index) => {\r\n            let method = getMethod(req.method);\r\n            let status = getStatus(req.verified);\r\n            return(\r\n              <tr className=\"\" key={index}>\r\n                <th className=\"table-header\">{index+1}</th>\r\n                <td className=\"table-header\">{req.username}</td>\r\n                <td className=\"table-header\">{req.user_id} #</td>\r\n                <td className=\"table-header\">{req.fullname || 'غ.م'}</td>\r\n                <td className=\"table-header\">{req.email}</td>\r\n                <td dir='ltr' className=\"table-header\">{req.phone}</td>\r\n                <td className={`table-header text-${method[1]}`}>{method[0]}</td>\r\n                <td className=\"table-header\">{req.bank_account || 'غ.م'}</td>\r\n                <td className=\"table-header\">{req.amount}</td>\r\n                <td className={`table-header text-${status[1]}`}>{status[0]}</td>\r\n                {\r\n                  req.verified ? (\r\n                    <td className=\"table-header text-success\">مقبول</td>\r\n                  ) : (\r\n                    <td className=\"table-header\">\r\n                      <button onClick={() => {handleAR(req, 'R')}} className=\"btn btn-sm btn-outline-danger\">رفض</button>\r\n                      <button onClick={() => {handleAR(req, 'A')}} className=\"btn btn-sm btn-outline-success\">قبول</button>\r\n                    </td>\r\n                  )\r\n                }\r\n              </tr>\r\n            )\r\n          }) : null\r\n        }\r\n      </tbody>\r\n    )\r\n  }\r\n\r\n  const AddLimit = () => {\r\n    if (requests.limit < requests.requests.length){\r\n      let new_limit = requests.limit + 50;\r\n      setRequests({...requests, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const ReduceLimit = () => {\r\n    if (requests.limit > 50){\r\n      let new_limit = requests.limit - 50;\r\n      setRequests({...requests, limit: new_limit})\r\n    }\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    setState({\r\n      ...state,\r\n      [e.target.id]: e.target.value\r\n    })\r\n\r\n  }\r\n\r\n  const handleApproved = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/balance/requests/${state.id}/accept`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      },\r\n      body: JSON.stringify({amount: state.amount})\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          // Reset Modals\r\n          resetModals();\r\n          // Update Requests\r\n          setRequests({\r\n            ...requests,\r\n            requests: data.requests\r\n          })\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء معالجة الطلب.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'VERIFIED'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'الطلب قد تم تأكيده بالفعل, الرجاء تحديث الصفحة.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'معرف الطلب',\r\n                error: 'لا يوجد طلب يطابق المعرف المدخل',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_REQUEST'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'الطلب الذي تحاول إرساله غير صحيح, الرجاء المحاولة من جديد لاحقاً.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_REQUEST'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'الرجاء إدخال الرصيد المضاف أولا قبل تأكيد القبول',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_USER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'المستخدم صاحب الطلب قد تم حذفه, أو لم يعد موجود.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n    \r\n  }\r\n\r\n  const handleReject = async(e) => {\r\n    e.preventDefault();\r\n\r\n    await fetch(`/api/panel/balance/requests/${state.id}/reject`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          // Reset Modals\r\n          resetModals();\r\n          // Update Requests\r\n          setRequests({\r\n            ...requests,\r\n            requests: data.requests\r\n          })\r\n        } else {\r\n          if (data.code === 'SERVER'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'حدث خطأ أثناء محاولة معالجة الطلب',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_MATCH_ID'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'معرف الطلب',\r\n                error: 'الطلب محذوف, أو غير موجود حالياً, الرجاء إعادة تحديث الصفحة.',\r\n                type: 'warning'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'VERIFIED'){\r\n            setErrors({\r\n              Server: {\r\n                name: 'خطأ',\r\n                error: 'الطلب قد تم تأكيده مسبقاً بالفعل, لا يمكنك حذف عملية قد تم الموفقة عليها.',\r\n                type: 'danger'\r\n              }\r\n            })\r\n          }\r\n          if ([\r\n            'INVALID_AUTH_HEADER', \r\n            'NO_TOKEN', 'INVALID_ACCESS_LEVEL', \r\n            'ACCESS_DENIED', 'AUTH_ERROR'\r\n          ].includes(data.code)) {\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n          if (['NOT_LOGGED_IN', 'LOGIN_REQUIRED'].includes(data.code)){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يجب عليك تسجيل الدخول بحساب إداري أولاً.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  const loadErrors = () => {\r\n    if (Object.keys(errors).length !== 0 && errors.constructor === Object){\r\n      return (\r\n        <div>\r\n          {errors ? Object.entries(errors).map((e, id) => {\r\n            return (\r\n              <div key={id} className={`alert alert-${e[1].type} text-right`}>\r\n                <p className=\"font-weight-bold\">\r\n                  {e[1].name} : {e[1].error}\r\n                </p>\r\n              </div>\r\n            )\r\n          }): null}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const resetModals = () => {\r\n    // Reset State & Errors\r\n    setState({});\r\n    setErrors({});\r\n    // Reset Modals\r\n    setOk(false);\r\n    setBad(false);\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"table-responsive mt-4\">\r\n      \r\n      <table className=\"table table-sm table-bordered\">\r\n        <thead>\r\n          <tr className=\"bg-light-grey\">\r\n            <th className=\"font-weight-bold\" scope=\"col\">#</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">إسم المستخدم</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">معرف المستخدم (ID)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الإسم الكامل</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">البريد الإلكتروني (للتواصل)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الجوال</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">وسيلة الدفع</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رقم الحساب (البنكي)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الكمية ($)</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">الحالة</th>\r\n            <th className=\"font-weight-bold\" scope=\"col\">رفض/قبول</th>\r\n          </tr>\r\n        </thead>\r\n        {LoadRequests()}\r\n      </table>\r\n      <div className=\"justify-content-center\">\r\n        {(requests.requests && requests.limit < requests.requests.length) ? (<button onClick={AddLimit} className=\"btn btn-sm btn-outline-primary\">عرض المزيد</button>) : null}\r\n        {requests.limit > 50 ? (<button onClick={ReduceLimit} className=\"btn btn-sm btn-outline-secondary\">عرض أقل</button>) : null}\r\n      </div>\r\n\r\n      {/* Bad Modal */}\r\n      <Modal show={isBad} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">رفض طلب التعبئة</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-2\">\r\n          {loadErrors()}\r\n\r\n          <p className=\"font-weight-bold text-danger\">\r\n            هل أنت متأكد من رفض الطلب ؟ سيتم حذف الطلب من السجلات نهائياً.\r\n          </p>\r\n\r\n          <p className=\"font-info text-primary\">\r\n            الرجاء التواصل مع صاحب الطلب, وتوضيح أسباب الرفض له.\r\n          </p>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button onClick={handleReject} variant=\"danger\">\r\n              رفض\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n      {/* Ok Modal */}\r\n      <Modal show={isOk} onHide={resetModals}>\r\n        <Modal.Header className=\"justify-content-center\">\r\n          <Modal.Title className=\"display-8\">قبول طلب التعبئة</Modal.Title>\r\n        </Modal.Header>\r\n        \r\n        <Modal.Body className=\"text-center mt-2\">\r\n          {loadErrors()}\r\n\r\n          <form id=\"mainForm\" onSubmit={handleApproved}>\r\n\r\n            <div className=\"container mt-2\">\r\n\r\n              <div className=\"row text-right\">\r\n\r\n                <div className=\"col-sm-10\">\r\n                  <label htmlFor=\"amount\" className=\"font-weight-bold\">* الرصيد المضاف :</label>\r\n                  <div className=\"input-group\">\r\n                    <input required onChange={handleChange} id=\"amount\" type=\"number\" min=\"0\" step=\"0.01\" defaultValue={state.amount} className=\"form-control col-sm-10\"/>\r\n                  </div>\r\n                  <p className=\"font-info text-info\">\r\n                    الرجاء الإنتباه عند تغيير الرصيد المضاف, وإدخال القيمة الجديدة بحذر.\r\n                  </p>\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </form>\r\n          \r\n        </Modal.Body>\r\n        \r\n        <Modal.Footer>\r\n          <div className=\"input-group justify-content-center\">\r\n            <Button variant=\"grey\" onClick={resetModals}>\r\n              إلغاء\r\n            </Button>\r\n            <Button type=\"submit\" form=\"mainForm\" variant=\"success\">\r\n              قبول\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n\r\n      </Modal>\r\n\r\n   </div>\r\n  )\r\n}\r\n\r\n\r\nexport default BalanceRequests","import React, { useState, useEffect } from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\n// Panels{Users}\r\nimport AdminsTable from '../Panels/AdminsTable';\r\nimport ProvidersTable from '../Panels/ProvidersTable';\r\nimport AssociatesTable from '../Panels/AssociatesTable';\r\nimport UsersTable from '../Panels/UsersTable';\r\nimport ToProviderTable from '../Panels/ToProviderTable';\r\nimport BalanceRequests from '../Panels/BalanceRequests';\r\nimport DisabledUsers from '../Panels/DisabledUsers';\r\nimport InActiveUsers from '../Panels/InActiveUsers';\r\n\r\n\r\n// Panels{Labels}\r\nimport ElementsTable from '../Panels/ElementsTable';\r\nimport FilesTable from '../Panels/FilesTable';\r\n\r\n// Panels{Groups/Offers}\r\nimport GroupsTable from '../Panels/Groups';\r\nimport SellsTable from '../Panels/Sells';\r\nimport AddGroupsTable from '../Panels/AddGroupTable';\r\nimport AddSellsTable from '../Panels/AddSellsTable';\r\nimport TicketsTable from '../Panels/Tickets';\r\n\r\n\r\nexport const SuperAdminPanel = () => {\r\n\r\n  const [subActive, setSubActive] = useState({});\r\n  const [redirect, setRedirect] = useState({redirect: false, flash: null})\r\n\r\n\r\n  useEffect(() => {\r\n    // Authenticate Current User.\r\n    fetch(\"/api/authenticate/superadmin\", {\r\n      method: 'Get',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        'Authorization': `Bearer ${localStorage.maidan_jwt_$m3}`\r\n      }\r\n    }).then(resp => {\r\n      resp.json().then(data => {\r\n        if (resp.ok){\r\n          \r\n        } else {\r\n          if (data.code === 'AUTH_ERROR'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت غير مصرح للدخول لهذه الصفحة'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'ACCESS_DENIED'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'غير مصرح',\r\n                message: 'أنت لا تملك الصلاحيات اللازمة لدخول هذه الصفحة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_ACCESS_LEVEL'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'SERVER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'حدث خطأ أثناء محاولة التأكد من صلاحياتك, الرجاء المحاولة من جديد لاحقاً'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NO_TOKEN'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'أنت لا تملك رمز الصلاحية, الرجاء التواصل مع الإدارة لإصلاح هذا الخطأ'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'INVALID_AUTH_HEADER'){\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'الصلاحيات التي تملكها غير معترف بها, الرجاء التواصل مع الإدارة.'\r\n              }\r\n            })\r\n          }\r\n          if (data.code === 'NOT_LOGGED_IN'){\r\n            localStorage.clear();\r\n            sessionStorage.clear();\r\n            setRedirect({\r\n              redirect: true,\r\n              flash: {\r\n                type: 'error',\r\n                title: 'خطأ',\r\n                message: 'يبدو أنك قمت بتسجيل خروجك أثناء عملية فحص الصلاحيات.'\r\n              }\r\n            })\r\n          }\r\n        }\r\n      })\r\n    })\r\n\r\n    // Tree Menu\r\n    var toggler = document.getElementsByClassName(\"caret\");\r\n    var i;\r\n\r\n    for (i = 0; i < toggler.length; i++) {\r\n      toggler[i].addEventListener(\"click\", function() {\r\n        this.parentElement.querySelector(\".nested\").classList.toggle(\"active\");\r\n        this.classList.toggle(\"caret-down\");\r\n      });\r\n    }\r\n  }, [])\r\n\r\n\r\n  const handleSubTableSwitch = (e) => {\r\n    e.preventDefault();\r\n\r\n    // Activate Element's Table\r\n    setSubActive({\r\n      [e.target.id]: true\r\n    })\r\n\r\n    // Reset All Elements to Normal Color\r\n    var toggler = document.getElementsByClassName('tabs-links');\r\n    var i;\r\n    for (i=0;i < toggler.length; i++){\r\n      toggler[i].classList.remove('text-dark');\r\n      toggler[i].classList.add('text-primary');\r\n    }\r\n\r\n    // Change Color of Selected Element.\r\n    document.getElementById(e.target.id).classList.add('text-dark')\r\n  }\r\n\r\n  if (redirect.redirect){\r\n    return <Redirect to={{\r\n      pathname: '/',\r\n      state: {flash: redirect.flash}\r\n    }}/>\r\n  }\r\n\r\n  return(\r\n    <div className=\"mb-5 pb-5 pt-5\">\r\n      \r\n      <div className=\"container-fluid mt-5 pt-5\">\r\n\r\n        <div className=\"card bg-light-grey shadow-sm p-5\">\r\n\r\n          <div className=\"text-center\">\r\n            <span className=\"display-7\">لوحة التحكم</span>\r\n          </div>\r\n\r\n          <hr/>\r\n\r\n          <div className=\"card-body mt-5\">\r\n\r\n            <div className=\"row justify-content-center\">\r\n\r\n              <div className=\"col-sm-2 mt-5\">\r\n                \r\n                <ul id=\"myUL\" className=\"text-right font-weight-bold\">\r\n                  \r\n                  <li className=\"mt-5\">\r\n                    <span className=\"caret caret-down tabs-special\">لوحة المستخدمين</span>\r\n                    <ul className=\"nested active\">\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Users\" to=\"#\" onClick={handleSubTableSwitch}>المستفيدين</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Providers\" to=\"#\" onClick={handleSubTableSwitch}>المعلنين</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Associates\" to=\"#\" onClick={handleSubTableSwitch}>المساعدين</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Admins\" to=\"#\" onClick={handleSubTableSwitch}>الإداريين</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Tickets\" to=\"#\" onClick={handleSubTableSwitch}>التذاكر</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Balance\" to=\"#\" onClick={handleSubTableSwitch}>طلبات إضافة الرصيد</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Applications\" to=\"#\" onClick={handleSubTableSwitch}>طلبات تحويل الحساب لمعلن</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Disabled\" to=\"#\" onClick={handleSubTableSwitch}>الحسابات الموقوفة</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Newbie\" to=\"#\" onClick={handleSubTableSwitch}>الحسابات الجديدة</Link>\r\n                      </li>\r\n                    </ul>\r\n                  </li>\r\n\r\n                  <li className=\"mt-3\">\r\n                    <span className=\"caret caret-down tabs-special\">لوحة العروض والإعلانات</span>\r\n                    <ul className=\"nested active\">\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Groups\" to=\"#\" onClick={handleSubTableSwitch}>الإعلانات</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"AddGroup\" to=\"#\" onClick={handleSubTableSwitch}>طلبات إضافة الإعلان</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Sells\" to=\"#\" onClick={handleSubTableSwitch}>العروض</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"AddSells\" to=\"#\" onClick={handleSubTableSwitch}>طلبات إضافة العروض</Link>\r\n                      </li>\r\n                    </ul>\r\n                  </li>\r\n\r\n                  <li className=\"mt-3\">\r\n                    <span className=\"caret caret-down tabs-special\">لوحة الملفات و بيانات الإدخال</span>\r\n                    <ul className=\"nested active\">\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Files\" to=\"#\" onClick={handleSubTableSwitch}>الملفات</Link>\r\n                      </li>\r\n                      <li>\r\n                        <Link className=\"tabs-links\" id=\"Elements\" to=\"#\" onClick={handleSubTableSwitch}>بيانات الإدخال</Link>\r\n                      </li>\r\n                    </ul>\r\n                  </li>\r\n\r\n                </ul>\r\n\r\n              </div>\r\n\r\n              <div className=\"col-sm-10 mt-5\">\r\n\r\n                <div className=\"text-center\">\r\n                  {\r\n                    subActive.Users ? <UsersTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Providers ? <ProvidersTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Associates ? <AssociatesTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Admins ? <AdminsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Tickets ? <TicketsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Applications ? <ToProviderTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Disabled ? <DisabledUsers/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Newbie ? <InActiveUsers/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Balance ? <BalanceRequests/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Groups ? <GroupsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Sells ? <SellsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.AddGroup ? <AddGroupsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.AddSells ? <AddSellsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Elements ? <ElementsTable/> : null\r\n                  }\r\n\r\n                  {\r\n                    subActive.Files ? <FilesTable/> : null\r\n                  }\r\n                </div>\r\n\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n      </div>\r\n      \r\n    </div>\r\n  )\r\n}","import React, { Component } from 'react';\nimport {BrowserRouter as Router, Route, Switch, Redirect} from 'react-router-dom';\n\n\n/* Main Layout */ \nimport Navbar from './components/layouts/Navbar';\nimport { Footer } from './components/layouts/Footer';\nimport SyncApp from './SyncApp';\nimport FetchData from './SyncData'\n\nimport { Home } from './components/Home/Home';\nimport { Terms } from './components/Home/Terms';\n\n/* Coupon Groups */\nimport { ViewGroup } from './components/CouponsGroup/Group';\nimport { ViewGroups } from './components/CouponsGroup/Groups';\n\n/* Offers */\nimport { ViewOffers } from './components/CouponsOffer/Offers'\n\n/* User */\nimport { Profile } from './components/User/Profile';\nimport { Notifications } from './components/User/Notifications';\nimport { Balance } from './components/User/Balance';\nimport { MyCoupons } from './components/User/MyCoupons';\nimport { Activation } from './components/User/Activation';\nimport { Settings } from './components/User/Settings';\nimport { Ticket } from './components/User/Ticket';\nimport { MyTickets } from './components/User/MyTickets';\n\n/* Admins/Providers */\nimport { NewGroup } from './components/Admins/Provider/NewGroup';\nimport { RedeemCoupons } from './components/Admins/Provider/Redeem';\nimport MyGroups from './components/Admins/Provider/Panel';\n\n/* Admins/Admin */ \nimport { AdminViewGroup } from './components/CouponsGroup/AdminGroup';\nimport { AdminPanel } from './components/Admins/Admin/Panel';\nimport Histories from './components/Admins/Panels/Histories';\n\n/* Admins/SuperAdmin */\nimport { SuperAdminPanel } from './components/Admins/SuperAdmin/Panel';\n\n\n\n\nclass App extends Component {\n\n  render() {\n\n    const Default = () => (\n      <div className=\"App\">\n        <Navbar/>\n        <Switch>\n          {/* Default Routes */}\n          <Route exact path=\"/\" component={Home} />\n          <Route exact path=\"/terms\" component={Terms} />\n          <Route exact path=\"/coupons/offers\" component={ViewOffers} />\n          <Route exact path=\"/ads\" component={ViewGroups} />\n          <Route exact path=\"/ads/:gid\" component={ViewGroup} />\n          \n          {/* Admins Routes */}\n          <Route exact path=\"/admin\" render={() => <Redirect to=\"/admin/panel\"/>}/>\n          <Route exact path=\"/admin/panel\" component={SuperAdminPanel}/>\n          {/* Admins/Provider */}\n          <Route exact path=\"/admin/groups/new\" component={NewGroup} />\n          <Route exact path=\"/admin/redeem\" component={RedeemCoupons} />\n          <Route exact path=\"/providers/panel\" component={MyGroups} />\n          {/* Admins/Admin */}\n          <Route exact path=\"/admin/histories\" component={Histories} />\n          <Route exact path=\"/admins/panel\" component={AdminPanel} />\n          <Route exact path=\"/admin/ads/:gid\" component={AdminViewGroup} />\n          \n          {/* Users Routes */}\n          <Route exact path=\"/user/profile\" component={Profile}/>\n          <Route exact path=\"/user/notifications\" component={Notifications}/>\n          <Route exact path=\"/settings\" component={Settings}/>\n          <Route exact path=\"/balance\" component={Balance}/>\n          <Route exact path=\"/user/coupons\" component={MyCoupons}/>\n          <Route exact path=\"/user/tickets\" component={MyTickets}/>\n          <Route exact path=\"/user/tickets/:id\" component={Ticket}/>\n          <Route exact path=\"/activate\" component={Activation}/>\n        </Switch>\n        <Footer/>\n      </div>\n    )\n    \n    return(\n      <Router>\n        <FetchData/>\n        <SyncApp/>\n        <Switch>\n          <Route component={Default}/>\n        </Switch>\n      </Router>\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}